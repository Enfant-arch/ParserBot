"use strict";(self.webpackChunkgoods_web_front_ssr=self.webpackChunkgoods_web_front_ssr||[]).push([[9894],{14569:function(de,Y,n){n.d(Y,{r:function(){return P}});var w=n(53869),G=n(8952),L=n(20025),M=n(79718),g=n(40107),R=n(65363),T=n(5756),E=n(35667),y=Object.defineProperty,f=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,s=(l,r,e)=>r in l?y(l,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[r]=e,D=(l,r)=>{for(var e in r||(r={}))m.call(r,e)&&s(l,e,r[e]);if(i)for(var e of i(r))O.call(r,e)&&s(l,e,r[e]);return l},p=(l,r)=>f(l,o(r)),_=(l,r,e)=>new Promise((d,h)=>{var v=c=>{try{u(e.next(c))}catch(I){h(I)}},a=c=>{try{u(e.throw(c))}catch(I){h(I)}},u=c=>c.done?d(c.value):Promise.resolve(c.value).then(v,a);u((e=e.apply(l,r)).next())});class P{constructor(r=(0,w.inject)(G.ZP),e=(0,w.inject)(L.Z)){this.mgate=r,this.logger=e}fetchRelatedBanner(r){return _(this,null,function*(){const{pdpRelatedProduct:e}=E.mf[E.ZD.PdpPromo];let d=[];try{d=(yield this.mgate.fetch("/api/mobile/v1/promoContentService/promoContent/get",{criterias:(0,E.iH)({biba:e},{itemId:r})},{})).content}catch(a){return this.logger.handleError({message:"PROMO: \u041E\u0448\u0438\u0431\u043A\u0430 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u043A\u043B\u0438\u0435\u043D\u0442\u0441\u043A\u043E\u0433\u043E \u0440\u0435\u0436\u0438\u043C\u0430",details:a}),null}if(!d?.length)return null;const h=d?.filter(a=>(0,E.RH)(a));if(!h)return null;const v=h.filter(a=>e.includes(a.placeId||""));return v.length?v[0]:null})}mapRelatedBanner(r){const e={[String(r.placeId)||""]:r},d=(0,E.is)((0,E.Bt)(e,[r]));return d.length?d[0]:null}mapRelatedProduct(r){var e,d;if(!r)return null;const h=(e=r.goods)==null?void 0:e[0];if(!h)return null;const v=(0,R.KB)([h.favoriteOffer],[],h),a=v?.length?v[0]:h.favoriteOffer,u={goodsId:h.goods.goodsId,merchantId:((d=h.favoriteOffer)==null?void 0:d.merchantId)||"",warehouseId:h.favoriteOffer.warehouseId};return{item:p(D({},h),{comboId:(0,M.un)(u),discounts:(h.discounts||[]).map(c=>c.type==="BPG"?p(D({},c),{type:T.HL.Bpg2}):c),favoriteOffer:a}),relationType:g.e5.Product}}getRelatedProduct(r){return _(this,null,function*(){const e=yield this.fetchRelatedBanner(r);if(!e)return null;const d=this.mapRelatedBanner(e);return d&&this.mapRelatedProduct(d)||null})}}},35667:function(de,Y,n){n.d(Y,{QJ:function(){return l},Hn:function(){return r},Zz:function(){return d},FI:function(){return h},G1:function(){return v},$d:function(){return u},nh:function(){return c},Yd:function(){return I},ZD:function(){return N},F1:function(){return H},Cc:function(){return F},Qi:function(){return A},mf:function(){return j},AP:function(){return x},iH:function(){return ee},Bt:function(){return Z},L9:function(){return U},Ae:function(){return $},eE:function(){return le},fk:function(){return q},is:function(){return ie},RH:function(){return he},ZP:function(){return Te},rm:function(){return Le},hq:function(){return Ge},vB:function(){return Ke},Hg:function(){return Xe},sT:function(){return qe},j4:function(){return et},T5:function(){return tt},ro:function(){return rt},ZF:function(){return nt}});var w=n(53869),G=n(8952),L=n(26021),M=n(29002),g=n(66129),R=n(96842),T=n(39849),E=n(79718),y=n(65363),f=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,D=(t,S,Q)=>S in t?f(t,S,{enumerable:!0,configurable:!0,writable:!0,value:Q}):t[S]=Q,p=(t,S)=>{for(var Q in S||(S={}))O.call(S,Q)&&D(t,Q,S[Q]);if(m)for(var Q of m(S))s.call(S,Q)&&D(t,Q,S[Q]);return t},_=(t,S)=>o(t,i(S)),P=(t,S,Q)=>new Promise((oe,ce)=>{var ne=pe=>{try{ve(Q.next(pe))}catch(me){ce(me)}},X=pe=>{try{ve(Q.throw(pe))}catch(me){ce(me)}},ve=pe=>pe.done?oe(pe.value):Promise.resolve(pe.value).then(ne,X);ve((Q=Q.apply(t,S)).next())}),l=(t=>(t.STRETCH="stretch",t.GBL="productList",t.DAILY_GOODS="productListDailyItems",t.BIG_SLIDER="desktopSlider",t.SLIDER="stretchSlider",t.CAP="cap",t.TILE="tile",t.CUSTOM_CONTENT="customContent",t.STORIES_PREVIEW="story",t.STORIES_FULLSCREEN="storySlide",t.YOUTUBE="youtube",t.VIDEO="video",t.TEXT="text",t.TILE_MENU="tileMenu",t.FAQ="faq",t.TILE_ADVANCED="tileAdvanced",t.ACTION_FILTER="action_filter",t.COUPON="coupon",t.PRODUCT_PROMO_LISTING="productPromoListing",t.MASS_COMM_RIBBON="MASS_COMM_RIBBON",t.LOOKBOOK="lookbook",t.NAVIGATION_TAGS="NAVIGATION_TAGS",t.GBL_MERCHANT="GBL_MERCHANT",t.RELATED_PRODUCT="RELATED_PRODUCT",t))(l||{}),r=(t=>(t.GBL_SIDE_BANNER_DOUBLE_WIDTH="gblSideBannerDoubleWidth",t.GBL_TILE="gbl_tile",t.GBL_STRETCH="gbl_stretch",t.GBL_FASHION="gbl_fashion",t.GBL_FASHION_RECOMMENDATION="gbl_fashion_recommendation",t.GBL_FASHION_WIDE="gbl_fashion_wide",t.GBL_BRAND_PROMO="gbl_brand_promo",t.GBL_PROMO="gbl_promo",t.GBL_AUCTION="gbl_auction",t.GBL_BRAND="gbl_brand",t.GBL_FEDERAL="gbl_federal",t.CAP_SIS="cap_sis",t.CAP_BZ="cap_bz",t.TILE_SCROLL="tile_scroll",t.TILE_STOCK="tile_stock",t.TILE_WITH_BIG="tile_with_big",t.ACTION_PAGE_COUPON="actionpagecoupon",t.PROMO_PAGE_COUPON="promopagecoupon",t.LOOKBOOK_SIMILAR="lookbook_similar",t))(r||{});const e=["BIG_SLIDER","STRETCH","SLIDER","TILE","TILE_ADVANCED","TILE_MENU","CAP","FAQ","TEXT","VIDEO","YOUTUBE","STORIES_PREVIEW","STORIES_FULLSCREEN","NAVIGATION_TAGS","GBL_MERCHANT"];var d=(t=>(t.IS_NEW="IS_NEW",t.IS_ENDING_SOON="IS_ENDING_SOON",t))(d||{});const h={startNum:200000260,endNum:200000289},v="massCommunication",a=["multi-cart.checkout","multi-cart.index"];var u=(t=>(t.Desktop="700000021",t.Mobile="700000022",t))(u||{}),c=(t=>(t.Right="RIGHT",t.Left="LEFT",t.Flex="FLEX",t.TextRight="TEXT_RIGHT",t.TextLeft="TEXT_LEFT",t.Unknown="UNKNOWN",t))(c||{}),I=(t=>(t.Video="VIDEO_IN_HOUSE",t.Image="IMAGE",t.Youtube="VIDEO_YOUTUBE",t))(I||{}),N=(t=>(t.PageHeader="pageHeader",t.PdpPromo="pdpPromo",t.PdpPromoRecommendations="pdpPromoRecommendations",t.PromoPage="promoPage",t.Personal="personal",t.Favorites="favorites",t.MerchantListing="merchantListing",t.MerchantDetails="merchantDetails",t.DefaultDepartmentNoFilters="defaultDepartmentNoFilters",t.DefaultDepartment="defaultDepartment",t.DefaultListingNoFilters="defaultListingNoFilters",t.DefaultListing="defaultListing",t.RelatedSearchNoFilters="defaultRelatedSearchNoFilters",t.RelatedSearch="defaultRelatedSearch",t.DefaultSearchNoFilters="defaultSearchNoFilters",t.DefaultSearch="defaultSearch",t.NotFoundSearch="notFoundSearch",t.FoundSearch="foundSearch",t.CategoriesMenu="categoriesMenu",t.Coupons="coupons",t.Checkout="checkout",t.Cart="cart",t.CartDefault="cartDefault",t.EmptyCart="emptyCart",t.Payment="payment",t.SimilarGoods="similarGoods",t.MainPage="mainPage",t.Typ="typ",t.NotFound="notFound",t.RootCatalog="rootCatalog",t.PdpPromoSponsoredProducts="pdpPromoSponsoredProducts",t.PdpRelatedProduct="pdpRelatedProduct",t))(N||{});const H=[["000000123","000000124","000000125"],["000000140","000000141","000000142","000000143"],["000000144","000000145","000000146","000000147"],["000000148","000000149","000000150","000000151"]],F=[["000000135","000000137","000001126"],["000001127","000001128","000001129","000001130"],["000001131","000001132","000001133","000001134"],["000001135","000001136","000001137","000001138"]];function B(t){const S=[];return t.forEach(Q=>S.push(...Q)),S}function A(t,S){let Q=[];for(let oe=t;oe<=S;oe++)Q.push(oe.toString());return Q}const j={pageHeader:{navigationTags:A(999000007,999000013)},categoriesMenu:{aboveMenu:["000000085"]},pdpPromoRecommendations:{productList:["200000251"],bottomProductList:["200000252"],recommendationList:["200000253"]},pdpPromo:{headingBlock:["000000126"],videoBanners:["200000250"],tickerBar:["000000503"],pdpRelatedProduct:["200000400"]},pdpPromoSponsoredProducts:{sponsoredProductList:A(200000300,200000310)},promoPage:{headingBlock:["200000043","200000040"],headingBottomBlock:A(200000302,200000330)},favorites:{menuBlock:["000000127","000000128"],headingBlock:["000000129","110111001","110111002","110111003","110111004","110111005","110111006"],contentBlock:["000000130"],productList:["000000139"]},personal:{sberPrimeInactive:["000000952"],sberPrimeActive:["000000953"],sberPrimeMobileInactive:["000000954"],sberPrimeMobileActive:["000000955"],sberPrimeHeaderBanner:["000000958"]},merchantListing:{headingBlock:["000000121","000000390","000000391"]},merchantDetails:{headingBlock:["200000200"],videoBanners:["200000250"],productList:["200000251"],recommendationList:["200000253"]},defaultDepartment:{headerStretch:["000000081"],mobileStretch:["000000109"],asideFilter:A(800111107,800111122)},defaultDepartmentNoFilters:{staticAndAuctionBanners:A(800111001,800111101),underFilter:["000000082"],bottomGbl:["800111500"],tickerBar:["000000503"]},defaultRelatedSearch:{amongItemsAuction:[...B(H),...B(F)],amongItemsStatic:["000000136","000001337"]},defaultRelatedSearchNoFilters:{sliderStretch:["000000390","000000391","000000392","000000393","000000394","000000395","000000121"],auctionGbl:A(700000001,700000010),underFilter:["000000079","000000134"],bottomGbl:["700000100"],tickerBar:["000000503"],topSearchGbl:A(700000011,700000020),bottomStretch:["000000138"],mainSearchBanners:A(120111001,120111007)},defaultListing:{amongItemsAuction:B(H),amongItemsStatic:["000001337"]},defaultListingNoFilters:{sliderStretch:["000000390","000000391","000000392","000000393","000000394","000000395","000000121"],auctionGbl:A(700000001,700000010),underFilter:["000000079"],bottomGbl:["700000100"],tickerBar:["000000503"]},defaultSearch:{amongItemsStatic:["000000136"],amongItemsAuction:B(F)},defaultSearchNoFilters:{topSearchGbl:A(700000011,700000020),underFilter:["000000134"],bottomStretch:["000000138"],mainSearchBanners:A(120111001,120111007)},foundSearch:{bottomGbl:["120111020","120111021"]},notFoundSearch:{bottomGbl:["120111022","120111023"]},checkout:{headingBlock:["000000083","000000087"]},cart:{bottomProductList:["000000100","000000101"]},cartDefault:{headerBanner:["000000091"]},emptyCart:{emptyBlock:["800111123"]},payment:{paymentMethodBlock:["999000000"],mobileCardFormBlock:["999000100"]},typ:{bottomGbl:["666000001","666000002"]},notFound:{bottomGbl:["404000001","404000002"]},coupons:{landing:["150112500"],promoCodesPage:["150112500"]},similarGoods:{similarGoodsNotAvailable:["700000101"],similarGoodsAddCart:["999000004"]},rootCatalog:{rootCatalogHeaderBanner:["000000900"]}},J={previewTape:["000000501"],modalInfo:["000000505"]},re="100111101",Pe="100111300";function De(t,S){return t==="productList"&&S==="gbl_brand"}function ge(t){return t?.externalURL||"#"}function fe(t){const S=t.toString();return S.length>8?S:("00000000"+S).slice(-9)}function x(t,S,Q,oe,ce){var ne,X,ve;const pe={};if("deliveryPossibilities"in t&&((ne=t.deliveryPossibilities)!=null&&ne.length))for(const Ae of t.deliveryPossibilities){const Ce=Ae.code||E.lF.Courier;Ae.code=Ce,pe[Ce.toLowerCase()]={price:parseInt(Ae.amount)||0}}const me=_(p({},t),{relatedItems:"productSelectors"in t&&((X=t.productSelectors)==null?void 0:X.length)>0?(0,E.SR)(t.productSelectors):[],goodsId:(0,g.Z)(t,["goods","goodsId"],""),categoryId:(0,g.Z)(t,["goods","categoryId"],""),brand:(0,g.Z)(t,["goods","brand"],""),offerId:(0,g.Z)(t,["favoriteOffer","id"],""),comboId:(0,E.un)({goodsId:(0,g.Z)(t,["goods","goodsId"],""),merchantId:(0,g.Z)(t,["favoriteOffer","merchantId"],""),warehouseId:(0,g.Z)(t,["favoriteOffer","warehouseId"],"")}),name:(0,g.Z)(t,["goods","title"],""),imageUrl:(0,g.Z)(t,["goods","titleImage"],""),slug:(0,g.Z)(t,["goods","slug"],""),finalPrice:(0,g.Z)(t,["finalPrice"],0),bonus:{percent:(0,g.Z)(t,["bonusPercent"],0),amount:(0,g.Z)(t,["bonusAmount"],0)},reviews:{rating:parseFloat((0,g.Z)(t,["rating"],0)),count:(0,g.Z)(t,["reviewCount"],0)},delivery:pe,badges:(0,g.Z)(t,["badges"],[]),oldPrice:(0,g.Z)(t,["favoriteOffer","oldPrice"],0),oldPriceChangePercentage:(0,g.Z)(t,["favoriteOffer","oldPriceChangePercentage"],0),crossedPrice:(0,g.Z)(t,["crossedPrice"],0),crossedPricePeriod:(0,g.Z)(t,["crossedPricePeriod"],""),contentFlags:(0,g.Z)(t,["goods","contentFlags"],[]),contentFlagsStr:(0,g.Z)(t,["goods","contentFlagsStr"],[]),favoriteOffer:{merchant:(0,g.Z)(t,["favoriteOffer","merchant"],{}),price:(0,g.Z)(t,["favoriteOffer","price"],0),delivery:(0,g.Z)(t,["favoriteOffer","delivery"],{}),deliveryPossibilities:(0,g.Z)(t,["favoriteOffer","deliveryPossibilities"],[]),loyalty:(0,g.Z)(t,["favoriteOffer","loyalty"],null),badges:(0,g.Z)(t,["favoriteOffer","badges"],[]),comboId:(0,g.Z)(t,["favoriteOffer","comboId"],""),lastPrice:(0,g.Z)(t,["favoriteOffer","lastPrice"],null),bonusAmountFinalPrice:(0,g.Z)(t,["favoriteOffer","bonusAmountFinalPrice"],0),bonusAmount:(0,g.Z)(t,["favoriteOffer","bonusAmount"],0),bonusPercent:(0,g.Z)(t,["favoriteOffer","bonusPercent"],0),bonusInfoGroups:(0,g.Z)(t,["favoriteOffer","bonusInfoGroups"],[]),creditPaymentAmount:(0,g.Z)(t,["favoriteOffer","creditPaymentAmount"],0),installmentPaymentAmount:(0,g.Z)(t,["favoriteOffer","installmentPaymentAmount"],0),isShowMerchant:(0,g.Z)(t,["favoriteOffer","isShowMerchant"],!1),spasiboIsAvailable:(0,g.Z)(t,["favoriteOffer","spasiboIsAvailable"],!1),bpgType:(0,g.Z)(t,["favoriteOffer","bpgType"],y.y4.Unknown),salesBlockInfoOrder:(0,g.Z)(t,["favoriteOffer","salesBlockInfoOrder"],0),salesBlockIsSelected:(0,g.Z)(t,["favoriteOffer","salesBlockIsSelected"],!1),pricesPerMeasurement:(0,g.Z)(t,["favoriteOffer","pricesPerMeasurement"],[]),availablePaymentMethod:(0,g.Z)(t,["favoriteOffer","availablePaymentMethod"],{}),locationId:(0,g.Z)(t,["favoriteOffer","locationId"],""),merchantName:(0,g.Z)(t,["favoriteOffer","merchantName"],""),oldPrice:(0,g.Z)(t,["favoriteOffer","oldPrice"],0),isFavorite:(0,g.Z)(t,["favoriteOffer","isFavorite"],!0),finalPrice:(0,g.Z)(t,["favoriteOffer","finalPrice"],0),oldPriceChangePercentage:(0,g.Z)(t,["favoriteOffer","oldPriceChangePercentage"],0),warehouseId:(0,g.Z)(t,["favoriteOffer","warehouseId"],""),showMerchant:(0,g.Z)(t,["favoriteOffer","showMerchant"],!1),salesBlockInfo:(0,g.Z)(t,["favoriteOffer","salesBlockInfo"],null),merchantSummaryRating:(0,g.Z)(t,["favoriteOffer","merchantSummaryRating"],0)},adCode:S.adCode||"",adName:S.adName||"",adMark:S.adMark||"",campaignId:S.campaignCode||"",campaignName:S.campaignName||"",advertiserId:S.advertiserId,advertiserName:S.advertiserName,merchantId:S.advertiserId?String(S.advertiserId):"",placeId:Q,placeName:((ve=S.placeName)==null?void 0:ve[0])||"",type:"productList",ord:oe,showMerchantOfferOnly:ce});return me.goods.attributes||(me.goods.attributes=[]),me}function ee(t,S){const Q=[];for(const oe of Object.keys(t))Q.push(...t[oe].filter(ce=>ce!==null).map(ce=>{var ne;const X={placeId:ce,context:{}};return S?.collectionId&&(X.context.collectionId=S.collectionId),S?.locationId&&(X.context.locationId=S.locationId),S?.merchantId&&(X.context.merchantId=S.merchantId),S?.keywords&&S.keywords.length&&(X.context.keywords=S.keywords),S?.itemId&&(X.context.itemId=S.itemId),S?.cart&&(X.context.cart=S.cart),(ne=S?.selectedFilters)!=null&&ne.length&&(X.context.selectedFilters=S.selectedFilters),X}));return Q}function ae(t){var S;const Q=t.adBody||null;return{imageUrl:t.mediaUrl,imageUrlAdaptive:t.mediaUrlAdaptive,logoUrl:t.logoUrl,mediaHtml:t?.mediaHtml,backgroundColor:t.backgroundColor,linkUrl:ge(t.action),id:t.id,name:t.name,position:t.position,analytics:t.analytics||{},placeId:t.placeId,type:t.type,subtype:t.subtype,adInfo:Q,caption:t.caption,typeSettings:t.typeSettings,tiling:t.tiling,tilesStructure:t.tilesStructure,tilesStructureMobile:t.tilesStructureMobile,identificationGroupId:t.identificationGroupId,identificationSectionId:t.identificationSectionId,mediaType:t.mediaType,menuNodes:t.menuNodes||[],parentTitle:t.parentTitle,promoCode:(S=t.promoCode)==null?void 0:S.value,product:t.product,flags:t.flags,coupon:t.coupon,ord:t.ord}}function ye(t,S,Q){var oe,ce;const ne=[];for(const X of S){if(!t[X])continue;const ve=(ce=(oe=t[X])==null?void 0:oe.banners)==null?void 0:ce.map(pe=>{var me,Ae,Ce,_e;const Se=t[X].subtype||"";let Oe=ae(_(p({},pe),{id:((me=t[X].analytics)==null?void 0:me.adCode)||"",analytics:_(p({},t[X].analytics),{merchantId:Q||"",slug:((Ae=pe.action)==null?void 0:Ae.key)||"",placeId:X,type:t[X].type}),placeId:X,type:(0,R.Z)(t[X].type.toLowerCase(),!0),subtype:(0,R.Z)(Se,!0),mediaType:pe.mediaType||"IMAGE",tiling:t[X].tiling||null,tilesStructure:pe.tilesStructure,tilesStructureMobile:pe.tilesStructureMobile,identificationGroupId:t[X].identificationGroupId,identificationSectionId:t[X].identificationSectionId,menuNodes:t[X].menuNodes,parentTitle:t[X].parentTitle||"",caption:t[X].caption,ord:t[X].ord}));return t[X].subtype==="gbl_brand"&&((Ce=t[X].items)!=null&&Ce.length)&&(Oe=_(p({},Oe),{product:x(t[X].items[0],t[X].analytics||{},t[X].placeId||"",t[X].ord,t[X].showMerchantOfferOnly)})),t[X].type==="GBL_MERCHANT"&&(Oe=_(p({},Oe),{items:(_e=t[X].items)==null?void 0:_e.map(Be=>x(Be,t[X].analytics||{},t[X].placeId||"",t[X].ord,t[X].showMerchantOfferOnly))})),Oe});ve&&ne.push(...ve)}return ne}function Re(t,S){var Q,oe,ce;const ne=(Q=t?.banners)==null?void 0:Q[0],X=ne?.adBody||null;return{imageUrl:((oe=t?.banners)==null?void 0:oe[0].mediaUrl)||"",linkUrl:ge(ne?.action),id:ne?.id,name:ne?.name,position:ne?.position,analytics:_(p({},t.analytics),{merchantId:S||"",slug:((ce=ne?.action)==null?void 0:ce.key)||"",placeId:t.placeId,type:t.type||""}),placeId:t.placeId||"",type:t.type,subtype:t.subtype||"",mediaType:ne?.mediaType||"IMAGE",adInfo:X,ord:t.ord}}function Ue(t,S,Q){var oe,ce,ne,X,ve,pe,me,Ae,Ce,_e,Se;const Oe=t[S];return(oe=Oe?.items)!=null&&oe.length?{groupName:"",title:Oe.caption||"",goods:(ce=Oe.items)==null?void 0:ce.map(Be=>x(Be,Oe.analytics||{},Oe.placeId||"",Oe.ord,Oe.showMerchantOfferOnly)),placeId:Oe.placeId,placeIds:[Oe.placeId||""],tiling:Oe.tiling||null,type:l[Oe.type],subtype:Oe.subtype,adActionText:((X=(ne=Oe.banners)==null?void 0:ne[0])==null?void 0:X.adBody.adActionText)||"",adText:((pe=(ve=Oe.banners)==null?void 0:ve[0])==null?void 0:pe.adBody.adText)||"",adCode:(me=Oe.analytics)==null?void 0:me.adCode,adName:(Ae=Oe.analytics)==null?void 0:Ae.adName,advertiserId:(Ce=Oe.analytics)==null?void 0:Ce.advertiserId,placeName:(Se=(_e=Oe.analytics)==null?void 0:_e.placeName)==null?void 0:Se[0],merchantId:Q}:null}function be(t,S){const Q=t.filter(ne=>l[ne.type]==="story"),oe=t.filter(ne=>l[ne.type]==="storySlide"),ce=M.LS.getAll("goodsStories")||{};return Q.map(ne=>{var X,ve,pe,me;const Ae=oe.filter(Se=>Se.identificationStoriesId===ne.identificationStoriesId).map(Se=>Re(Se,S)),Ce=(X=ne?.banners)==null?void 0:X[0],_e=Ce?.id||"";return{id:_e,placeId:ne?.placeId||"",imageUrl:((ve=ne?.banners)==null?void 0:ve[0].mediaUrl)||"",watched:!!ce[_e],slides:Ae,analytics:_(p({},ne.analytics),{merchantId:S||"",slug:((pe=Ce?.action)==null?void 0:pe.key)||"",placeId:ne.placeId||"",type:ne.type||"",subtype:ne.subtype||""}),type:ne.type||"",subtype:ne.subtype||"",slug:((me=Ce?.action)==null?void 0:me.key)||"",ord:ne.ord}}).filter(ne=>{var X;return(X=ne.slides)==null?void 0:X.length})}function k(t,S){var Q,oe,ce,ne;const X={type:"lookbook",groupName:`look_book_${S[0].placeId}`,placeIds:[S[0].placeId||""],tiling:null,title:S[0].caption||""};X.banners=[];for(let ve=0;ve<S.length;ve++){const pe=S[ve],me=pe.subtype||"",Ae=pe.identificationGroupId||"",Ce=pe.identificationCode||"";if(me!=="lookbook_similar"){const _e=(Q=ye(t,[pe.placeId||""]))==null?void 0:Q[0];_e.items=(oe=pe.items)==null?void 0:oe.map(Be=>x(Be,pe.analytics||{},pe.placeId||"",pe.ord,pe.showMerchantOfferOnly)),_e.tilesStructure=(ce=pe.banners)==null?void 0:ce[0].tilesStructure,_e.tilesStructureMobile=(ne=pe.banners)==null?void 0:ne[0].tilesStructureMobile;const Se=S.find(Be=>Ae&&Be.identificationGroupId===Ae&&Be.identificationCode!==Ce),Oe=Se?.items;Se&&Oe?.length&&(_e.similarItems=Oe.map(Be=>x(Be,Se.analytics||{},Se.placeId||"",Se.ord,Se.showMerchantOfferOnly))),X.banners.push(_e)}}return X}function C(t){var S,Q,oe;const ce=l[t.type];if(ce!=="stretch")return ce;const ne=(oe=(Q=(S=t?.banners)==null?void 0:S[0])==null?void 0:Q.typeSettings)==null?void 0:oe.orientation;return ne==="RIGHT"?"RIGHT":ne==="LEFT"?"LEFT":"stretch"}function W(t,S){return t.title>S.title?1:t.title<S.title?-1:0}function te(t){var S;if(t.placeId==="700000021"||t.placeId==="700000022")return!0;const ce={gbl_fashion_wide:3,gbl_fashion_recommendation:5}[t.subtype||""],ne=((S=t.items)==null?void 0:S.length)||0;return!ce||ne>=ce}function V(t){const S=p({},t);return t.badges||(S.badges=[]),t.contentFlags||(S.contentFlags=[]),t.contentFlagsStr||(S.contentFlagsStr=[]),t.goods.attributes||(S.goods.attributes=[]),t.deliveryPossibilities?S.deliveryPossibilities=t.deliveryPossibilities.map(Q=>(Q.code||(Q.code=E.vY.Courier),Q)):S.deliveryPossibilities=[],S.comboId=(0,E.un)({goodsId:(0,g.Z)(t,["goods","goodsId"],""),merchantId:(0,g.Z)(t,["favoriteOffer","merchantId"],""),warehouseId:(0,g.Z)(t,["favoriteOffer","warehouseId"],"")}),S}function ue(t,S,Q){var oe,ce,ne,X,ve,pe,me,Ae,Ce,_e,Se,Oe,Be,ze,Qe,Je;let Ze=[];for(let Ee=0;Ee<S.length;Ee++){const Ne=C(S[Ee]),xe=((oe=S?.[Ee])==null?void 0:oe.subtype)||"",Ye=S[Ee].identificationGroupId||"",Fe=Ze.find(Me=>Ye&&Me.groupName===Ye),we=((ce=S[Ee])==null?void 0:ce.placeId)||"",He=((ne=S[Ee])==null?void 0:ne.analytics)||{},ke=(ve=(X=S[Ee])==null?void 0:X.items)==null?void 0:ve[0],Ve=S[Ee].ord,$e=S[Ee].showMerchantOfferOnly;if(Fe&&Ne!=="productPromoListing")if(Fe.type==="productList"&&!De(Ne,xe)){const je=(me=(pe=S[Ee])==null?void 0:pe.items)==null?void 0:me.map(We=>x(We,He,we,Ve,$e));if(je&&((Ae=Fe.goods)==null||Ae.push(...je)),Ne==="productListDailyItems"&&ke)Fe.dailyItem=x(ke,He,we,Ve,$e);else{const We=Ne==="RIGHT"?"rightBanner":"leftBanner";Fe[We]=ye(t,[we],Q)[0]}}else Ne==="action_filter"?(Fe.placeIds.unshift(we),Fe.type="action_filter"):Fe.placeIds.push(we);else{const Me={type:Ne,subtype:xe,groupName:Ye,placeIds:[we],tiling:S[Ee].tiling||null,title:S[Ee].caption||""};Ne==="productList"&&te(S[Ee])&&(Me.placeId=S[Ee].placeId,Me.goods=(Ce=S[Ee].items)==null?void 0:Ce.map(We=>x(We,He,we,Ve,$e)),Me.adCode=((Se=(_e=t[we])==null?void 0:_e.analytics)==null?void 0:Se.adCode)||"",Me.adName=((Be=(Oe=t[we])==null?void 0:Oe.analytics)==null?void 0:Be.adName)||"",Me.placeName=((Qe=(ze=t[we].analytics)==null?void 0:ze.placeName)==null?void 0:Qe[0])||""),Ne==="productPromoListing"&&ke&&(Me.promoProduct=V(ke),Me.dailyItem=x(ke,He,we,Ve,$e)),!["LEFT","RIGHT"].includes(Ne)&&(Ne!=="productList"||(Je=Me.goods)!=null&&Je.length||De(Ne,xe))&&Ze.push(Me)}}return Ze=Ze.filter(Ee=>Ee.type).map(Ee=>{var Ne,xe,Ye,Fe,we,He,ke;const Ve=["gbl_brand","gbl_brand_promo","gbl_fashion","gbl_fashion_wide","gbl_fashion_recommendation","gbl_federal"],$e=Ee.type!=="productList"||Ee.type==="productList"&&!Ee.subtype||Ee.subtype&&Ve.includes(Ee.subtype),Me=((Ne=t[Ee.placeIds[0]])==null?void 0:Ne.analytics)||{},je=(Ye=(xe=t[Ee.placeIds[0]])==null?void 0:xe.banners)==null?void 0:Ye[0];return Ee.type==="story"?Ee.stories=be(S.filter(We=>Ee.groupName===We.identificationGroupId),Q):$e&&(Ee.banners=ye(t,Ee.placeIds,Q)),Ee.campaignName=Me?.campaignName||"",Ee.adCode=Me?.adCode||"",Ee.adName=Me?.adName||"",Ee.adMark=Me?.adMark||"",Ee.advertiserName=Me?.advertiserName||"",Ee.placeName=((Fe=Me?.placeName)==null?void 0:Fe[0])||"",Ee.campaignCode=Me?.campaignCode||"",Ee.advertiserId=Me?.advertiserId,Ee.merchantId=Q||"",Ee.placeId=t[Ee.placeIds[0]].placeId||"",Ee.slug=((we=je?.action)==null?void 0:we.key)||"",Ee.adActionText=je?.adBody.adActionText||"",Ee.adText=je?.adBody.adText||"",Ee.sectionId=t[Ee.placeIds[0]].identificationSectionId||"",Ee.title=((He=Ee.placeIds.map(We=>t[We]).filter(We=>We).find(We=>We.caption))==null?void 0:He.caption)||"",Ee.filterCollections=(ke=t[Ee.placeIds[0]].filterCollections)==null?void 0:ke.sort(W),Ee.filtersList=t[Ee.placeIds[0]].filtersList,Ee.ord=t[Ee.placeIds[0]].ord,Ee.contentFlags=t[Ee.placeIds[0]].contentFlags,Ee}),Ze}function Z(t,S,Q){let oe=[];const ce=["productList"],ne=S.filter(me=>me.identificationGroupId&&ce.includes(C(me))).map(me=>me.identificationGroupId),X=[],ve=[],pe=[];if(S.forEach(me=>{if(ne.includes(me.identificationGroupId)&&!ce.includes(C(me)))return X.push(me);if(C(me)==="lookbook")return pe.push(me);ve.push(me)}),S=[...ve,...X],oe=ue(t,S,Q),pe.length){const me=k(t,pe);oe.push(me)}return oe}function U(t){var S,Q,oe;let ce=[];const ne={};let X=[];for(const ve of t){const pe=((S=ve.type)==null?void 0:S.toUpperCase())||"",me=((Q=Object.keys(l).filter(Ae=>Ae===pe))==null?void 0:Q[0])||"STRETCH";X.push(_(p({},ve),{type:me,subtype:ve.subtype||"",identificationCode:"",title:ve.caption||"",items:[],banners:[_(p({},ve),{mediaUrl:ve.imageUrl,mediaUrlAdaptive:ve.imageUrlAdaptive,logoUrl:ve.logoUrl,adBody:ve.adInfo,promoCode:ve.promoCode?{value:ve.promoCode}:void 0,mediaType:"IMAGE",action:{key:"",externalURL:ve.linkUrl,type:"",goodsId:"",collectionId:"",collectionTitle:"",merchantId:""}})],action:{}}))}for(const ve of X)ne[((oe=ve.placeId)==null?void 0:oe.toString())||""]=ve;return ce=ue(ne,X),ce}function K(t,S){const Q=[];return t.placesId?(t.placesId.forEach(oe=>{Q.push({placeId:String(oe),context:S})}),Q):[]}function se(t,S){let{startNum:Q,endNum:oe}=t;typeof Q=="string"&&(Q=parseInt(Q)),typeof oe=="string"&&(oe=parseInt(oe));const ce=oe-Q;let ne=[];for(let X=0;X<=ce;X++){const ve=fe(Q+X);if(t.ignoringPlaces&&t.ignoringPlaces.includes(ve))continue;const pe={placeId:ve,context:S};t.allPossible&&(pe.allPossible=!0),t.limit&&(pe.limit=t.limit),t.sorting&&(pe.sorting=t.sorting),ne.push(pe)}return ne}function b(t){let S=[];const Q={};return t.slug&&(Q.key=t.slug),t.merchantId&&(Q.merchantId=t.merchantId),t.collectionId&&(Q.collectionId=t.collectionId),t.locationId&&(Q.locationId=t.locationId),t.itemId&&(Q.itemId=t.itemId),t.keywords&&(Q.keywords=t.keywords),t.brand&&(Q.brand=t.brand),t.collectionIds&&(Q.collectionIds=t.collectionIds),t.isNew&&(Q.isNew=!0),t.isEndingSoon&&(Q.isEndingSoon=!0),t.isBpg&&(Q.isBpg=!0),t.isItemIncreasedCashback&&(Q.isItemIncreasedCashback=!0),t.isSuperPrice&&(Q.isSuperPrice=!0),t.isNewItems&&(Q.isNewItems=!0),t.key&&(Q.key=t.key),"placesId"in t?S=K(t,Q):S=se(t,Q),S}function z(t,S,Q){var oe,ce,ne,X,ve,pe,me,Ae;const Ce=t[S];if(!Ce)return null;const _e=(oe=Ce.banners)==null?void 0:oe[0],Se={analytics:Ce.analytics||{},title:((ce=_e?.adBody)==null?void 0:ce.adTitle)||"",text:((ne=_e?.adBody)==null?void 0:ne.adText)||"",buttonText:((X=_e?.adBody)==null?void 0:X.adActionText)||"",termsTitle:((ve=_e?.adBody)==null?void 0:ve.termsTitle)||"",termsText:((pe=_e?.adBody)==null?void 0:pe.termsTitle)||"",id:((me=Ce.analytics)==null?void 0:me.adCode)||"",placeId:S,isViewed:!1,imageUrl:_e?.mediaUrl||null,imageUrlAdaptive:_e?.mediaUrlAdaptive||null,linkUrl:((Ae=_e?.action)==null?void 0:Ae.externalURL)||null,type:_e?.position||null,backgroundColor:_e?.backgroundColor||null},Oe=(0,L.d)(Q||"",{}),Be=Le(Se);return Oe[Be]&&(Se.isViewed=!0),Se}function $(t,S){var Q;const oe=(Q=t?.typeSettings)==null?void 0:Q.cornerRadius;return!oe||oe===0?`${S}px`:`${oe}px`}function le(t){var S,Q,oe;return!((S=t?.adInfo)!=null&&S.adTitle)&&!((Q=t?.adInfo)!=null&&Q.adText)&&!((oe=t?.adInfo)!=null&&oe.adActionText)}function q(t){var S,Q;return(S=t?.banners)!=null&&S.length&&((Q=t?.banners[0].typeSettings)==null?void 0:Q.isFullWidth)||!1}function Ie(t){return t.map(S=>{var Q,oe;let ce={imageUrl:S.imageUrl,imageUrlAdaptive:S.imageUrlAdaptive,logoUrl:S.logoUrl,mediaHtml:S?.mediaHtml,backgroundColor:S.backgroundColor,linkUrl:S.linkUrl,id:S.id,analytics:{adCode:S.analytics.adCode,adName:S.analytics.adName,adMark:S.analytics.adMark,campaignCode:S.analytics.campaignCode,campaignName:S.analytics.campaignName,advertiserId:S.analytics.advertiserId,advertiserName:S.analytics.advertiserName,merchantId:S.analytics.merchantId,slug:S.analytics.slug,type:S.analytics.type,placeId:S.placeId,placeName:S.analytics.placeName},placeId:S.placeId,adInfo:{adText:S.adInfo.adText,adTitle:S.adInfo.adTitle,adActionText:S.adInfo.adActionText,termsText:S.adInfo.termsText,termsTitle:S.adInfo.termsTitle,textFontSize:S.adInfo.textFontSize,titleFontSize:S.adInfo.titleFontSize,textFontWeight:S.adInfo.textFontWeight,titleFontWeight:S.adInfo.titleFontWeight,align:S.adInfo.align,isAdvancedText:S.adInfo.isAdvancedText,discountPercent:S.adInfo.discountPercent},typeSettings:S.typeSettings?{aspectRatio:S.typeSettings.aspectRatio,cornerRadius:S.typeSettings.cornerRadius,timerInterval:S.typeSettings.timerInterval,isSliderDots:S.typeSettings.isSliderDots,isFullWidth:S.typeSettings.isFullWidth,orientation:S.typeSettings.orientation,isFlip:S.typeSettings.isFlip,height:S.typeSettings.height}:null,tiling:{scroll:!!((Q=S.tiling)!=null&&Q.scroll),horizontalFloat:((oe=S.tiling)==null?void 0:oe.horizontalFloat)||0},mediaType:S.mediaType,menuNodes:S.menuNodes,promoCode:S.promoCode,type:S.type,ord:S.ord,similarItems:S.similarItems,items:S.items};return S.product&&(ce=_(p({},ce),{product:S.product})),S.coupon&&(ce=_(p({},ce),{coupon:S.coupon})),S.flags&&(ce=_(p({},ce),{flags:S.flags})),S.tilesStructure&&(ce=_(p({},ce),{tilesStructure:S.tilesStructure,tilesStructureMobile:S.tilesStructureMobile})),ce})}function ie(t){return t.map(({type:S,subtype:Q,placeIds:oe,advertiserId:ce,tiling:ne,title:X,banners:ve,campaignName:pe,placeId:me,placeName:Ae,adActionText:Ce,adText:_e,adName:Se,adCode:Oe,filterCollections:Be,filtersList:ze,goods:Qe,promoProduct:Je,dailyItem:Ze,leftBanner:Ee,rightBanner:Ne,stories:xe,sectionId:Ye,ord:Fe,contentFlags:we})=>({type:S,subtype:Q,placeIds:oe,advertiserId:ce,tiling:{scroll:!!ne?.scroll,horizontalFloat:ne?.horizontalFloat||0},title:X,goods:Qe,dailyItem:Ze,leftBanner:Ee,rightBanner:Ne,stories:xe,banners:ve?Ie(ve):[],campaignName:pe,placeId:me,placeName:Ae,promoProduct:Je,adActionText:Ce,adText:_e,adName:Se,adCode:Oe,filterCollections:Be,filtersList:ze,sectionId:Ye,ord:Fe,contentFlags:we}))}function he(t){var S,Q,oe,ce,ne,X,ve,pe,me,Ae,Ce,_e,Se,Oe;if(!t.placeId||!t.identificationCode||!Object.keys(l).includes(t.type)||e.includes(t.type)&&!((S=t.banners)!=null&&S.length)||(t.type==="STORIES_PREVIEW"||t.type==="STORIES_FULLSCREEN")&&(!((Q=t.banners)!=null&&Q[0].mediaUrl)||!t.identificationStoriesId)||(t.type==="GBL"||t.type==="GBL_MERCHANT")&&(!t.items||t.items.every(Be=>!Be.goods.goodsId||!Be.goods.slug||!Be.goods.title||!Be.goods.titleImage)||t.subtype&&t.subtype==="gbl_federal"&&(!t.banners||!t.banners.length||!((oe=t.banners[0].mediaUrl)!=null&&oe.split("mnt/")[1])||!t.banners[0].backgroundColor||t.banners[0].backgroundColor==="transparent")))return!1;if(t.type==="NAVIGATION_TAGS"){const Be=(ne=(ce=t.banners)==null?void 0:ce[0].mediaUrl)==null?void 0:ne.split("mnt/")[1];if(!((X=t?.banners)!=null&&X[0].action.externalURL)||!Be)return!1}return!(t.type==="TEXT"&&!((ve=t.banners)!=null&&ve[0].adBody.adText)&&!((pe=t.banners)!=null&&pe[0].adBody.adTitle)||(t.type==="VIDEO"||t.type==="YOUTUBE")&&!((me=t.banners)!=null&&me[0].mediaUrl)||t.type==="ACTION_FILTER"&&!((Ae=t.filtersList)!=null&&Ae.length)&&!((Ce=t.filterCollections)!=null&&Ce.length)||t.type==="CAP"&&t.subtype==="cap_bz"&&!((_e=t?.banners)!=null&&_e[0].adBody.adTitle)||t.type==="GBL_MERCHANT"&&!((Oe=(Se=t?.banners)==null?void 0:Se[0].action)!=null&&Oe.externalURL))}class Te{constructor(S=(0,w.inject)(G.ZP)){this.mgate=S,this.delayedPushes=[],this.delayedPushTimeoutId=0}getConstructorPagePromo(S,Q){return P(this,arguments,function*(oe,ce,ne={},X=""){var ve;const pe={};let me=(yield this.mgate.fetch("/api/mobile/v1/promoContentService/promoContent/get",{criterias:b(oe),context:{addressId:ce||null,sbolId:X}},{},ne)).content;if(!me?.length)return[];me[0].subtype==="actionpagecoupon"&&(me=me.map(_e=>{const Se=JSON.parse(JSON.stringify(_e));return Se.placeId=`${Se.placeId} ${Se.identificationCode}`,Se}));const Ae=me?.filter(_e=>he(_e));if(!Ae)return[];for(const _e of Ae)pe[((ve=_e.placeId)==null?void 0:ve.toString())||""]=_e;const Ce=Z(pe,Ae,oe.merchantId);return ie(Ce)})}getPagePromo(S,Q,oe,ce){return P(this,null,function*(){var ne;const X=j[S],ve={},pe={addressId:Q||null};ce&&(pe.searchPhrase=ce),oe?.collectionId&&(pe.collectionIds=[oe.collectionId]);const me=(yield this.mgate.fetch("/api/mobile/v1/promoContentService/promoContent/get",{criterias:ee(X,oe),context:pe})).content,Ae=me?.filter(_e=>he(_e));if(!Ae)return{};for(const _e of Ae)ve[((ne=_e.placeId)==null?void 0:ne.toString())||""]=_e;let Ce={};return Object.keys(X).forEach(_e=>{var Se;if((_e==="productList"||_e==="bottomProductList"||_e==="recommendationList"||_e==="sponsoredProductList")&&((Se=X[_e])!=null&&Se[0])){let Be=Ue(ve,X[_e][0],oe?.merchantId);Ce[_e]=Be&&ie([Be])[0];return}Ce[_e]=Ie(ye(ve,X[_e],oe?.merchantId))}),Ce})}getPagePromoConstructor(S,Q,oe,ce){return P(this,null,function*(){const ne=j[S],X={addressId:Q||null};ce&&(X.searchPhrase=ce),oe?.collectionId&&(X.collectionIds=[oe.collectionId]);const ve=(yield this.mgate.fetch("/api/mobile/v1/promoContentService/promoContent/get",{criterias:ee(ne,oe),context:X})).content,pe=ve?.filter(Ae=>he(Ae));if(!pe)return{};const me={};return Object.keys(ne).forEach(Ae=>{var Ce;const _e=pe.filter(Oe=>ne[Ae].includes(Oe.placeId||"")),Se={};for(const Oe of _e)Se[((Ce=Oe.placeId)==null?void 0:Ce.toString())||""]=Oe;me[Ae]=ie(Z(Se,_e,oe?.merchantId))}),me})}getDailyProductData(S){return P(this,null,function*(){var Q,oe,ce;const X=(ce=(oe=(Q=(yield this.mgate.fetch("/api/mobile/v1/promoContentService/promoContent/get",{criterias:b({startNum:re,endNum:Pe}),context:{addressId:S||null,isDailyGoods:!0}})).content.find(ve=>C(ve)==="productListDailyItems"))==null?void 0:Q.items)==null?void 0:oe[0])==null?void 0:ce.goods;return X?{goodsId:X.goodsId||"",slug:X.slug||""}:null})}getMassCommunication(S,Q){return P(this,null,function*(){var oe;const ce={},ne=(yield this.mgate.fetch("/api/mobile/v1/promoContentService/promoContent/get",{criterias:ee(J),context:{addressId:S||null}})).content;if(!ne?.length)return null;for(const X of ne)ce[((oe=X.placeId)==null?void 0:oe.toString())||""]=X;return{preview:z(ce,J.previewTape[0],Q),modalInfo:z(ce,J.modalInfo[0],Q)}})}getSimilarLookbooks(S,Q){return P(this,null,function*(){return(yield this.mgate.fetch("/api/mobile/v1/promoContentService/promoContent/get",{criterias:b(S),context:{addressId:Q||null}})).content})}}function Le(t){return t?String((0,T.Z)(`${t.id}${t.imageUrl||""}`)):""}function Ge(t){return t?a.includes(t):!1}function Ke(t){return t?.subtype==="gblSideBannerDoubleWidth"}function Xe(t){if(!t?.imageUrlAdaptive)return"";const S=t.imageUrlAdaptive.split("/");return S[S.length-1].includes(".")?t.imageUrlAdaptive:t.imageUrl}function qe(t){const{name:S,id:Q}=t;return`${S||""}${Q}`}function et(t){const S=t?.placeId;return S?j.defaultListing.amongItemsStatic.includes(S.toString()):!1}function tt(t,S,Q=!1){const oe=t.imageUrl;if(Q&&(!oe||!oe.split("mnt/")[1]))return"";const ce=t.imageUrlAdaptive;return!ce||!ce.split("mnt/")[1]?oe:S?ce:oe}function rt(t,S){return S==="top"?t.filter(Q=>Q.data.placeId===E.nJ.Single):t.filter(Q=>[E.nJ.Text1,E.nJ.Text2].includes(Q.data.placeId))}function nt(t,S){if(S[t])return{gridColumn:`span ${S[t]}`}}},58897:function(de,Y,n){n.d(Y,{dU:function(){return O},cx:function(){return s},oD:function(){return D},Pn:function(){return p},zd:function(){return _},w8:function(){return l},R6:function(){return r}});var w=n(45037),G=n(79718),L=n(6444),M=Object.defineProperty,g=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(e,d,h)=>d in e?M(e,d,{enumerable:!0,configurable:!0,writable:!0,value:h}):e[d]=h,y=(e,d)=>{for(var h in d||(d={}))R.call(d,h)&&E(e,h,d[h]);if(g)for(var h of g(d))T.call(d,h)&&E(e,h,d[h]);return e};function f(e){return e.hasOwnProperty("delivery")}function o(e){return e.hasOwnProperty("address")}function i(e){return f(e)&&o(e.delivery)}function m(e){return i(e)&&e.deliveryType===G.lF.Courier}var O=(e=>(e.ApplePay="apple pay",e.Offline="offline",e.Online="online",e.Spasibo="spasibo",e.SberPay="sberpay",e.Credit="credit",e.Installment="installment",e.BuyNowPayLater="bnpl",e))(O||{});const s=["online","spasibo"];function D(e){switch(e){case"online":return L.uG.Card;case"apple pay":return L.uG.ApplePay;case"spasibo":return L.uG.Spasibo;case"sberpay":return L.uG.SberPay;case"offline":return L.uG.Offline;case"credit":return L.uG.Credit;case"installment":return L.uG.Installment;case"bnpl":return L.uG.BuyNowPayLater;default:return console.error(`unknown payment type: ${e}`),null}}var p=(e=>(e.PickupPointUndefined="address.id",e.AddressUndefined="address.full",e.DeliveryDateTimeUndefined="deliveries",e.SavedCardUndefined="savedPaymentCardId",e.CardCryptogramUndefined="cardCryptogram",e))(p||{});function _(e,d){const h={"b9d55166-4c73-4ccc-b7c9-174de48ca57d":"pochtaPilot"},v=d.getItem("wl");if(!(!e||!v))return h[v]}function P(e){return{type:window&&window.innerWidth<1200?"mobile":"desktop",atmMarketing:e.getItem("atm_marketing")||"",atmRemarketing:e.getItem("atm_remarketing")||"",atmCloser:e.getItem("atm_closer")||""}}function l(e){return e.hasOwnProperty("addressId")}function r(e,d){const h={identification:{id:e.cartId},customer:y({},e.customer),paymentType:e.paymentType||L.uG.Offline,additionalData:{adspire:P(d),digitalDataUserAnonymousId:d.getItem("ssaid"),yandexCid:d.getItem("_ym_uid")},isSelectedCartItemGroupsOnly:e.isSelectedCartItemGroupsOnly,discounts:e.discounts,publicId:e.publicId,acquiringId:e.acquiringId,acquiringOrderId:e.acquiringOrderId,loyaltyAmountToUse:e.loyaltyAmountToUse,paymentTypeOptions:e.paymentTypeOptions,googleAnalyticsClientId:""},v=[];if(i(e)&&(h.address={addressId:e.delivery.address.addressId,full:e.delivery.address.full,entrance:e.delivery.address.entrance,intercom:e.delivery.address.intercom,floor:e.delivery.address.floor,flat:e.delivery.address.flat,addToMyAddresses:e.delivery.address.save},h.customer.comment=e.delivery.comment,h.address.full||v.push({title:"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u0430\u0434\u0440\u0435\u0441 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438",detail:"\u0412\u044B \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043B\u0438 \u0430\u0434\u0440\u0435\u0441 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438",field:"address.full",code:"address.full"})),m(e)){h.deliveryType=G.lF.Courier;const a=e.delivery.parcelType==="allInOne"?0:1;h.deliveries=e.delivery.parcels.map(u=>({id:u.id,shipmentType:a,date:u.deliveryDate,timeSlot:u.timeSlot})),h.deliveries.length||v.push({title:"\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u0430 \u0434\u0430\u0442\u0430 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438",detail:"\u0412\u044B \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043B\u0438 \u0434\u0430\u0442\u0443 \u0438 \u0432\u0440\u0435\u043C\u044F \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438",field:"deliveries",code:"deliveries"})}return e.payment&&(h.paymentType===L.uG.Spasibo&&!e.loyaltyAmountToUse&&(h.paymentType=L.uG.Card),(0,L.pR)(e.payment)?(h.savedPaymentCardId=e.payment.savedCard.paymentCardId.toString(),h.acquiringId=e.payment.savedCard.acquiringId,h.acquiringOrderId="",h.publicId="",h.savedPaymentCardId||v.push({title:"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u044B \u0434\u0430\u043D\u043D\u044B\u0435 \u043A\u0430\u0440\u0442\u044B \u0434\u043B\u044F \u043E\u043F\u043B\u0430\u0442\u044B",detail:"\u0412\u044B \u043D\u0435 \u0432\u0432\u0435\u043B\u0438 \u0434\u0430\u043D\u043D\u044B\u0435 \u043A\u0430\u0440\u0442\u044B \u0434\u043B\u044F \u043E\u043D\u043B\u0430\u0439\u043D \u043E\u043F\u043B\u0430\u0442\u044B",field:"savedPaymentCardId",code:"savedPaymentCardId"})):(h.cardCryptogram=e.payment.cardCryptogram,h.savePaymentCard=e.payment.save,!h.cardCryptogram&&h.paymentType===L.uG.Spasibo&&v.push({title:"\u041D\u0435\u0432\u0435\u0440\u043D\u043E \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u044B \u0434\u0430\u043D\u043D\u044B\u0435 \u043A\u0430\u0440\u0442\u044B \u0434\u043B\u044F \u043E\u043F\u043B\u0430\u0442\u044B",detail:"\u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u043A\u0430\u0440\u0442\u044B \u0434\u043B\u044F \u043E\u043D\u043B\u0430\u0439\u043D \u043E\u043F\u043B\u0430\u0442\u044B",field:"cardCryptogram",code:"cardCryptogram"}))),h.googleAnalyticsClientId=(0,w.ku)(d),h.additionalData||(h.additionalData={}),h.additionalData.source=_(e.whiteLabelFeature,d),{params:h,validationErrors:v}}},47207:function(de,Y,n){n.d(Y,{rT:function(){return G},Qg:function(){return L},S9:function(){return M},pR:function(){return g},z3:function(){return R},mI:function(){return T},XO:function(){return y}});var w=n(45105);class G extends Error{constructor(o){super("Unsuccessful accept order"),this.errors=o,Object.setPrototypeOf(this,G.prototype)}}class L extends Error{constructor(o,i){super("SMS code authentication required to proceed"),this.context=o,this.errorText=i,Object.setPrototypeOf(this,L.prototype)}}class M extends Error{constructor(o){super("The price of the order was changed during the checkout process"),this.error=o,Object.setPrototypeOf(this,M.prototype)}}class g extends Error{constructor(o){super("Some goods are out of stock"),this.error=o,Object.setPrototypeOf(this,g.prototype)}}class R extends Error{constructor(o){super("Accept order data validation failed"),this.errors=o,Object.setPrototypeOf(this,R.prototype)}}class T extends Error{constructor(o){super("Accept acquiring failed"),this.error=o,Object.setPrototypeOf(this,T.prototype)}}const E={writeOffBonus:w.zO.WriteOffBonus,promoCode:w.zO.ApplyPromocode,paymentCardId:w.zO.SavedCardPayment};function y(f){if(f&&f[0]){const o=f[0];switch(o.code.toString()){case"101":throw new g(o);case"107":throw new L(E[o.field],o.detail||"");case"110":throw new M(o);case"300":throw new T(o);default:throw new G(f)}}throw new G(f)}},81779:function(de,Y,n){n.d(Y,{j9:function(){return p},CP:function(){return _},vN:function(){return l},gX:function(){return r},ZP:function(){return e}});var w=n(53869),G=n(8952),L=n(6444),M=n(47207),g=Object.defineProperty,R=Object.defineProperties,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,o=(d,h,v)=>h in d?g(d,h,{enumerable:!0,configurable:!0,writable:!0,value:v}):d[h]=v,i=(d,h)=>{for(var v in h||(h={}))y.call(h,v)&&o(d,v,h[v]);if(E)for(var v of E(h))f.call(h,v)&&o(d,v,h[v]);return d},m=(d,h)=>R(d,T(h)),O=(d,h,v)=>new Promise((a,u)=>{var c=H=>{try{N(v.next(H))}catch(F){u(F)}},I=H=>{try{N(v.throw(H))}catch(F){u(F)}},N=H=>H.done?a(H.value):Promise.resolve(H.value).then(c,I);N((v=v.apply(d,h)).next())}),s=(d=>(d.CheckoutAgreement="CHECKOUT_AGREEMENT",d.GoaAgreement="GOA_AGREEMENT",d))(s||{});class D extends Error{constructor(h){super("Unsuccessful order create"),this.errors=h,Object.setPrototypeOf(this,D.prototype)}}class p extends Error{constructor(h,v){super("Unsuccessful payment register"),this.errors=h,this.orderId=v,Object.setPrototypeOf(this,p.prototype)}}class _ extends Error{constructor(h,v){super("Unsuccessful order pay"),this.errors=h,this.orderId=v,Object.setPrototypeOf(this,_.prototype)}}class P extends Error{constructor(h){super("Unsuccessful order status get"),this.errors=h,Object.setPrototypeOf(this,P.prototype)}}class l extends Error{constructor(h){super("Unsuccessful cryptogram get"),this.errors=h,Object.setPrototypeOf(this,l.prototype)}}function r(d){const h={identification:d.identification,deliveryType:d.deliveryType,paymentType:d.paymentType,customer:d.customer,address:d.address,deliveries:d.deliveries,flags:d.goaAgreement?["GOA_AGREEMENT"]:[],isSelectedCartItemGroupsOnly:d.isSelectedCartItemGroupsOnly,discounts:d.discounts,paymentTypeOptions:d.paymentTypeOptions,additionalData:m(i({},d.additionalData),{googleAnalyticsClientId:d.googleAnalyticsClientId})},v={paymentType:d.paymentType},a={paymentType:d.paymentType,savedPaymentCardId:d.savedPaymentCardId,cardCryptogram:d.cardCryptogram,isSavePaymentCard:d.savePaymentCard};return{orderCreateParams:h,paymentRegisterParams:v,orderPayParams:a}}class e{constructor(h=(0,w.inject)(G.ZP)){this.mgate=h}orderCreate(h){return O(this,null,function*(){const v=yield this.mgate.fetch("/api/mobile/v1/checkoutService/order/create",h);return v.success||(0,M.XO)(v.errors),v})}paymentRegister(h){return O(this,null,function*(){const v=yield this.mgate.fetch("/api/mobile/v1/checkoutService/payment/register",h);if(!v.success)throw new p(v.errors,h.orderId);return v})}orderPay(h){return O(this,null,function*(){const v=yield this.mgate.fetch("/api/mobile/v1/checkoutService/order/pay",h);if(!v.success)throw new _(v.errors,h.orderId);return v})}processSberPayPayment(h,v){return O(this,null,function*(){const a={orderId:h,paymentType:L.uG.SberPay,additionalData:{sberPayPhone:v}};return yield this.orderPay(a)})}orderStatus(h){return O(this,null,function*(){const v=yield this.mgate.fetch("/api/mobile/v1/checkoutService/order/status",h);if(!v.success)throw new P(v.errors);return v})}}},20796:function(de,Y,n){n.d(Y,{ZP:function(){return y}});var w=n(53869),G=n(8952),L=(f,o,i)=>new Promise((m,O)=>{var s=_=>{try{p(i.next(_))}catch(P){O(P)}},D=_=>{try{p(i.throw(_))}catch(P){O(P)}},p=_=>_.done?m(_.value):Promise.resolve(_.value).then(s,D);p((i=i.apply(f,o)).next())}),M=(f=>(f.Unknown="UNKNOWN",f.Created="CREATED",f.Hold="HOLD",f.Failed="FAILED",f))(M||{});class g extends Error{constructor(o){super("Unsuccessful loyalty get"),this.errors=o,Object.setPrototypeOf(this,g.prototype)}}class R extends Error{constructor(o){super("Unsuccessful payment status receiving"),this.errors=o,Object.setPrototypeOf(this,R.prototype)}}class T extends Error{constructor(o){super("Unsuccessful payment declining"),this.errors=o,Object.setPrototypeOf(this,T.prototype)}}class E extends Error{constructor(o){super("Unsuccessful sync payment cards sberWallet"),this.errors=o,Object.setPrototypeOf(this,E.prototype)}}class y{constructor(o=(0,w.inject)(G.ZP)){this.mgate=o}getLoyaltyInfo(o){return L(this,null,function*(){const i=yield this.mgate.fetch("/api/mobile/v1/acquiringService/loyalty/get",o);if(!i.success)throw new g(i.errors);return i})}getPaymentStatus(o){return L(this,null,function*(){const i=yield this.mgate.fetch("/api/mobile/v1/acquiringService/payment/get",o);if(!i.success)throw new R(i.errors);return i})}declinePayment(o){return L(this,null,function*(){const i=yield this.mgate.fetch("/api/mobile/v1/acquiringService/payment/decline",o);if(!i.success)throw new T(i.errors);return i.success})}syncSavedPaymentCards(){return L(this,null,function*(){const o=yield this.mgate.fetch("api/mobile/v1/acquiringService/paymentCard/sync");if(!o.success)throw new E(o.errors);return o.success})}}},65921:function(de,Y,n){n.d(Y,{I:function(){return g},Z:function(){return R}});var w=n(53869),G=n(8952),L=n(20025),M=(T,E,y)=>new Promise((f,o)=>{var i=s=>{try{O(y.next(s))}catch(D){o(D)}},m=s=>{try{O(y.throw(s))}catch(D){o(D)}},O=s=>s.done?f(s.value):Promise.resolve(s.value).then(i,m);O((y=y.apply(T,E)).next())});const g="/api/mobile/v1/analyticsDataService/event/push";class R{constructor(E=(0,w.inject)(G.ZP),y=(0,w.inject)(L.Z)){this.mgate=E,this.logger=y}pushAnalyticsEvent(E,y){return M(this,null,function*(){try{yield this.mgate.fetch(g,{events:[{eventId:E,eventPropertiesJson:JSON.stringify(y)}]})}catch(f){this.logger.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u0435\u0440\u0435\u0434\u0430\u0447\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u044F \u0430\u043D\u0430\u043B\u0438\u0442\u0438\u043A\u0438",details:f})}})}pushAnalyticsEventsSet(E){return M(this,null,function*(){try{yield this.mgate.fetch(g,{events:E.map(y=>({eventId:y.event,eventPropertiesJson:JSON.stringify(y)}))})}catch(y){this.logger.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u0435\u0440\u0435\u0434\u0430\u0447\u0435 \u0441\u0432\u044F\u0437\u043A\u0438 \u0441\u043E\u0431\u044B\u0442\u0438\u0439 \u0430\u043D\u0430\u043B\u0438\u0442\u0438\u043A\u0438",details:y})}})}}},81816:function(de,Y,n){n.d(Y,{wy:function(){return M},iV:function(){return g},ZP:function(){return T}});var w=n(53869),G=n(8952),L=(E,y,f)=>new Promise((o,i)=>{var m=D=>{try{s(f.next(D))}catch(p){i(p)}},O=D=>{try{s(f.throw(D))}catch(p){i(p)}},s=D=>D.done?o(D.value):Promise.resolve(D.value).then(m,O);s((f=f.apply(E,y)).next())}),M=(E=>(E.Recipe="ARTICLE_PAGE_TYPE_RECIPES",E.ProductSelection="ARTICLE_PAGE_TYPE_PRODUCT_SELECTION",E.HowToChoose="ARTICLE_PAGE_TYPE_HOW_TO_CHOOSE",E.Overview="ARTICLE_PAGE_TYPE_PRODUCT_OVERVIEW",E.Unknown="ARTICLE_PAGE_TYPE_UNKNOWN",E))(M||{}),g=(E=>(E.BlockOfContents="ARTICLE_TEMPLATE_TYPE_BLOCK_OF_CONTENTS",E.GoodsCarousel="ARTICLE_TEMPLATE_TYPE_GOODS_CAROUSEL",E.BigPicture="ARTICLE_TEMPLATE_TYPE_BIG_PICTURE",E.RightPicture="ARTICLE_TEMPLATE_TYPE_RIGHT_PICTURE",E.LeftPicture="ARTICLE_TEMPLATE_TYPE_LEFT_PICTURE",E.LinkToCategory="ARTICLE_TEMPLATE_TYPE_WITH_LINK_TO_CATEGORY",E.FourPictures="ARTICLE_TEMPLATE_TYPE_FOUR_PICTURES",E.ThreePictures="ARTICLE_TEMPLATE_TYPE_THREE_PICTURES",E.Youtube="ARTICLE_TEMPLATE_TYPE_WITH_YOUTUBE",E.ProsAndCons="ARTICLE_TEMPLATE_TYPE_BLOCK_PROS_AND_CONS",E.Subtitle="ARTICLE_TEMPLATE_TYPE_BLOCK_WITH_SUBTITLE",E.IconInCatalog="ARTICLE_TEMPLATE_TYPE_WITH_ICON_IN_CATALOG",E.Recipe="ARTICLE_TEMPLATE_TYPE_RECIPE",E.RelatedRecipes="ARTICLE_TEMPLATE_TYPE_RELATED_RECIPES",E.OneColumnText="ARTICLE_TEMPLATE_TYPE_ONE_COLUMN",E.Unknown="ARTICLE_TEMPLATE_TYPE_UNKNOWN",E.MainIdea="ARTICLE_TEMPLATE_TYPE_QUOTE",E))(g||{});class R extends Error{constructor(y){super("Unsuccessful article fetch"),this.errors=y,Object.setPrototypeOf(this,R.prototype)}}class T{constructor(y=(0,w.inject)(G.ZP)){this.mgate=y}getArticle(y){return L(this,null,function*(){const f=yield this.mgate.fetch("/api/mobile/v1/articleService/article/getBySlug",{slug:y});if(!f.success)throw new R(f.errors);for(let o=0;o<f.article.blocks.length;o++){const i=f.article.blocks[o];i.anchor=`anchor_${o}`}return f.article})}}},25489:function(de,Y,n){n.d(Y,{HE:function(){return o},NO:function(){return i},nG:function(){return m},v_:function(){return O},ZP:function(){return D}});var w=n(53869),G=n(8952),L=n(45037),M=Object.defineProperty,g=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,E=(p,_,P)=>_ in p?M(p,_,{enumerable:!0,configurable:!0,writable:!0,value:P}):p[_]=P,y=(p,_)=>{for(var P in _||(_={}))R.call(_,P)&&E(p,P,_[P]);if(g)for(var P of g(_))T.call(_,P)&&E(p,P,_[P]);return p},f=(p,_,P)=>new Promise((l,r)=>{var e=v=>{try{h(P.next(v))}catch(a){r(a)}},d=v=>{try{h(P.throw(v))}catch(a){r(a)}},h=v=>v.done?l(v.value):Promise.resolve(v.value).then(e,d);h((P=P.apply(p,_)).next())}),o=(p=>(p.SberId="SBER_ID",p.SberWallet="SBER_WALLET",p.SberLoyalty="SBER_LOYALTY",p.UnitedLoyalty="UNITED_LOYALTY",p.RegToUl="REG_TO_UL",p.UlRegistration="UL_REGISTRATION",p.EplPromo="EPL_PROMO",p))(o||{}),i=(p=>(p.Yes="FLAG_MARKETING_MAIL_YES",p.No="FLAG_MARKETING_MAIL_NO",p))(i||{});class m extends Error{constructor(_){super("Unsuccessful authentication"),this.errors=_,Object.setPrototypeOf(this,m.prototype)}}class O extends Error{constructor(_){super("Unsuccessful close other sessions"),this.errors=_,Object.setPrototypeOf(this,O.prototype)}}class s extends Error{constructor(_){super("Unsuccessful profile set"),this.errors=_,Object.setPrototypeOf(this,s.prototype)}}class D{constructor(_=(0,w.inject)(G.ZP),P=(0,w.inject)(L.TU)){this.mgate=_,this.dataLayerAnalytics=P}authenticate(_){return f(this,null,function*(){const P=yield this.mgate.fetch("/api/mobile/v1/securityService/session/start",y({requestVersion:3},_));if(P.success||!P.success&&P.isMarkAsDeleted)return P.isNew&&((0,L.AB)("Registered","Auth",{action:"default"}),this.dataLayerAnalytics.pushAuthEvent("auth_registration_success","default",P.customerId)),P;if(!P.success)throw new m(P.errors)})}logout(){return f(this,null,function*(){yield this.mgate.resetMgateSession()})}closeOtherSessions(){return f(this,null,function*(){const _=yield this.mgate.fetch("/api/mobile/v1/securityService/session/closeOther");if(!_.success)throw new O(_.errors);return _})}getProfile(_){return f(this,null,function*(){var P;const l=yield this.mgate.fetch("/api/mobile/v1/securityService/profile/get",_);return(P=l.profile)!=null&&P.isAuthenticated?(l.profile.gender==="GENDER_NOT_SELECTED"&&(l.profile.gender=""),l):null})}setProfile(_){return f(this,null,function*(){var P,l;const r=yield this.mgate.fetch("/api/mobile/v1/securityService/profile/set",y({},_));if(!r.success)throw new s((P=r.errors)!=null&&P.length?(l=r.errors[0])==null?void 0:l.userMsg:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0444\u0438\u043B\u044F");return r})}}},1888:function(de,Y,n){n.d(Y,{Z:function(){return g}});var w=n(39666),G=n(53869),L=n(8952),M=(R,T,E)=>new Promise((y,f)=>{var o=O=>{try{m(E.next(O))}catch(s){f(s)}},i=O=>{try{m(E.throw(O))}catch(s){f(s)}},m=O=>O.done?y(O.value):Promise.resolve(O.value).then(o,i);m((E=E.apply(R,T)).next())});class g{constructor(T=(0,G.inject)(L.ZP)){this.mgate=T}loadVendors(){return M(this,null,function*(){var T;try{const E=yield this.mgate.fetch("/api/mobile/v1/autoAccessoriesWizard/filter/searchCarVendors");return(T=E?.vendors)==null?void 0:T.map(y=>({value:y.id,label:y.vendor}))}catch(E){(0,w.captureException)(E)}return[]})}loadModels(T){return M(this,null,function*(){var E;try{return(E=(yield this.mgate.fetch("/api/mobile/v1/autoAccessoriesWizard/filter/searchCarModels",{vendorId:T})).models)==null?void 0:E.map(f=>({value:f.id,label:f.model}))}catch(y){(0,w.captureException)(y)}return[]})}loadYears(T){return M(this,null,function*(){var E;try{return(E=(yield this.mgate.fetch("/api/mobile/v1/autoAccessoriesWizard/filter/searchCarYears",{modelId:T})).carYears)==null?void 0:E.map(f=>({value:f.id,label:f.year}))}catch(y){(0,w.captureException)(y)}return[]})}loadModifications(T){return M(this,null,function*(){var E;try{return(E=(yield this.mgate.fetch("/api/mobile/v1/autoAccessoriesWizard/filter/searchCarModifications",{yearId:T})).models)==null?void 0:E.map(f=>({value:f.id,label:f.modification}))}catch(y){(0,w.captureException)(y)}return[]})}loadBodyTypes(T){return M(this,null,function*(){var E;try{return(E=(yield this.mgate.fetch("/api/mobile/v1/autoAccessoriesWizard/filter/searchCarBodyTypes",{modificationId:T})).carBodies)==null?void 0:E.map(f=>({value:f.id,label:f.body}))}catch(y){(0,w.captureException)(y)}return[]})}loadAccessoriesAndSelectedFilters(T,E,y,f,o){return M(this,null,function*(){var i;try{const m=yield this.mgate.fetch("/api/mobile/v1/autoAccessoriesWizard/filter/searchAutoAccessoryCollections",{vendorId:T,modelId:E,yearId:y,modificationId:f,carBodyTypeId:o}),O=(i=m.carAccessoryCollections)==null?void 0:i.map(D=>({value:D.id,label:D.name,url:D.url})),s=m.selectedFilters;return{accessories:O,selectedFilters:s}}catch(m){(0,w.captureException)(m)}})}}},69015:function(de,Y,n){n.d(Y,{N1:function(){return M},DZ:function(){return R},g3:function(){return T},ZP:function(){return E}});var w=n(53869),G=n(8952),L=(y,f,o)=>new Promise((i,m)=>{var O=p=>{try{D(o.next(p))}catch(_){m(_)}},s=p=>{try{D(o.throw(p))}catch(_){m(_)}},D=p=>p.done?i(p.value):Promise.resolve(p.value).then(O,s);D((o=o.apply(y,f)).next())}),M=(y=>(y.GetOldBonusBalanceException="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0441\u0442\u0430\u0440\u044B\u0435 \u0431\u043E\u043D\u0443\u0441\u044B",y.ConvertOldBonusException="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043A\u043E\u043D\u0432\u0435\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0442\u0430\u0440\u044B\u0435 \u0431\u043E\u043D\u0443\u0441\u044B \u0432 \u0431\u043E\u043D\u0443\u0441\u044B \u0441\u043F\u0430\u0441\u0438\u0431\u043E",y.ApplySberLoyaltyException="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F \u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0435 \u043B\u043E\u044F\u043B\u044C\u043D\u043E\u0441\u0442\u0438",y))(M||{});class g extends Error{constructor(){super("Get bonus history error"),Object.setPrototypeOf(this,g.prototype)}}class R extends Error{constructor(f){super("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0441\u0442\u0430\u0440\u044B\u0435 \u0431\u043E\u043D\u0443\u0441\u044B"),this.errors=f,Object.setPrototypeOf(this,R.prototype)}}class T extends Error{constructor(f){super("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F \u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0435 \u043B\u043E\u044F\u043B\u044C\u043D\u043E\u0441\u0442\u0438"),this.errors=f,Object.setPrototypeOf(this,T.prototype)}}class E{constructor(f=(0,w.inject)(G.ZP)){this.mgate=f}getBonusHistory(){return L(this,null,function*(){const f=yield this.mgate.fetch("/api/mobile/v1/loyaltyService/bonus/history");if(f.error)throw new g;return f})}getOldBonusBalance(){return L(this,null,function*(){const f=yield this.mgate.fetch("/api/mobile/v1/loyaltyService/oldBonus/get");if(!f.success)throw new R(f.errors);return f.oldBonusBalance})}applySberLoyalty(){return L(this,null,function*(){const f=yield this.mgate.fetch("/api/mobile/v1/loyaltyService/unitedLoyalty/apply");if(!f.success)throw new T(f.errors)})}}},40107:function(de,Y,n){n.d(Y,{e5:function(){return D},m8:function(){return _}});var w=n(53869),G=n(8952),L=n(79718),M=n(65363),g=n(5756),R=Object.defineProperty,T=Object.defineProperties,E=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(P,l,r)=>l in P?R(P,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):P[l]=r,m=(P,l)=>{for(var r in l||(l={}))f.call(l,r)&&i(P,r,l[r]);if(y)for(var r of y(l))o.call(l,r)&&i(P,r,l[r]);return P},O=(P,l)=>T(P,E(l)),s=(P,l,r)=>new Promise((e,d)=>{var h=u=>{try{a(r.next(u))}catch(c){d(c)}},v=u=>{try{a(r.throw(u))}catch(c){d(c)}},a=u=>u.done?e(u.value):Promise.resolve(u.value).then(h,v);a((r=r.apply(P,l)).next())}),D=(P=>(P.Product="ACCOMPANYING_GOODS_ITEM_TYPE",P.Service="SERVICE_ITEM_TYPE",P))(D||{});class p extends Error{constructor(l){super("Unsuccessful related items fetch"),this.errors=l,Object.setPrototypeOf(this,p.prototype)}}class _{constructor(l=(0,w.inject)(G.ZP)){this.mgate=l}fetchRelatedItems(l,r){return s(this,null,function*(){var e;const d=yield this.mgate.fetch("api/mobile/v1/catalogService/relatedItems/list",{goodsId:l,addressId:r});if(!d.success||(e=d.errors)!=null&&e.length)throw new p(d?.errors||[]);return d.items.flatMap(h=>h.listingItems.map(v=>{var a;const{goods:u}=v,I=(0,M.KB)([v.favoriteOffer],[],v)[0];return{item:O(m({},v),{comboId:(0,L.un)({goodsId:u.goodsId,merchantId:((a=v.favoriteOffer)==null?void 0:a.merchantId)||"",warehouseId:v.favoriteOffer.warehouseId}),discounts:(v?.discounts||[]).map(N=>N.type==="BPG"?O(m({},N),{type:g.HL.Bpg2}):N),favoriteOffer:I}),relationType:h.relationType}}))})}}},20667:function(de,Y,n){n.d(Y,{I:function(){return M},Z:function(){return g}});var w=n(53869),G=n(8952),L=(R,T,E)=>new Promise((y,f)=>{var o=O=>{try{m(E.next(O))}catch(s){f(s)}},i=O=>{try{m(E.throw(O))}catch(s){f(s)}},m=O=>O.done?y(O.value):Promise.resolve(O.value).then(o,i);m((E=E.apply(R,T)).next())});class M extends Error{constructor(T){super("Unsuccessful reviews fetch"),this.errors=T,Object.setPrototypeOf(this,M.prototype)}}class g{constructor(T=(0,w.inject)(G.ZP)){this.mgate=T}fetchReviews(){return L(this,arguments,function*(T={isMainReviews:!1,limit:20,offset:0}){const E=yield this.mgate.fetch("api/mobile/v1/catalogService/review/search",T);if(!E.success)throw new M(E.errors);return{reviews:E.reviews,totalCount:E.totalCount}})}}},79718:function(de,Y,n){n.d(Y,{Ae:function(){return e},qe:function(){return d},PJ:function(){return h},Wz:function(){return v},TB:function(){return a},OF:function(){return u},nJ:function(){return c},Hr:function(){return I},lF:function(){return N},vY:function(){return H},Lx:function(){return F},Sp:function(){return B},Cx:function(){return A},L6:function(){return j},tW:function(){return J},ZC:function(){return re},Kp:function(){return Pe},P3:function(){return De},dd:function(){return ge},gw:function(){return fe},FT:function(){return x},SR:function(){return ae},cl:function(){return ye},un:function(){return Re},Z0:function(){return Ue},bC:function(){return W},EM:function(){return ue},tw:function(){return K},ZP:function(){return se}});var w=n(53869),G=n(49307),L=n(8952),M=n(49426),g=n(69074),R=n(55740),T=n(33371),E=n(20025),y=n(65363),f=n(5756),o=n(20677),i=Object.defineProperty,m=Object.defineProperties,O=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,_=(b,z,$)=>z in b?i(b,z,{enumerable:!0,configurable:!0,writable:!0,value:$}):b[z]=$,P=(b,z)=>{for(var $ in z||(z={}))D.call(z,$)&&_(b,$,z[$]);if(s)for(var $ of s(z))p.call(z,$)&&_(b,$,z[$]);return b},l=(b,z)=>m(b,O(z)),r=(b,z,$)=>new Promise((le,q)=>{var Ie=Te=>{try{he($.next(Te))}catch(Le){q(Le)}},ie=Te=>{try{he($.throw(Te))}catch(Le){q(Le)}},he=Te=>Te.done?le(Te.value):Promise.resolve(Te.value).then(Ie,ie);he(($=$.apply(b,z)).next())});const e="OFFER_DUE_DATE_FILTER",d="DeliveryTimeFilter",h="DeliveryMethodFilter";var v=(b=>(b.UnknownOffer="UNKNOWN_OFFER_DUE_DATE",b.DefaultDeliveryOffer="DEFAULT_DELIVERY_OFFER_DUE_DATE",b.CollectTodayOffer="COLLECT_TODAY_OFFER_DUE_DATE",b.InFewHoursOffer="IN_FEW_HOURS_OFFER_DUE_DATE",b.ExpressOffer="EXPRESS_OFFER_DUE_DATE",b))(v||{}),a=(b=>(b.AnyMethod="ANY_METHOD",b.CourierOrPickupPoint="COURIER_OR_PICKUP_POINT",b.CollectFromStore="COLLECT_FROM_STORE",b))(a||{}),u=(b=>(b.List="list",b.Tile="tile",b.Mobile="mobile",b))(u||{}),c=(b=>(b.Single="400000010",b.Text1="400000011",b.Text2="400000012",b))(c||{}),I=(b=>(b.Default="DEFAULT_VIEW",b.Fashion="FASHION_VIEW",b))(I||{}),N=(b=>(b.Courier="COURIER",b.Pickup="PICKUP",b.Cnc="CLICK_COLLECT",b.Cnd="CLICK_DELIVERY",b.Dsm="DELIVERY_BY_MERCHANT",b))(N||{}),H=(b=>(b.Courier="COURIER",b.Pickup="PICKUP",b.Cnc="CNC",b.Cnd="CND",b))(H||{}),F=(b=>(b.Plp="PLP_BREADCRUMBS_PAGE_CONTEXT",b.SisPlp="SIS_PLP_BREADCRUMBS_PAGE_CONTEXT",b.CncPlp="CNC_PLP_BREADCRUMBS_PAGE_CONTEXT",b.PromoPlp="PROMO_PLP_BREADCRUMBS_PAGE_CONTEXT",b.Pdp="PDP_BREADCRUMBS_PAGE_CONTEXT",b.CncPdp="CNC_PDP_BREADCRUMBS_PAGE_CONTEXT",b.SisPdp="SIS_PDP_BREADCRUMBS_PAGE_CONTEXT",b))(F||{}),B=(b=>(b.Unknown="FLAG_UNKNOWN",b.AvailableFromAnotherMerchant="FLAG_AVAILABLE_FROM_ANOTHER_MERCHANT",b.AvailableInAnotherLocation="FLAG_AVAILABLE_IN_ANOTHER_LOCATION",b))(B||{});const A={COURIER:"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430",PICKUP:"\u041F\u0443\u043D\u043A\u0442 \u0432\u044B\u0434\u0430\u0447\u0438",CLICK_COLLECT:"\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0438\u0437 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430",CLICK_DELIVERY:"",DELIVERY_BY_MERCHANT:""};var j=(b=>(b.MerchantShortName="MERCHANT_SHORT_NAME",b.MerchantLogoUrl="MERCHANT_LOGO_URL",b))(j||{}),J=(b=>(b.Brand="2B0B1FF4756D49CF84B094522D57ED3D",b.Merchant="FE476AD4A46D4F8EA7B1AB7F30ED017S",b.Credit="CBB73D9764C341558AF97AB13FF27FC9",b.Bpg="F7DB604EDF6D4C42920DF290E6AF8716",b.SpecialOffers="2AA9A3AE46E6485298BE5B23F6360C9B",b.InStock="4CB2C27EAAFC4EB39378C4B7487E6C9E",b.Cnc="FC7D537CF7CD433DA82630BA69606666",b))(J||{}),re=(b=>(b.GroupBySymbol="GroupBySymbol",b.SupermarketMerchants="SupermarketMerchants",b))(re||{}),Pe=(b=>(b.Range="RANGE",b.Solo="SOLO",b.List="LIST",b.Radio="RADIO",b))(Pe||{}),De=(b=>(b.Tire="SHOULD_SHOW_TIRE_WIZARD",b.Wheel="SHOULD_SHOW_WHEEL_WIZARD",b.AutoAccessories="SHOULD_SHOW_AUTO_ACCESSORIES_WIZARD",b))(De||{}),ge=(b=>(b.List="SHOULD_SHOW_LIST_VIEW",b))(ge||{}),fe=(b=>(b.UnknownMeasurement="UNKNOWN_MEASUREMENT",b.ItemMeasurement="ITEM_MEASUREMENT",b.KilogramMeasurement="KILOGRAM_MEASUREMENT",b.SquareMeasurement="SQUARE_METER_MEASUREMENT",b.MeterMeasurement="METER_MEASUREMENT",b.LiterMeasurement="LITRE_MEASUREMENT",b.ConcreteKilogramMeasurement="CONCRETE_KG_MEASUREMENT",b))(fe||{}),x=(b=>(b.UnknownPriceType="UNKNOWN_PRICE_TYPE",b.CustomMeasurementPriceType="CUSTOM_MEASUREMENT_PRICE_TYPE",b))(x||{});function ee(b){return b?{isFavorite:!0,finalPrice:b.price,merchantId:b.merchantId,oldPrice:b.oldPrice,oldPriceChangePercentage:b.oldPriceChangePercentage,crossedPrice:b.crossedPrice,crossedPriceChangePercentage:b.crossedPriceChangePercentage}:null}function ae(b){return b.map(z=>({type:z.type,name:z.name,valueList:z.valuesList.map($=>{var le;return{goodsId:$.item.goodsId,slug:$.item.slug,value:$.value,values:$.values,url:`/catalog/details/${$.item.slug}/`,title:$.item.title,price:((le=$.item.favoriteOffer)==null?void 0:le.price)||0,mainImageUrl:$.item.image,isAvailable:$.isAvailable,isSelected:$.isSelected,flags:$.flags,favoriteOffer:ee($.item.favoriteOffer)}})}))}function ye(b){if(!b||Object.keys(b).length===0)return[];const z=[];for(const $ of Object.keys(b)){const le=b[$];if([e,h,d].includes($))z.push({filterId:$,type:0,value:Array.isArray(le)?le[0]:le});else if(Array.isArray(le))for(const q of le)z.push({filterId:$,type:0,value:q.toString()});else if(typeof le=="object"){const q=le;q.min!=null&&z.push({filterId:$,type:1,value:q.min.toString()}),q.max!=null&&z.push({filterId:$,type:2,value:q.max.toString()})}else typeof le=="boolean"&&le&&z.push({filterId:$,type:0,value:"1"})}return z}function Re(b){return`${b.goodsId}/${b.merchantId}/${b.discount||""}`}function Ue(b){const z=b.split("/");return{goodsId:z[0],merchantId:z[1],discount:z[2],warehouseId:z[3]}}class be extends Error{constructor(z){super("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0437\u0430\u044F\u0432\u043A\u0438 \u0413\u041B\u0426 1"),this.error=z,Object.setPrototypeOf(this,be.prototype)}}class k extends Error{constructor(z){super(`Failed to fetch PromoPageInfo ${z}`),Object.setPrototypeOf(this,k.prototype)}}class C extends Error{constructor(z){super(`Failed to fetch breadcrumbs ${z}`),Object.setPrototypeOf(this,C.prototype)}}function W(b,z){function $(le,q){const Ie=(0,R.qC)(le);return Ie===q?"":Ie}return b.map(le=>({url:$(le.link,z),name:le.name,children:le.children.filter(q=>!q.isTag).map(q=>({url:$(q.link,z),name:q.name,id:q.link})),tags:le.children.filter(q=>q.isTag).map(q=>({url:$(q.link,z),name:q.name,id:q.link})),collectionId:le.collectionId}))}function te(b){return(b||[]).map(z=>z.id==="00000000-0000-0000-0000-000000000000"?z.childCollections:[z]).flat()}function V(b){const z=[],$=[];function le(ie,he,Te){const Le=(0,M.Z)(ie,["id","name","slug","isSelected","isActive"]);he.push(l(P({},Le),{childCollections:ie.childCollections,parentId:Te})),ie.childCollections.length&&ie.childCollections.forEach(Ge=>le(Ge,he,ie.id))}function q(ie,he,Te){const Le=he.find(Ge=>Ge.id===ie.parentId);Te.push(ie),Le&&q(Le,z,$)}b.forEach(ie=>{le(ie,z,null)});const Ie=z.find(ie=>ie.isSelected);return Ie&&q(Ie,z,$),$.reverse()}const ue=10,Z=10,U={limit:10,offset:0,collectionId:"",shopInfo:{locationID:""},selectedFilters:[],sorting:0,showNotAvailable:!1,goodsIds:[]};function K(b,z){const $=new T.V(b.url||""),le=l(P({},$.hashParams),{store:z});return(0,R.sZ)($.pathname,{hashParams:le})}class se{constructor(z=(0,w.inject)(L.ZP),$=(0,w.inject)(o.ZP),le=(0,w.inject)(E.Z)){this.mgate=z,this.seoService=$,this.logger=le,this.requestCache=null,window&&(this.requestCache=new G.Z("catalog-service"))}sendBpgRequest(z){return r(this,null,function*(){var $;const le=yield this.mgate.fetch("api/mobile/v1/bpg1Service/bpg1/apply",z);if(($=le.errors)!=null&&$.length||!le.success)throw new be(le.errors[0]);return le})}getListingItems(){return r(this,arguments,function*(z=U,$){var le;const q=yield this.mgate.fetch("api/mobile/v1/catalogService/catalog/search",P({requestVersion:ue},z));for(const ie of q.filters)ie.isCollapsed=!1;const Ie=te(((le=q?.collectionSelector)==null?void 0:le.collections)||[]);return{sorting:q.sorting,collections:Ie,selectedCollections:V(Ie),hasPlus18:q.hasPlus18,items:q.items.map(ie=>{ie.comboId=Re({goodsId:ie.goods.goodsId,merchantId:$||ie.favoriteOffer.merchantId,warehouseId:ie.favoriteOffer.warehouseId}),ie.relatedItems=ae(ie.productSelectors),ie.discounts.forEach(Te=>{Te.type==="BPG"&&(Te.type=f.HL.Bpg2)});const he=(0,y.KB)([ie.favoriteOffer],[],ie);return he.length&&(ie.favoriteOffer=he[0]),ie}),listingSize:+q.listingSize,offset:+q.offset,total:+q.total,processor:q.processor,view:q.view,keywords:q.keywords,assumedCollections:q.alternativeAssumedCollections.map(ie=>(ie.url=(0,R.qC)(ie.url),ie)),currentAssumedCollection:q.assumedCollection,queryChangesInfo:q.queryChangesInfo,flags:q.flags}})}getListingFilters(){return r(this,arguments,function*(z=U){const $=yield this.mgate.fetch("api/mobile/v1/catalogService/filters/search",P({requestVersion:Z},z));return{filters:($?.filters||[]).filter(le=>le.id!=="category"),selectedFilterCount:$.selectedFilterCount,totalItemsFound:+$.totalItemsFound}})}getPromoPageInfo(z){return r(this,null,function*(){const $=yield this.mgate.fetch("api/mobile/v1/catalogService/collectionInfo",z);if(!$?.success)throw new k(JSON.stringify($.errors));return l(P({},$.collection),{menuNode:$.menuNode,navigation:$.navigation.childNodes})})}fetchCatalogMenu(){return r(this,arguments,function*(z={}){const $=yield this.mgate.fetch("api/mobile/v1/catalogService/catalog/menu",z);return{flags:$?.flags,nodes:$?.nodes}})}fetchCatalogMenuCached(){return r(this,arguments,function*(z={}){if(!this.requestCache)return this.fetchCatalogMenu(z).then(({nodes:ie})=>ie);const $=(0,g.Z)(z),le=`cacheTime_${$}`;let q=!1;try{const he=(yield this.requestCache.getItem(le))||0;q=Date.now()-he<36e5}catch(ie){this.logger.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u0432\u0430\u043B\u0438\u0434\u043D\u043E\u0441\u0442\u0438 \u043A\u0435\u0448\u0430 \u0432 catalog-service.",details:ie})}if(q)try{const ie=yield this.requestCache.getItem($);if(ie)return ie}catch(ie){this.logger.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0447\u0442\u0435\u043D\u0438\u044F \u043A\u0435\u0448\u0430 \u0432 catalog-service.",details:ie})}const{nodes:Ie}=yield this.fetchCatalogMenu(z);return r(this,null,function*(){var ie,he;try{yield(ie=this.requestCache)==null?void 0:ie.setItem($,Ie),yield(he=this.requestCache)==null?void 0:he.setItem(le,Date.now())}catch(Te){this.logger.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u043F\u0438\u0441\u0438 \u043A\u0435\u0448\u0430 \u0432 catalog-service.",details:Te})}}),Ie})}getCatalogTree(){return r(this,arguments,function*(z={},$=4){return(yield(z?.locationID||z?.merchantId?(...q)=>r(this,[...q],function*(Ie={}){return(yield this.fetchCatalogMenu(Ie)).nodes}):this.fetchCatalogMenuCached).bind(this)(l(P({},z),{depthLevel:$}))).map(q=>{var Ie;return l(P({},q),{url:((Ie=q?.collection)==null?void 0:Ie.url)||""})})})}getPartCatalogTree(){return r(this,arguments,function*(z={depthLevel:4,depthLevelFrom:0,parentId:0}){const{depthLevel:$,depthLevelFrom:le,parentId:q="0"}=z;return(yield this.fetchCatalogMenuCached({depthLevel:$,depthLevelFrom:le,parentId:q})).map(Ie=>{var ie;return l(P({},Ie),{url:((ie=Ie?.collection)==null?void 0:ie.url)||""})})})}fetchBreadcrumbs(z){return r(this,null,function*(){z.url=(0,R.OO)(z.url);const $=yield this.mgate.fetch("api/mobile/v1/catalogService/breadcrumbs/get",z);if(!$.success)throw new C(JSON.stringify($.errors));return W($.breadcrumbs,z.url)})}}},65363:function(de,Y,n){n.d(Y,{DD:function(){return l},Bu:function(){return r},r9:function(){return e},y4:function(){return d},_H:function(){return h},U7:function(){return c},GW:function(){return I},KD:function(){return H},Af:function(){return A},TI:function(){return j},aQ:function(){return De},KB:function(){return ee},Bi:function(){return Re},w5:function(){return be},ZP:function(){return k}});var w=n(53869),G=n(8952),L=n(55740),M=n(77235),g=n(20025),R=n(79718),T=n(5756),E=n(20677),y=Object.defineProperty,f=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,s=(C,W,te)=>W in C?y(C,W,{enumerable:!0,configurable:!0,writable:!0,value:te}):C[W]=te,D=(C,W)=>{for(var te in W||(W={}))m.call(W,te)&&s(C,te,W[te]);if(i)for(var te of i(W))O.call(W,te)&&s(C,te,W[te]);return C},p=(C,W)=>f(C,o(W)),_=(C,W,te)=>new Promise((V,ue)=>{var Z=se=>{try{K(te.next(se))}catch(b){ue(b)}},U=se=>{try{K(te.throw(se))}catch(b){ue(b)}},K=se=>se.done?V(se.value):Promise.resolve(se.value).then(Z,U);K((te=te.apply(C,W)).next())});const P=["400000020","400000021","400000022"];var l=(C=>(C.Photo="photo",C.Video="video",C))(l||{}),r=(C=>(C.SberPrime="DELIVERY_APPLIED_PROMOTION_TAG_SBER_PRIME",C.Merchant="merchant",C.Unknown="DELIVERY_APPLIED_PROMOTION_TAG_UNKNOWN",C))(r||{}),e=(C=>(C.OnDemand="ON_DEMAND_DELIVERY_OPTION",C.Unknown="UNKNOWN_DELIVERY_OPTION",C))(e||{}),d=(C=>(C.Zero="ZERO_BPG2_TYPE",C.Discount="DISCOUNT_BPG2_TYPE",C.Merchant="MERCHANT_BPG_TYPE",C.Unknown="UNKNOWN_BPG_TYPE",C))(d||{}),h=(C=>(C.Unknown="UNKNOWN_DELIVERY_PRICE_DISPLAY_TYPE",C.Exact="EXACT_DELIVERY_PRICE_DISPLAY_TYPE",C.Min="MIN_DELIVERY_PRICE_DISPLAY_TYPE",C))(h||{}),v=(C=>(C.Unknown="UNKNOWN_PAYMENT_METHOD",C.PrepayOnline="PREPAY_ONLINE",C.Cash="CASH",C.BankCards="BANK_CARDS",C))(v||{}),a=(C=>(C.OnlineOrUponReceipt="onlineOrUponReceipt",C.OnlyUponReceipt="onlyUponReceipt",C.OnlyInCashUponReceipt="onlyInCashUponReceipt",C.Online="online",C))(a||{});const u={onlineOrUponReceipt:"\u041E\u043F\u043B\u0430\u0442\u0430 \u043E\u043D\u043B\u0430\u0439\u043D \u0438\u043B\u0438 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438",onlyUponReceipt:"\u041E\u043F\u043B\u0430\u0442\u0430 \u0442\u043E\u043B\u044C\u043A\u043E \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438",onlyInCashUponReceipt:"\u041E\u043F\u043B\u0430\u0442\u0430 \u0442\u043E\u043B\u044C\u043A\u043E \u043D\u0430\u043B\u0438\u0447\u043D\u044B\u043C\u0438 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438",online:"\u041E\u043F\u043B\u0430\u0442\u0430 \u0442\u043E\u043B\u044C\u043A\u043E \u043E\u043D\u043B\u0430\u0439\u043D"};var c=(C=>(C.PrepayAndCashAndBankCards="prepay_cash_cards",C.CashAndBankCards="cash_cards",C.PrepayAndCash="prepay&cash_only",C.PrepayAndBankCards="prepay&cards_only",C.Cash="cash_only",C.BankCards="cards_only",C.Prepay="prepay_only",C.NoPaymentAvailable="no_payment_available",C.UnknownPaymentMethod="unknown_payment_available",C))(c||{}),I=(C=>(C.Value="VALUE",C.Combo="COMBO",C.Image="IMAGE",C))(I||{}),N=(C=>(C.Ingredients="INGREDIENTS",C.PharmacyDrugWithLimitation="PHARMACY_DRUG_WITH_LIMITATION",C.ShouldShowTireWizard="SHOULD_SHOW_TIRE_WIZARD",C.ShouldShowWheelWizard="SHOULD_SHOW_WHEEL_WIZARD",C))(N||{}),H=(C=>(C.NutritionalLabel="NUTRITIONAL_VALUE_LABEL",C.NutritionalCalories="NUTRITIONAL_VALUE_CALORIES",C.NutritionalProteins="NUTRITIONAL_VALUE_PROTEINS",C.NutritionalFats="NUTRITIONAL_VALUE_FATS",C.NutritionalCarbohydrates="NUTRITIONAL_VALUE_CARBOHYDRATES",C))(H||{}),F=(C=>(C.FittingLabelPickup="FITTING_TITLE_PICKUP",C.FittingDescriptionPickup="FITTING_DESCRIPTION_PICKUP",C.FittingLabelCourier="FITTING_TITLE_COURIER",C.FittingDescriptionCourier="FITTING_DESCRIPTION_COURIER",C.FittingLabelCnc="FITTING_TITLE_CNC",C.FittingDescriptionCnc="FITTING_DESCRIPTION_CNC",C))(F||{}),B=(C=>(C.ReturnInfoFlag="PRODUCT_RETURN_URL",C))(B||{});const A=D(D(D(D({},N),H),F),B);var j=(C=>(C.Unknown="UNKNOWN",C.PaymentTypeBonus="PAYMENT_TYPE_BONUS",C.ItemsBonus="ITEMS_BONUS",C.PrimeBonus="PRIME_BONUS",C))(j||{}),J=(C=>(C.Items="ITEMS_BONUS_TYPE",C.PaymentType="PAYMENT_TYPE_BONUS_TYPE",C.Prime="PRIME_BONUS_TYPE",C))(J||{});class re extends Error{constructor(W){super((0,M.A)(W)),Object.setPrototypeOf(this,re.prototype)}}function Pe(C){return C.length?(C.forEach(W=>{W.preview=W.preview?W.preview:" "}),C):[]}function De(C){const W=C.includes("PREPAY_ONLINE"),te=C.includes("CASH"),V=C.includes("BANK_CARDS"),ue=C.includes("UNKNOWN_PAYMENT_METHOD");let Z="",U="no_payment_available";return W&&te&&V||W&&te||W&&V?(Z=u.onlineOrUponReceipt,W&&te&&V?U="prepay_cash_cards":te&&V?U="cash_cards":W&&te?U="prepay&cash_only":W&&V&&(U="prepay&cards_only")):te&&V?(Z=u.onlyUponReceipt,U="cash_cards"):te?(Z=u.onlyInCashUponReceipt,U="cash_only"):V?(Z=u.onlyUponReceipt,U="cards_only"):W?(Z=u.online,U="prepay_only"):ue&&(U="unknown_payment_available"),{paymentType:Z,analyticsPaymentType:U}}function ge(C,W){return C.isFavorite&&W?.lastPrice?W.lastPrice:null}function fe(C,W){return C.isFavorite&&W?.crossedPriceChangePercentage?W.crossedPriceChangePercentage:0}function x(C,W){return W?T.HL.Sbpg:C?T.HL.Bpg2:void 0}function ee(C,W,te){return C.map(V=>{var ue,Z,U,K,se,b;const z=W.find(ie=>ie.id===V.merchantId),$=V.isBpgByMerchant||V.bpgType==="MERCHANT_BPG_TYPE",le=((ue=V.bonusInfoGroups)==null?void 0:ue.filter(ie=>ie.type!=="UNKNOWN"))||[],q=(V.discounts||[]).find(ie=>ie.type===T.HL.Bpg),Ie={price:V.price,bpgType:V.bpgType,merchant:{id:z?.id||V?.merchantId||"",name:z?.name||V?.merchantName||"",url:z?.slug||"",design:{logoUrl:((Z=z?.design)==null?void 0:Z.logoUrl)||""},merchantLogoUrl:V.merchantLogoUrl||""},loyalty:{amount:V.bonusAmountFinalPrice||V.bonusAmount,percent:V.bonusPercent},offerId:V.id,isFavorite:V.isFavorite,lastPrice:ge(V,te),finalPrice:V.finalPrice,creditPaymentAmount:V.creditPaymentAmount||0,installmentPaymentAmount:V.installmentPaymentAmount||0,bnplPaymentParams:V.bnplPaymentParams,installmentPaymentParams:V.installmentPaymentParams,bonusAmount:V.bonusAmount,bonusAmountFinalPrice:V.bonusAmountFinalPrice||0,bonusPercent:V.bonusPercent,bonusInfoGroups:le,oldPrice:V.oldPrice,oldPriceChangePercentage:V.oldPriceChangePercentage,comboId:(0,R.un)({goodsId:te?.goods.goodsId||"",merchantId:z?.id||"",discount:x(q?.amount,$),warehouseId:V.warehouseId}),locationId:V.locationId||"",isBpgByMerchant:$,hasBpg:!!q,bpgDiscount:q?.amount||0,showMerchant:!!V?.showMerchant,spasiboIsAvailable:!!V.spasiboIsAvailable,delivery:{},deliveryPossibilities:V.deliveryPossibilities,badges:te?.badges.filter(ie=>P.includes(ie.data.placeId||"")&&(!ie.data.merchantIds.length||ie.data.merchantIds.includes(z?.id||"")))||[],salesBlockInfo:V.salesBlockInfo,salesBlockInfoTitle:((U=V.salesBlockInfo)==null?void 0:U.displayText)||"",salesBlockInfoShortTitle:((K=V.salesBlockInfo)==null?void 0:K.shortTitle)||"",salesBlockInfoOrder:((se=V.salesBlockInfo)==null?void 0:se.order)||0,salesBlockIsSelected:!!((b=V.salesBlockInfo)!=null&&b.isSelected),dueDate:V.dueDate,pricesPerMeasurement:V?.pricesPerMeasurement||[],availablePaymentMethod:De(V.availablePaymentMethods||[]),crossedPriceChangePercentage:fe(V,te),warehouseId:V.warehouseId,merchantSummaryRating:V.merchantSummaryRating?Number(V.merchantSummaryRating.toFixed(1)):0};return V.deliveryPossibilities.forEach(ie=>{Ie.delivery[ie.code.toLowerCase()]=p(D({},ie),{price:ie.amount,maxDeliveryDays:ie.maxDeliveryDays,minDeliveryDate:ie.date||""})}),Ie})}function ae(C){const{goodsId:W,offers:te,merchants:V,priceInfo:ue,badges:Z}=C;return te?.map(U=>{var K,se,b,z,$,le;const q=V?.find(Le=>Le.id===U.merchantId),Ie=U.isBpgByMerchant||U.bpgType==="MERCHANT_BPG_TYPE",ie=((K=U.bonusInfoGroups)==null?void 0:K.filter(Le=>Le.type!=="UNKNOWN"))||[],he=U.discounts.find(Le=>Le.type===T.HL.Bpg),Te={price:U.price,bpgType:U.bpgType,merchant:{id:q?.id||U?.merchantId||"",name:q?.name||U?.merchantName||"",url:q?.slug||"",design:{logoUrl:((se=q?.design)==null?void 0:se.logoUrl)||""},merchantLogoUrl:U.merchantLogoUrl||""},loyalty:{amount:U.bonusAmountFinalPrice||U.bonusAmount,percent:U.bonusPercent},offerId:U.id,isFavorite:U.isFavorite,lastPrice:ue?.lastPrice||0,finalPrice:U.finalPrice,creditPaymentAmount:U.creditPaymentAmount||0,installmentPaymentAmount:U.installmentPaymentAmount||0,bnplPaymentParams:U.bnplPaymentParams,installmentPaymentParams:U.installmentPaymentParams,bonusAmount:U.bonusAmount,bonusAmountFinalPrice:U.bonusAmountFinalPrice||0,bonusPercent:U.bonusPercent,bonusInfoGroups:ie,oldPrice:U.oldPrice,oldPriceChangePercentage:U.oldPriceChangePercentage,comboId:(0,R.un)({goodsId:W,merchantId:q?.id||"",discount:x(he?.amount,Ie)}),locationId:U.locationId,isBpgByMerchant:Ie,hasBpg:!!he,bpgDiscount:he?.amount||0,showMerchant:!!U?.showMerchant,spasiboIsAvailable:!!U.spasiboIsAvailable,delivery:{},deliveryPossibilities:U.deliveryPossibilities,salesBlockInfo:U.salesBlockInfo||null,salesBlockInfoTitle:((b=U.salesBlockInfo)==null?void 0:b.displayText)||"",salesBlockInfoShortTitle:((z=U.salesBlockInfo)==null?void 0:z.shortTitle)||"",salesBlockInfoOrder:(($=U.salesBlockInfo)==null?void 0:$.order)||0,salesBlockIsSelected:!!((le=U.salesBlockInfo)!=null&&le.isSelected),dueDate:U.dueDate,pricesPerMeasurement:U?.pricesPerMeasurement||[],availablePaymentMethod:De(U.availablePaymentMethods||[]),crossedPriceChangePercentage:ue?.crossedPriceChangePercentage||0,badges:Z?.filter(Le=>P.includes(Le.data.placeId||"")&&(!Le.data.merchantIds.length||Le.data.merchantIds.includes(q?.id||"")))||[],merchantSummaryRating:U.merchantSummaryRating?Number(U.merchantSummaryRating.toFixed(1)):0};return U.deliveryPossibilities.forEach(Le=>{Te.delivery[Le.code.toLowerCase()]=p(D({},Le),{price:Le.amount,maxDeliveryDays:Le.maxDeliveryDays,minDeliveryDate:Le.date||""})}),Te})||[]}function ye(C){var W;const te=[],V=new Map;return(W=C.goods)==null||W.attributes.forEach(ue=>{ue.isWebShort&&te.push({name:ue.title,value:ue.value,description:ue.featureDescription}),ue.group&&V.set(ue.group.title,{name:ue.group.title,attributes:[...V.has(ue.group.title)?V.get(ue.group.title).attributes:[],{name:ue.title,value:ue.value,description:ue.featureDescription}]})}),{shortAttributes:te,details:Array.from(V.values())}}function Re(C){const W=Object.values(H),te=V=>{switch(V){case"NUTRITIONAL_VALUE_LABEL":return"\u041F\u0438\u0449\u0435\u0432\u0430\u044F \u0446\u0435\u043D\u043D\u043E\u0441\u0442\u044C \u043D\u0430 100 \u0433";case"NUTRITIONAL_VALUE_CALORIES":return"\u043A\u043A\u0430\u043B";case"NUTRITIONAL_VALUE_PROTEINS":return"\u0431\u0435\u043B\u043A\u0438";case"NUTRITIONAL_VALUE_FATS":return"\u0436\u0438\u0440\u044B";case"NUTRITIONAL_VALUE_CARBOHYDRATES":return"\u0443\u0433\u043B\u0435\u0432\u043E\u0434\u044B";default:return""}};return C.filter(V=>W.includes(V.name)).map(V=>{const ue=V.name;return{title:te(ue),value:V.value,type:ue}})}function Ue(C){return C.map(W=>{const te=W.name.split(" - "),[V,ue]=te,Z=ue||V,U="0000";return{label:(Z+"."+U).split(".").reverse().join("-")+"T00:00:00",value:W.price}})}function be(C,W,te){var V,ue,Z,U;if(!C)return C;const{isAvailable:K,offers:se,priceInfo:b,competitorsList:z,merchants:$,badges:le,bpgStatus:q,bpgStatusText:Ie}=C,ie=ae({goodsId:W,offers:se,merchants:$,priceInfo:b}),he=ie.find(Ke=>Ke.isFavorite)||null,Te=$?.find(Ke=>String(Ke.id)===String(he?.merchant.id))||null,Le=te?0:he?.bpgDiscount||0,Ge=!!b?.isBpg1Available;return{isAvailable:K,offers:ie,favoriteOffer:ie.find(Ke=>Ke.isFavorite)||null,priceHistory:Ue(b?.priceHistoryPointsList||[]),lastPrice:b?.lastPrice||0,itemPrice:he?.finalPrice||0,deliverySettings:{deliveryPrice:((ue=(V=he?.delivery)==null?void 0:V.courier)==null?void 0:ue.price)||0,deliveryPickupPointPrice:((U=(Z=he?.delivery)==null?void 0:Z.pickup)==null?void 0:U.price)||0},loyaltyAmount:he?.bonusAmountFinalPrice||he?.bonusAmount||0,offerId:he?.offerId||"0",delivery:he?.delivery||null,favoriteMerchant:Te?{merchantId:Te.id,merchantName:Te.name,minDeliveryDate:Te.minDeliveryDate,partnerId:Te.partnerId,url:Te.url}:null,favoriteComboId:(0,R.un)({goodsId:W,merchantId:Te?.id||"",warehouseId:he?.warehouseId,discount:x(Le,he?.isBpgByMerchant)}),bpgDiscount:Le,sbpg:!!he?.isBpgByMerchant,finalPrice:he?.finalPrice||0,badges:le||[],isBpg1Available:Ge,bpg:!Ge&&z?.length?{updatedAt:z[0].date,offers:z.map(Ke=>({name:Ke.company||"",price:Ke.price}))}:null,bpgStatus:q,bpgStatusText:Ie,crossedPrice:b?.crossedPrice||0,crossedPricePeriod:b?.crossedPricePeriod}}class k{constructor(W=(0,w.inject)(G.ZP),te=(0,w.inject)(E.ZP),V=(0,w.inject)(g.Z),ue=(0,w.inject)(R.ZP)){this.mgate=W,this.seoService=te,this.logger=V,this.catalogService=ue}fetchSizeTableInfo(W){return _(this,null,function*(){const te=yield this.mgate.fetch("/api/mobile/v1/catalogService/sizeTable/get",W);if(!te||te?.errors.length)throw new re(te?.errors);return te.sizeTable?{title:te.sizeTable.displayName,footerText:te.sizeTable.text.map(V=>V.value),picture:te.sizeTable.imageUrl,headRow:te.sizeTable.sizeVariants[0].properties.map(V=>V.displayName),bodyRows:te.sizeTable.sizeVariants.map(V=>V.properties.map(ue=>ue.value))}:null})}fetchProductCardMainInfo(W){return _(this,null,function*(){var te,V;W.merchantId||(W.merchantId="0");const ue=yield this.mgate.fetch("/api/mobile/v1/catalogService/productCardMainInfo/get",W);if(!ue||(te=ue?.errors)!=null&&te.length)throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u043E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u0438 \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0442\u043E\u0432\u0430\u0440\u0430");const{shortAttributes:Z,details:U}=ye(ue),{goods:K,goodsIdAlt:se,hasSpecPage:b,vendor:z,customVariables:$,attributesLimit:le,similarCollectionSlug:q,manuals:Ie}=ue,ie=$||[];return{goodsId:K?.goodsId||"0",goodsIdAlt:se,name:K?.title||"",brand:K?.brand||"",mainImage:K?.titleImage||"",slug:K?.slug||"",sku:String(K?.goodsId||""),description:K?.description||"",gallery:((V=K?.images)==null?void 0:V.map(he=>({thumbUrl:he,imageUrl:he,type:"photo"})))||[],shortAttributes:Z,contentFlags:K?.contentFlags||[],contentFlagsStr:K?.contentFlagsStr||[],package:K?.package||{minQuantity:"",packageType:"",weightUnit:""},url:K?(0,L.qC)(K.webUrl)||`/catalog/details/${K.slug}/`:"",view:ue.view,customVariables:ie,hasSpecPage:b,detailsOnIndexPage:le,details:U,vendor:z||null,availableShops:K?.offersCount||0,topCategorySlug:q,manuals:Ie.map(he=>({name:he.name,link:he.url})),videos:K?.videos?Pe(K.videos):[],collectionId:K?.mainCollectionId||""}})}fetchProductCardCategories(W){return _(this,null,function*(){try{const te=yield this.mgate.fetch("/api/mobile/v1/catalogService/productCardCategories/get",{goodsId:W});if(!te||te?.errors.length)throw new Error;const{brandZones:V,category:ue,catBrand:Z,relatedCategories:U}=te;return{brandZones:V,category:ue,catBrand:Z,relatedCategories:U.filter(K=>K.imageUrl&&K.url)}}catch(te){this.logger.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0442\u043E\u0432\u0430\u0440\u0430 (\u0431\u0440\u0435\u043D\u0434-\u0437\u043E\u043D, \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439, \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439+\u0431\u0440\u0435\u043D\u0434\u0430)",details:te})}})}fetchProductOffersData(W){return _(this,null,function*(){var te,V;W.merchantId||(W.merchantId="0");const{goodsId:ue,locationId:Z,merchantId:U,addressId:K,selectedFilters:se}=W,b=11,z=((V=(te=W.selectedFilters)==null?void 0:te.find(le=>le.filterId===R.Ae))==null?void 0:V.value)||R.Wz.UnknownOffer,$=yield this.mgate.fetch("/api/mobile/v1/catalogService/productOffers/get",{goodsId:ue,shopInfo:Z?{locationID:String(Z)}:{},merchantId:U,addressId:K||null,listingParams:{priorDueDate:z,selectedFilters:se||[]},requestVersion:b});if(!$||$?.errors.length)throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u043E\u0444\u0444\u0435\u0440\u043E\u0432 \u0442\u043E\u0432\u0430\u0440\u0430 \u043F\u043E \u0438\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440\u0443");return $})}fetchSeoData(W,te){return _(this,null,function*(){var V;try{const ue=yield this.seoService.fetchProductDetailsSeoData(W.productId,W.url),Z={meta:ue?.seoMeta||null,links:ue?.links||[]};return(V=Z.meta)!=null&&V.attributeLinks&&(Z.meta.attributeLinks=ue?.attributes||[]),Z}catch(ue){this.logger.handleError({url:te.path,message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0434\u0430\u043D\u043D\u044B\u0445 SEO PDP",details:ue})}})}fetchPdpBreadcrumbs(W){return _(this,null,function*(){try{return yield this.catalogService.fetchBreadcrumbs(W)}catch(te){this.logger.handleError({url:W.url,message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0434\u0430\u043D\u043D\u044B\u0445 breadcrumbs PDP",details:te})}})}fetchProductCardFeatures(W,te){return _(this,null,function*(){try{const V=yield this.mgate.fetch("/api/mobile/v1/catalogService/productCardFeatures/get",{goodsId:W}),{productSelectors:ue}=V;return{multiAttributes:(0,R.SR)(ue),multiAttributesIds:ue.flatMap(Z=>Z.valuesList.map(U=>U.item.goodsId))}}catch(V){this.logger.handleError({url:te,message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0444\u0438\u0447 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0442\u043E\u0432\u0430\u0440\u0430 (\u0413\u041B\u04261, \u043C\u0443\u043B\u044C\u0442\u0438\u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430) PDP",details:V})}})}}},8242:function(de,Y,n){n.d(Y,{$B:function(){return T},Qt:function(){return E},ZP:function(){return y}});var w=n(53869),G=n(34853),L=n(8952),M=n(85847),g=n(4606),R=(f,o,i)=>new Promise((m,O)=>{var s=_=>{try{p(i.next(_))}catch(P){O(P)}},D=_=>{try{p(i.throw(_))}catch(P){O(P)}},p=_=>_.done?m(_.value):Promise.resolve(_.value).then(s,D);p((i=i.apply(f,o)).next())});class T extends Error{constructor(o){super(`${G.QI.Checkout} Apple Pay session start failed`),this.errors=o,Object.setPrototypeOf(this,T.prototype)}}function E(){return R(this,null,function*(){if(!window.ApplePaySession||!(0,M.s)())return!1;const f=(0,g.iE)().applePayMerchantId;if(!f)return!1;try{return yield ApplePaySession.canMakePaymentsWithActiveCard(f)}catch{return!1}})}class y{constructor(o=(0,w.inject)(L.ZP)){this.mgate=o}requestPayment(o,i){const m=new ApplePaySession(1,{countryCode:"RU",currencyCode:"RUB",supportedNetworks:["visa","masterCard"],merchantCapabilities:["supports3DS"],total:{type:"final",label:"sbermegamarket.ru",amount:String(o)}});return m.onvalidatemerchant=O=>R(this,null,function*(){const s=yield this.mgate.fetch("api/mobile/v2/checkoutService/appleSession/start ",{validationURL:O.validationURL,publicId:i});if(!s.success)throw new T(s.errors);m.completeMerchantValidation(s.model)}),new Promise((O,s)=>{m.onpaymentauthorized=D=>{O({token:JSON.stringify(D.payment.token),finalize(p){m.completePayment(p?ApplePaySession.STATUS_SUCCESS:ApplePaySession.STATUS_FAILURE)}})},m.oncancel=()=>{s()},m.begin()})}}},36933:function(de,Y,n){n.d(Y,{Z:function(){return r}});var w=n(53869),G=n(34853),L=n(8952),M=n(45037),g=n(48730),R=n(8242),T=n(6444),E=n(58897),y=n(47207),f=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,D=(e,d,h)=>d in e?f(e,d,{enumerable:!0,configurable:!0,writable:!0,value:h}):e[d]=h,p=(e,d)=>{for(var h in d||(d={}))O.call(d,h)&&D(e,h,d[h]);if(m)for(var h of m(d))s.call(d,h)&&D(e,h,d[h]);return e},_=(e,d)=>o(e,i(d)),P=(e,d,h)=>new Promise((v,a)=>{var u=N=>{try{I(h.next(N))}catch(H){a(H)}},c=N=>{try{I(h.throw(N))}catch(H){a(H)}},I=N=>N.done?v(N.value):Promise.resolve(N.value).then(u,c);I((h=h.apply(e,d)).next())});class l extends Error{constructor(d){super(`${G.QI.Checkout}Unsuccessful get take away info`),this.errors=d,Object.setPrototypeOf(this,l.prototype)}}class r{constructor(d=(0,w.inject)(L.ZP),h=(0,w.inject)(g.Z)){this.mgate=d,this.cookie=h}getTakeAwayInfo(d){return P(this,null,function*(){const h={identification:{id:d.cartId},address:d.address,calculateOptions:d.calculateOptions,isSelectedCartItemGroupsOnly:d.isSelectedCartItemGroupsOnly},v=yield this.mgate.fetch("/api/mobile/v2/checkoutService/cnc/checkout/calculate",h);if(!v.success)throw new l(v.errors);v.paymentInformation&&(v.paymentInformation.timestamp=v.meta.time);const a=yield(0,R.Qt)();return _(p({},v),{paymentMethods:(0,T.yT)(v.paymentType,a),possiblePaymentMethods:(0,T.us)(v.possiblePaymentTypes,a),installmentDiscountAmount:v.installmentDiscountAmount})})}accept(d){return P(this,null,function*(){const{params:h,validationErrors:v}=(0,E.R6)(d,this.cookie);if(h.googleAnalyticsClientId=(0,M.ku)(this.cookie),h.additionalData.source=(0,E.zd)(d.whiteLabelFeature,this.cookie),v.length)throw new y.z3(v);const a=yield this.mgate.fetch("/api/mobile/v2/checkoutService/checkout/accept",h);return a.success||(0,y.XO)(a.errors),a})}}},49765:function(de,Y,n){n.d(Y,{Ky:function(){return e},sK:function(){return h},ZP:function(){return a}});var w=n(53869),G=n(34853),L=n(8952),M=n(98781),g=n(55740),R=n(45037),T=n(48730),E=n(79718),y=n(6444),f=n(58897),o=n(47207),i=Object.defineProperty,m=Object.defineProperties,O=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,_=(u,c,I)=>c in u?i(u,c,{enumerable:!0,configurable:!0,writable:!0,value:I}):u[c]=I,P=(u,c)=>{for(var I in c||(c={}))D.call(c,I)&&_(u,I,c[I]);if(s)for(var I of s(c))p.call(c,I)&&_(u,I,c[I]);return u},l=(u,c)=>m(u,O(c)),r=(u,c,I)=>new Promise((N,H)=>{var F=j=>{try{A(I.next(j))}catch(J){H(J)}},B=j=>{try{A(I.throw(j))}catch(J){H(J)}},A=j=>j.done?N(j.value):Promise.resolve(j.value).then(F,B);A((I=I.apply(u,c)).next())});class e extends Error{constructor(c){super(`${G.QI.Checkout} Unsuccessful get take away info`),this.errors=c,Object.setPrototypeOf(this,e.prototype)}}var d=(u=>(u.ProductReplaceNegotiateAuto="ProductReplaceNegotiateAuto",u.ProductReplaceNegotiateCancel="ProductReplaceNegotiate",u.ProductReplaceAuto="ProductReplaceAuto",u.ProductReplaceCancel="ProductReplaceNone",u.ProductReplaceCall="ProductReplaceCall",u))(d||{});const h={ProductReplaceNegotiateAuto:{title:"\u041F\u043E\u0437\u0432\u043E\u043D\u0438\u0442\u044C. \u0415\u0441\u043B\u0438 \u043D\u0435 \u043E\u0442\u0432\u0435\u0447\u0443, \u0437\u0430\u043C\u0435\u043D\u0438\u0442\u044C \u0442\u043E\u0432\u0430\u0440"},ProductReplaceNegotiate:{title:"\u041F\u043E\u0437\u0432\u043E\u043D\u0438\u0442\u044C. \u0415\u0441\u043B\u0438 \u043D\u0435 \u043E\u0442\u0432\u0435\u0447\u0443, \u0443\u0431\u0440\u0430\u0442\u044C \u0442\u043E\u0432\u0430\u0440"},ProductReplaceAuto:{title:"\u041D\u0435 \u0437\u0432\u043E\u043D\u0438\u0442\u044C. \u0417\u0430\u043C\u0435\u043D\u0438\u0442\u044C \u0442\u043E\u0432\u0430\u0440"},ProductReplaceNone:{title:"\u041D\u0435 \u0437\u0432\u043E\u043D\u0438\u0442\u044C. \u0423\u0431\u0440\u0430\u0442\u044C \u0442\u043E\u0432\u0430\u0440"},ProductReplaceCall:{title:"\u041F\u043E\u0437\u0432\u043E\u043D\u0438\u0442\u044C \u043C\u043D\u0435"}};var v=(u=>(u.Replacement="REPLACEMENT",u))(v||{});class a{constructor(c=(0,w.inject)(L.ZP),I=(0,w.inject)(T.Z)){this.mgate=c,this.cookie=I}calculateDelivery(c){return r(this,null,function*(){var I;const N={identification:{id:c.cartId},calculateOptions:c.calculateOptions,isSelectedCartItemGroupsOnly:c.isSelectedCartItemGroupsOnly,requestVersion:2},H=yield this.mgate.fetch("/api/mobile/v2/checkoutService/checkout/calculateCnd",N),F=H.errors.map(j=>({title:j.detail,detail:j.detail,field:"",code:j.code}));if(!H.success)throw new e(F);H.paymentInformation&&(H.paymentInformation.timestamp=H.meta.time);function B(j,J){return{id:j.id,start:j.start,end:j.end,slaText:j.slaText,timeSlot:{from:(0,M.U9)(j.start,"00:00"),to:(0,M.U9)(j.end,"00:00")},deliveryDate:J,deliveryBonus:0,deliveryPrice:j.deliveryPrice,deliveryTermsLink:(0,g.qC)(j.deliveryTermsLink||""),maxDeliveryDays:null,paymentMethods:(0,y.yT)(j.paymentTypes,!1),possiblePaymentMethods:(0,y.us)(j.possiblePaymentTypes,!1)}}const A=H.deliveryIntervals.reduce((j,J)=>{const re=(0,M.tC)(J.start,"1970-01-01"),Pe=j.length;return Pe&&j[Pe-1].deliveryDate===re?j[Pe-1].deliveryIntervalList.push(B(J,re)):j.push({deliveryDate:re,deliveryIntervalList:[B(J,re)]}),j},[]);return{parcelOptions:{allInOne:{items:[],intervals:A},asap:[]},replaceOptions:(I=H.orderOptions)==null?void 0:I.map(j=>j.id),payment:{paymentMethods:[],possiblePaymentMethods:[],paymentInformation:H.paymentInformation},installmentDiscountAmount:H.installmentDiscountAmount}})}accept(c){return r(this,null,function*(){var I;const{params:N,validationErrors:H}=(0,f.R6)(c,this.cookie),F=l(P({},N),{orderOptions:[]});if(F.deliveryType=E.lF.Cnd,F.deliveries=c.delivery.parcels.map(A=>({id:A.id,date:A.deliveryDate,timeSlot:A.timeSlot})),F?.address&&(0,f.w8)(F?.address)&&(F.address.addressId=""),F.orderOptions=[],(I=c?.delivery)!=null&&I.replaceOption&&F.orderOptions.push(c.delivery.replaceOption),F.deliveries.length||H.push({title:"\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u0430 \u0434\u0430\u0442\u0430 \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438",detail:"\u0412\u044B \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043B\u0438 \u0434\u0430\u0442\u0443 \u0438 \u0432\u0440\u0435\u043C\u044F \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0438",field:f.Pn.DeliveryDateTimeUndefined,code:f.Pn.DeliveryDateTimeUndefined}),H.length)throw new o.z3(H);const B=yield this.mgate.fetch("/api/mobile/v2/checkoutService/checkout/accept",F);return B.success||(0,o.XO)(B.errors),F.customer.email&&(0,R.Zl)(F.customer.email),B})}}},31807:function(de,Y,n){n.d(Y,{Z8:function(){return g},ZP:function(){return E}});var w=n(53869),G=n(34853),L=n(8952),M=(y,f,o)=>new Promise((i,m)=>{var O=p=>{try{D(o.next(p))}catch(_){m(_)}},s=p=>{try{D(o.throw(p))}catch(_){m(_)}},D=p=>p.done?i(p.value):Promise.resolve(p.value).then(O,s);D((o=o.apply(y,f)).next())}),g=(y=>(y.Unknown="UNKNOWN_CREDIT_PRODUCT",y.Credit="CREDIT_CREDIT_PRODUCT",y.Installment="INSTALLMENT_CREDIT_PRODUCT",y.Bnpl="BNPL_CREDIT_PRODUCT",y))(g||{});class R extends Error{constructor(){super(`${G.QI.Checkout} Can not get credit rate list`),Object.setPrototypeOf(this,R.prototype)}}class T extends Error{constructor(){super(`${G.QI.Checkout} Can not get credit rate list`),Object.setPrototypeOf(this,T.prototype)}}class E{constructor(f=(0,w.inject)(L.ZP)){this.mgate=f}getCreditRateList(f){return M(this,null,function*(){const o=yield this.mgate.fetch("/api/mobile/v1/paymentInfoService/creditRate/list",f);if(!o.success)throw new R;return o})}getBnplCalculationOptions(){return M(this,null,function*(){const f=yield this.mgate.fetch("/api/mobile/v1/checkoutService/bnplCalculationOptions/get");if(!f.success)throw new T;return f})}}},1326:function(de,Y,n){n.d(Y,{KK:function(){return _},o8:function(){return P},ZP:function(){return l}});var w=n(53869),G=n(8952),L=n(45037),M=n(48730),g=n(79718),R=n(58897),T=n(47207),E=Object.defineProperty,y=Object.defineProperties,f=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,O=(r,e,d)=>e in r?E(r,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[e]=d,s=(r,e)=>{for(var d in e||(e={}))i.call(e,d)&&O(r,d,e[d]);if(o)for(var d of o(e))m.call(e,d)&&O(r,d,e[d]);return r},D=(r,e)=>y(r,f(e)),p=(r,e,d)=>new Promise((h,v)=>{var a=I=>{try{c(d.next(I))}catch(N){v(N)}},u=I=>{try{c(d.throw(I))}catch(N){v(N)}},c=I=>I.done?h(I.value):Promise.resolve(I.value).then(a,u);c((d=d.apply(r,e)).next())}),_=(r=>(r.Fitting="fitting",r))(_||{});function P(r){return r?.deliveryType&&r?.delivery&&r.deliveryType===g.lF.Pickup}class l{constructor(e=(0,w.inject)(G.ZP),d=(0,w.inject)(M.Z)){this.mgate=e,this.cookie=d}accept(e){return p(this,null,function*(){const{params:d,validationErrors:h}=(0,R.R6)(e,this.cookie),v=D(s({},d),{orderOptions:[]});if(v.goaAgreement=e.stockWarranty,P(e)){if(v.deliveryType=g.lF.Pickup,v.address={id:e.delivery.pickupPointId},e.delivery.parcels){const u=e.delivery.parcelType==="allInOne"?0:1;v.deliveries=e.delivery.parcels.map(c=>({id:c.id,shipmentType:u,date:c.deliveryDate}))}v.address.id||h.push({title:"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D \u043F\u0443\u043D\u043A\u0442 \u0432\u044B\u0434\u0430\u0447\u0438",detail:"\u0412\u044B \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043B\u0438 \u043F\u0443\u043D\u043A\u0442 \u0432\u044B\u0434\u0430\u0447\u0438",field:R.Pn.PickupPointUndefined,code:R.Pn.PickupPointUndefined})}if(e.orderOptions&&(v.orderOptions=e.orderOptions),h.length)throw new T.z3(h);const a=yield this.mgate.fetch("/api/mobile/v2/checkoutService/checkout/accept",v);return a.success||(0,T.XO)(a.errors),v.customer.email&&(0,L.Zl)(v.customer.email),a})}}},89947:function(de,Y,n){n.d(Y,{gb:function(){return P},Pj:function(){return l},ZP:function(){return e}});var w=n(53869),G=n(34853),L=n(8952),M=n(55740),g=n(32330),R=n(79718),T=n(8242),E=n(6444),y=Object.defineProperty,f=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,s=(d,h,v)=>h in d?y(d,h,{enumerable:!0,configurable:!0,writable:!0,value:v}):d[h]=v,D=(d,h)=>{for(var v in h||(h={}))m.call(h,v)&&s(d,v,h[v]);if(i)for(var v of i(h))O.call(h,v)&&s(d,v,h[v]);return d},p=(d,h)=>f(d,o(h)),_=(d,h,v)=>new Promise((a,u)=>{var c=H=>{try{N(v.next(H))}catch(F){u(F)}},I=H=>{try{N(v.throw(H))}catch(F){u(F)}},N=H=>H.done?a(H.value):Promise.resolve(H.value).then(c,I);N((v=v.apply(d,h)).next())});class P extends Error{constructor(h){super(`${G.QI.Checkout} Unsuccessful delivery options request`),this.errors=h,Object.setPrototypeOf(this,P.prototype)}}class l extends Error{constructor(h,v){super(`${G.QI.Checkout} Unsuccessful delivery calculate request`),this.errors=h,this.errorCartItems=v,Object.setPrototypeOf(this,l.prototype)}}function r(d,h,v,a){var u;const c={appliedPromotionTags:[],calculationErrors:[]};(u=d.variants)==null||u.forEach(A=>{const j=A.loyalty;if(!j)return;const{appliedPromotionTags:J,calculationErrors:re}=c;j.appliedPromotionTags.forEach(Pe=>{J.includes(Pe)||J.push(Pe)}),j.calculationErrors.forEach(Pe=>{re.find(De=>De.code===Pe.code&&De.title===Pe.title)||re.push(Pe)})});const I=(d?.cartItems||[]).map(A=>({id:A.id,goodsId:A.goods.goodsId,name:A.goods.title,slug:A.goods.slug,image:A.goods.titleImage,merchantName:A.merchant.name,comboId:A?.comboId||"",price:parseFloat(A.price)||0,bonus:A?.chargedBonus||0,quantity:A.quantity})),N=(d?.variants||[]).reduce((A,j)=>{const J=j.arrival.timeSlots.map(re=>{var Pe;return{id:j.id,start:j.arrival.date,end:j.arrival.date,deliveryDate:j.arrival.date,deliveryPrice:j.deliveryPrice,deliveryBonus:j?.chargedBonus||0,deliveryTermsLink:(0,M.qC)(j.deliveryTermsLink||""),maxDeliveryDays:(Pe=j.arrival)==null?void 0:Pe.maxDeliveryDays,timeSlot:re,paymentMethods:v,possiblePaymentMethods:a}});return(0,g.O)(J)&&A.push({deliveryDate:j.arrival.date,deliveryIntervalList:J}),A},[]),H=(d?.variants||[]).map(A=>{var j;return{deliveryDate:A.arrival.date,deliveryIntervalList:[{id:A.id,start:A.arrival.date,end:A.arrival.date,timeSlot:{from:"00:00",to:"00:00"},deliveryDate:A.arrival.date,deliveryPrice:A.deliveryPrice,deliveryBonus:A?.chargedBonus||0,deliveryTermsLink:(0,M.qC)(A.deliveryTermsLink||""),maxDeliveryDays:(j=A.arrival)==null?void 0:j.maxDeliveryDays,paymentMethods:v,possiblePaymentMethods:a}]}}),F=h===R.lF.Pickup?H:N.flatMap(A=>A),B=d.deliveryOptions||[];return{loyalty:c,items:I,intervals:F,deliveryOptions:B}}class e{constructor(h=(0,w.inject)(L.ZP)){this.mgate=h}getDeliveryOptions(h){return _(this,null,function*(){const v=yield this.mgate.fetch("/api/mobile/v2/checkoutService/deliveryMethod/list",{locationIds:[h.regionId],identification:{id:h.cartId},isSelectedCartItemGroupsOnly:h.isSelectedCartItemGroupsOnly});if(!v.success)throw new P(v.errors);return v.methods.map(a=>({type:a.code,deliveryOptions:a.deliveryOptions||[],minDate:a.date,minPrice:a.amount,lastAddress:a.lastAddress||void 0,isDefault:!!a.isDefault,loyalty:a.loyalty}))})}calculateDelivery(h){return _(this,null,function*(){const v={identification:{id:h.cartId},isSelectedCartItemGroupsOnly:h.isSelectedCartItemGroupsOnly,calculateOptions:h.calculateOptions};function a(H){return H.hasOwnProperty("pickupPointId")}a(h)?(v.deliveryType=R.lF.Pickup,v.address={id:h.pickupPointId}):(v.deliveryType=R.lF.Courier,v.address={addressFull:h.addressFull,addressId:h.addressId});const u=yield this.mgate.fetch("/api/mobile/v2/checkoutService/checkout/calculate",v);if(!u.success)throw new l(u.errors,u.errorCartItems);const c=yield(0,T.Qt)(),I=(0,E.yT)(u.paymentType,c),N=(0,E.us)(u.possiblePaymentTypes,c);return{parcelOptions:{allInOne:r(u.AONEItem,v.deliveryType,I,N),asap:u.ASAPItems&&u.ASAPItems.map(H=>r(H,v.deliveryType,I,N))||[]},payment:{paymentMethods:I,paymentInformation:p(D({},u.paymentInformation),{timestamp:u.meta.time}),possiblePaymentMethods:N},installmentDiscountAmount:u.installmentDiscountAmount}})}}},79351:function(de,Y,n){n.d(Y,{Kp:function(){return w},fn:function(){return G},NB:function(){return L},IN:function(){return M}});var w=(g=>(g.OnDemand="ON_DEMAND",g.Fitting="FITTING",g))(w||{}),G=(g=>(g.SberPrime="LCE_sber_prime",g))(G||{}),L=(g=>(g.SberPrime="DELIVERY_APPLIED_PROMOTION_TAG_SBER_PRIME",g))(L||{}),M=(g=>(g[g.OffersOrStocksError=101]="OffersOrStocksError",g[g.MaxWeightError=104]="MaxWeightError",g[g.MinSumError=108]="MinSumError",g))(M||{})},17066:function(de,Y,n){n.d(Y,{Z:function(){return E}});var w=n(53869),G=n(8952),L=n(45037),M=n(48730),g=n(58897),R=n(47207),T=(y,f,o)=>new Promise((i,m)=>{var O=p=>{try{D(o.next(p))}catch(_){m(_)}},s=p=>{try{D(o.throw(p))}catch(_){m(_)}},D=p=>p.done?i(p.value):Promise.resolve(p.value).then(O,s);D((o=o.apply(y,f)).next())});class E{constructor(f=(0,w.inject)(G.ZP),o=(0,w.inject)(M.Z)){this.mgate=f,this.cookie=o}accept(f){return T(this,null,function*(){const{params:o,validationErrors:i}=(0,g.R6)(f,this.cookie);if(i.length)throw new R.z3(i);const m=yield this.mgate.fetch("/api/mobile/v2/checkoutService/checkout/accept",o);return m.success||(0,R.XO)(m.errors),o.customer.email&&(0,L.Zl)(o.customer.email),m})}}},48535:function(de,Y,n){n.d(Y,{Z:function(){return R}});var w=n(53869),G=n(34853),L=n(8952),M=(T,E,y)=>new Promise((f,o)=>{var i=s=>{try{O(y.next(s))}catch(D){o(D)}},m=s=>{try{O(y.throw(s))}catch(D){o(D)}},O=s=>s.done?f(s.value):Promise.resolve(s.value).then(i,m);O((y=y.apply(T,E)).next())});class g extends Error{constructor(E){super(`${G.QI.Checkout} Unsuccessful finish order`),this.errors=E,Object.setPrototypeOf(this,g.prototype)}}class R{constructor(E=(0,w.inject)(L.ZP)){this.mgate=E}finishOrder(E){return M(this,arguments,function*({cartId:y,orderId:f,isFailure:o,isSelectedCartItemGroupsOnly:i}){const m=yield this.mgate.fetch("/api/mobile/v2/checkoutService/checkout/finish",{identification:{id:y},orderId:f,isFailure:o,isSelectedCartItemGroupsOnly:i});if(!m.success)throw new g(m.errors);return m})}}},77156:function(de,Y,n){n.d(Y,{Z:function(){return P}});var w=n(53869),G=n(8952),L=n(66129),M=n(26262),g=n(55466),R=n(6444),T=Object.defineProperty,E=Object.defineProperties,y=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,m=(l,r,e)=>r in l?T(l,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[r]=e,O=(l,r)=>{for(var e in r||(r={}))o.call(r,e)&&m(l,e,r[e]);if(f)for(var e of f(r))i.call(r,e)&&m(l,e,r[e]);return l},s=(l,r)=>E(l,y(r)),D=(l,r,e)=>new Promise((d,h)=>{var v=c=>{try{u(e.next(c))}catch(I){h(I)}},a=c=>{try{u(e.throw(c))}catch(I){h(I)}},u=c=>c.done?d(c.value):Promise.resolve(c.value).then(v,a);u((e=e.apply(l,r)).next())});const p={BOXBERRY:"Boxberry",MVIDEO:"\u041C.\u0412\u0438\u0434\u0435\u043E",PICKPOINT:"PickPoint",PIK:"\u041F\u0418\u041A",RDI:"RDI",ELDORADO:"\u042D\u043B\u044C\u0434\u043E\u0440\u0430\u0434\u043E"};function _(l){const r=l.provider&&l.provider.split("#")[0]||"";return{id:(l.id||l.locationId).toString()||"",geo:(0,g.tL)(l.geoLat||l.latitude,l.geoLon||l.longitude),type:l.type||M.wf.PickupPoint,typeName:l.type&&l.type===M.wf.ParcelLocker?"\u041F\u043E\u0441\u0442\u0430\u043C\u0430\u0442":"\u041F\u0443\u043D\u043A\u0442 \u0432\u044B\u0434\u0430\u0447\u0438",providerName:p[r]||"",markerIconUrl:l.markerIconUrl||"",provider:r,iconUrl:l.iconUrl||"",storagePeriod:""}}class P{constructor(r=(0,w.inject)(G.ZP)){this.mgate=r}getMapObjects(r){return D(this,null,function*(){const{bounds:e,zoomLevel:d,filters:h}=r,v=r.cartId?{identification:{id:r.cartId}}:{},a={lowerLeft:{lat:e.lowerLeft.lat.toString(),lon:e.lowerLeft.lon.toString()},upperRight:{lat:e.upperRight.lat.toString(),lon:e.upperRight.lon.toString()}},u=Math.ceil(d),c=yield this.mgate.fetch("/api/mobile/v1/pickupPointService/pickupPoint/search",s(O({},v),{filters:h.map(B=>({id:B})),bounds:a,zoomLevel:u,isSelectedCartItemGroupsOnly:r.isSelectedCartItemGroupsOnly})),I=c.comboPoints.reduce((B,A)=>{const j=`combo-id${A.geo.lat}-${A.geo.lon}`;for(const J of A.points)B.push(s(O({},J),{comboPointId:j}));return B},[]),H=[...c.points,...I].map(B=>{const A=c.providers.find(j=>B.providerId===j.id);return{id:B.id||"",geo:(0,g.tL)(B.geo.lat,B.geo.lon),type:B.type||M.wf.PickupPoint,typeName:B.type&&B.type===M.wf.ParcelLocker?"\u041F\u043E\u0441\u0442\u0430\u043C\u0430\u0442":"\u041F\u0443\u043D\u043A\u0442 \u0432\u044B\u0434\u0430\u0447\u0438",providerName:A?.name||"",markerIconUrl:A?.markerIconUrl||"",provider:A?.id||"",iconUrl:A?.iconUrl||"",storagePeriod:A?.storagePeriod||"",fitting:A?.fitting||!1,comboPointId:B.comboPointId}}),F=c.clusters.map(B=>({id:`${B.geo.lat}-${B.geo.lon}:${B.quantity}`,geo:(0,g.tL)(B.geo.lat,B.geo.lon),clusterPointsQuantity:B.quantity,clusterPointsPrice:"",bounds:{upperRight:(0,g.tL)(B.bounds.upperRight.lat,B.bounds.upperRight.lon),lowerLeft:(0,g.tL)(B.bounds.lowerLeft.lat,B.bounds.lowerLeft.lon)}}));return{mapObjects:[...H,...F],filters:c.filters,optionalFilters:c.optionalFilters,total:c.total}})}getPickupPoints(r){return D(this,arguments,function*(e,d=[],h){return(yield this.mgate.fetch("/api/mobile/v2/checkoutService/pickupPoint/search",{identification:{id:e},isSelectedCartItemGroupsOnly:h,filters:d.map(u=>({id:u}))})).pickupPoints.filter(u=>u.geoLon&&u.geoLat).map(u=>_(u))})}getPickupPointDetails(r,e,d,h){return D(this,null,function*(){const v=(yield this.mgate.fetch("/api/mobile/v2/checkoutService/pickupPoint/get",{locationIds:r,isDeliveryInformationRequired:d,identification:{id:e},isSelectedCartItemGroupsOnly:h})).pickupPoints;for(const a of Object.keys(v)){const u=v[a],c=[R.XL.Online];u.prepaidOrdersOnly||c.push(...u.paymentMethods),v[a]=_(u),v[a].minDeliveryDate=u.minDeliveryDate,v[a].deliveryPrice=parseFloat(u.deliveryAmount)||0,v[a].description=u.description||"",v[a].address=u.address||"",v[a].phone=u.phone||"",v[a].postalCode=u.postcode||"",v[a].title=u.title||"",v[a].name=u.name||"",v[a].iconUrl=u.iconUrl||"",v[a].workSchedule={short:(0,L.Z)(u,["workSchedule","short"])||"",weekDays:(0,L.Z)(u,["workSchedule","verbose"])||(0,L.Z)(u,["workSchedule","weekDays"])||[]},v[a].paymentMethods=c,v[a].storagePeriod=u.storagePeriod||"",v[a].fitting=u.fitting||!1,v[a].onlyPrepaid=u.prepaidOrdersOnly,v[a].isValidForCart=u.isValidForCart,v[a].partPurchase=u.partPurchase}return v})}getPickupPointDetailsById(r,e){return D(this,null,function*(){return(yield this.getPickupPointDetails([r],"",!1,e))[r]})}getPickupPointFilters(){return D(this,null,function*(){return(yield this.mgate.fetch("/api/mobile/v1/checkoutService/pickupPoint/getFilters")).filters})}}},26262:function(de,Y,n){n.d(Y,{wf:function(){return w},l_:function(){return G},C4:function(){return L}});var w=(M=>(M.PickupPoint="PICKUP_POINT",M.ParcelLocker="POSTMATE",M.Mvideo="MVIDEO",M.RussianPost="RUSSIANPOST",M))(w||{}),G=(M=>(M[M.Loading=0]="Loading",M[M.NotAvailable=1]="NotAvailable",M[M.Available=2]="Available",M))(G||{}),L=(M=>(M.DeliveryPage="DELIVERY_PAGE",M))(L||{})},28847:function(de,Y,n){n.d(Y,{OY:function(){return _},z:function(){return P},ZP:function(){return l}});var w=n(53869),G=n(34853),L=n(8952),M=n(27338),g=n(79718),R=n(5756),T=Object.defineProperty,E=Object.defineProperties,y=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,m=(r,e,d)=>e in r?T(r,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[e]=d,O=(r,e)=>{for(var d in e||(e={}))o.call(e,d)&&m(r,d,e[d]);if(f)for(var d of f(e))i.call(e,d)&&m(r,d,e[d]);return r},s=(r,e)=>E(r,y(e)),D=(r,e)=>{var d={};for(var h in r)o.call(r,h)&&e.indexOf(h)<0&&(d[h]=r[h]);if(r!=null&&f)for(var h of f(r))e.indexOf(h)<0&&i.call(r,h)&&(d[h]=r[h]);return d},p=(r,e,d)=>new Promise((h,v)=>{var a=I=>{try{c(d.next(I))}catch(N){v(N)}},u=I=>{try{c(d.throw(I))}catch(N){v(N)}},c=I=>I.done?h(I.value):Promise.resolve(I.value).then(a,u);c((d=d.apply(r,e)).next())});class _ extends Error{constructor(e){super(`${G.QI.Checkout} Unsuccessful payment calculate request`),this.errors=e,Object.setPrototypeOf(this,_.prototype)}}function P(r){var e;return(e=r?.reduce((d,h)=>{const v=(0,M.NM)(h.context);if(v&&h.type===R.l4.PaymentType){const a=h,{amount:u,percent:c}=a,I=D(a,["amount","percent"]);d[v]=s(O({},I),{info:{value:u,percent:c}})}return d},{}))!=null?e:null}class l{constructor(e=(0,w.inject)(L.ZP)){this.mgate=e}calculatePayment(e){return p(this,null,function*(){const d={identification:{id:e.cartId},discounts:e.discounts};"pickupPointId"in e?(d.paymentInformation={paymentType:e.paymentType},d.deliveryType=g.lF.Pickup,d.address={id:e.pickupPointId},d.deliveries=e.deliveries):"addressId"in e&&(d.paymentInformation={paymentType:e.paymentType},d.deliveryType=g.lF.Courier,d.address={addressFull:e.addressFull,addressId:e.addressId},d.deliveries=e.deliveries);const h=yield this.mgate.fetch("/api/mobile/v3/checkoutService/checkout/calculate",d),{paymentInformation:v,meta:a}=h,u=D(h,["paymentInformation","meta"]);if(!u.success)throw new _(u.errors);return s(O({},u),{paymentInformation:v?s(O({},v),{timestamp:a.time}):null})})}}},25833:function(de,Y,n){n.d(Y,{Z:function(){return w},f:function(){return G}});var w=(L=>(L.BpgError="cx-backend-mgate-checkout-loyalty-bpg-error",L.PromoError="cx-backend-mgate-checkout-loyalty-promocode-error",L.BonusError="cx-backend-mgate-checkout-loyalty-bonus-error",L))(w||{});const G=Object.values(w)},72956:function(de,Y,n){n.d(Y,{PZ:function(){return P},bX:function(){return l},K0:function(){return r},Uc:function(){return e},_2:function(){return d},DQ:function(){return h},TS:function(){return v},M$:function(){return a},KB:function(){return u},ZP:function(){return H}});var w=n(53869),G=n(8952),L=n(98781),M=n(72627),g=n(79718),R=n(55466),T=n(5756),E=n(6444),y=Object.defineProperty,f=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,s=(F,B,A)=>B in F?y(F,B,{enumerable:!0,configurable:!0,writable:!0,value:A}):F[B]=A,D=(F,B)=>{for(var A in B||(B={}))m.call(B,A)&&s(F,A,B[A]);if(i)for(var A of i(B))O.call(B,A)&&s(F,A,B[A]);return F},p=(F,B)=>f(F,o(B)),_=(F,B,A)=>new Promise((j,J)=>{var re=ge=>{try{De(A.next(ge))}catch(fe){J(fe)}},Pe=ge=>{try{De(A.throw(ge))}catch(fe){J(fe)}},De=ge=>ge.done?j(ge.value):Promise.resolve(ge.value).then(re,Pe);De((A=A.apply(F,B)).next())}),P=(F=>(F.Cnc="COLLECT_BY_CUSTOMER",F.Cnd="DELIVERY",F.Dsm="DELIVERY_BY_MERCHANT",F.Dbg="DELIVERY_BY_GOODS",F))(P||{}),l=(F=>(F.Supermarket="Supermarket",F))(l||{}),r=(F=>(F.Unknown="UNKNOWN",F.Promo="PROMO_PAGE",F.Cnx="CLICK_COLLECT",F))(r||{});class e extends Error{constructor(B,A){super(`[CNX] Missing required parameter ${B} in ${A}`),this.field=B,this.method=A,Object.setPrototypeOf(this,e.prototype)}}class d extends Error{constructor(B,A){super(`[CND] Delivery unavailable ${JSON.stringify(B)} in ${A}`),this.errors=B,this.method=A,Object.setPrototypeOf(this,d.prototype)}}class h extends Error{constructor(B,A){super(`[CND] Location calculate exception ${JSON.stringify(B)} in ${A}`),this.errors=B,this.method=A,Object.setPrototypeOf(this,h.prototype)}}var v=(F=>(F.Region="CNC_STOCK_FILTER_REGION",F.Merchant="CNC_STOCK_FILTER_MERCHANT",F.MinPrice="CNC_STOCK_FILTER_MIN_PRICE",F.SberSpasibo="CNC_STOCK_FILTER_SBER_SPASIBO",F.Nearest="CNC_STOCK_FILTER_THE_NEAREST",F.NotDisplayItem="CNC_STOCK_FILTER_NOT_DISPLAY_ITEM",F))(v||{});function a(F){return{[T.EI.Default]:"DELIVERY_BY_GOODS",[T.EI.Digital]:"DELIVERY_BY_GOODS",[T.EI.Dsm]:"DELIVERY_BY_MERCHANT",[T.EI.Cnc]:"COLLECT_BY_CUSTOMER",[T.EI.Cnd]:"DELIVERY"}[F]}function u(F){return{DELIVERY_BY_GOODS:T.EI.Default,DELIVERY_BY_MERCHANT:T.EI.Dsm,COLLECT_BY_CUSTOMER:T.EI.Cnc,DELIVERY:T.EI.Cnd}[F]}function c(F){const B=[];return F?.cash&&B.push(E.tm.Cash),F?.bankCards&&B.push(E.tm.Card),F?.spasibo&&B.push(E.tm.PrepaySpasibo),F?.prepayOnline&&!F.spasibo&&B.push(E.tm.PrepayOnline),B}function I(F,B){return[B?.locationId?F.locationId===B.locationId:!0,B?.serviceScheme?F.serviceScheme===B.serviceScheme:!0].every(j=>j)}function N(F,B){var A,j,J,re,Pe,De,ge,fe,x,ee;return{id:F.identification.id,logo:((A=F?.shopDesign)==null?void 0:A.logoUrl)||"",caption:F.location.caption,locationId:F.identification.id,merchantId:F.merchantId,serviceScheme:F.serviceScheme,geo:(0,R.tL)(((J=(j=F?.location)==null?void 0:j.geo)==null?void 0:J.lat)||0,((Pe=(re=F?.location)==null?void 0:re.geo)==null?void 0:Pe.lon)||0),location:{id:F.identification.id,name:F.location.caption,address:F.location.address.label||F.location.address.PostalCode+" "+(F.location.address.Cleared||F.location.address.Source),metro:(ge=(De=F.location)==null?void 0:De.directions)!=null&&ge.metro?[F.location.directions.metro]:null,worktime:F.location.schedule},shopIndex:{type:"CLICK_COLLECT",slug:"",collectionId:"",locationId:F.identification.id},merchant:{id:F.merchantId,name:F.location.caption,logo:((fe=F?.shopDesign)==null?void 0:fe.logoUrl)||""},price:F.price,oldPrice:F.oldPrice,product:{goodsId:B?.goodsId||"",comboId:(0,g.un)({goodsId:B?.goodsId||"",merchantId:F.merchantId,warehouseId:F.identification.id}),price:F.price,maxQuantity:F.remainQty,title:((x=F.goodsInfo)==null?void 0:x.title)||"",titleImage:((ee=F.goodsInfo)==null?void 0:ee.titleImage)||"",bonusInfo:F?.bonusInfo,isShowcase:F.isShowcase},delivery:{slaText:F.location.slaText,date:null,timeSlot:null,price:null},paymentTypes:c(F.paymentTypes)}}class H{constructor(B=(0,w.inject)(G.ZP),A=(0,w.inject)(M.Z)){this.mgate=B,this.userStore=A}fetchStocks(B){return _(this,null,function*(){if(!B?.goodsId)throw new e("goodsId","getCnxStocks");const A=yield this.mgate.fetch("api/mobile/v1/cncService/stock/get",{goods:{goodsId:B.goodsId,merchantId:B?.merchantId},selectedFilters:B?.selectedFilters||[]});return{items:A.stocks.map(re=>N(re,B)).filter(re=>I(re,B)),filters:A.filters||[]}})}fetchStocksGeoClusters(B){return _(this,null,function*(){const{mapBounds:A}=B,j=(()=>{const fe={};return B?.serviceScheme&&(fe.serviceScheme=B.serviceScheme),(0,R.FP)(B?.userGeo)&&(fe.geo=B.userGeo),fe})(),J=yield this.mgate.fetch("/api/mobile/v1/cncService/stock/clusteredGet",{goods:{goodsId:B.goodsId,merchantId:B?.merchantId},bounds:{lowerLeft:{lat:`${A.lowerLeft.lat}`,lon:`${A.lowerLeft.lon}`},upperRight:{lat:`${A.upperRight.lat}`,lon:`${A.upperRight.lon}`}},zoomLevel:Math.ceil(B.mapZoom),context:j,selectedFilters:B?.selectedFilters||[]}),re=J.stocks.map(fe=>N(fe,B)),Pe=J.listStocks.map(fe=>N(fe,B)),De=J.clusters.map(fe=>({id:`${fe.geo.lat}-${fe.geo.lon}:${fe.quantity}`,geo:(0,R.tL)(fe.geo.lat,fe.geo.lon),clusterPointsQuantity:fe.quantity,clusterPointsPrice:fe.price||"",bounds:{upperRight:(0,R.tL)(fe.bounds.upperRight.lat,fe.bounds.upperRight.lon),lowerLeft:(0,R.tL)(fe.bounds.lowerLeft.lat,fe.bounds.lowerLeft.lon)}})),ge=J.filters.map(fe=>p(D({},fe),{variants:fe.variants.sort((x,ee)=>String(x.displayName).localeCompare(String(ee.displayName))||String(x.value).localeCompare(String(ee.value)))}));return{items:[...De,...re],listStocks:Pe,filters:ge,requestId:B?.requestId}})}fetchStocksByAddress(B){return _(this,null,function*(){if(new Set(B.items.map(J=>J.merchantId)).size===0)throw new e("merchantId","fetchStocksByAddress");const j=yield this.mgate.fetch("api/mobile/v2/cncService/stock/search",D({},B));if(!j.success||!j.items.length)throw new d(j.errors,"fetchStocksByAddress");return j.items})}fetchLocationsByFilter(B){return _(this,null,function*(){if(!B?.serviceScheme)throw new e("serviceScheme","fetchLocationsByFilter");const A={serviceScheme:Array.isArray(B.serviceScheme)?B.serviceScheme:[B.serviceScheme],flags:B?.flags||[],merchantCategoriesIds:B.merchantCategoriesIds||[]};if((0,R.FP)(B?.geo)){const{geo:re}=B;A.deliveryAddress={geoLat:re.lat,geoLon:re.lon}}const{merchantCategories:j}=yield this.mgate.fetch("api/mobile/v1/widgetService/supermarkets/get",A),J=[];for(let re=0;re<j.length;re++){let Pe=[];const De=j[re];Pe=De.locations.map(ge=>{const{locationInfo:fe}=ge,x=fe?.shopIndex||{},[ee]=ge?.locationSchemes||[],ae=ee.deliveryIntervals[0]||null;return{id:fe.locationId,categories:fe.merchantCategories,logo:fe.imageUrl||"",caption:fe.caption,locationId:fe.locationId,merchantId:fe.merchantId,geo:fe.geo,minOrderPrice:fe.minOrderPrice,serviceScheme:ee.serviceScheme,shopIndex:{type:x?.type||"CLICK_COLLECT",slug:x.slug,collectionId:x.collectionId,locationId:fe.locationId},location:{id:fe.locationId,name:fe.caption,address:fe.address,metro:[],worktime:""},merchant:{id:fe.merchantId,name:fe.caption,logo:fe.imageUrl||""},delivery:ae?{date:(0,L.tC)(ae.start)||null,timeSlot:{from:(0,L.U9)(ae.start,"00:00"),to:(0,L.U9)(ae.end,"00:00")},slaText:ae.slaText,price:null}:null,paymentTypes:ae?(0,E.YQ)(ae.paymentTypes):[],cart:ge.cart}}).filter(ge=>I(ge,B)),Pe=Pe,J.push(p(D({},De),{locations:Pe}))}return J})}calculateLocations(B){return _(this,null,function*(){var A;const j=this.userStore.currentItemId,J=yield this.mgate.fetch("api/mobile/v1/cncService/location/calculate",{locationIds:Array.isArray(B)?B:[B],addressId:j});if(!J.success&&((A=J.errors)!=null&&A.length))throw new h(J.errors,"calculateLocations");if(!J.success)throw J;return J.locations})}fetchLocations(B){return _(this,null,function*(){if(!B||B.length===0)throw new Error("\u041D\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u043D\u044B id \u0442\u043E\u0447\u0435\u043A \u0432 location/get");const A=(yield this.mgate.fetch("api/mobile/v2/cncService/location/get",{locationIds:Array.isArray(B)?B:[B]})).locations||[];function j(re){var Pe,De;if(re.geo=(0,R.tL)(re.geo.lat,re.geo.lon),re.simplePaymentTypes=c(re?.paymentTypes||{}),(Pe=re.location)!=null&&Pe.geo&&(re.location.geo=(0,R.tL)(re.location.geo.lat,re.location.geo.lon)),(De=re.location)!=null&&De.address&&(re.location.address.source=re.location.address.Source,re.location.address.cleared=re.location.address.Cleared,re.location.address.postalCode=re.location.address.PostalCode,delete re.location.address.Source,delete re.location.address.Cleared,delete re.location.address.PostalCode),re.shopIndex){const ge=re.shopIndex;re.shopIndex={type:ge.type,slug:ge.slug,collectionId:ge.collectionId,locationId:re.locationId}}return re}const J={};return A.forEach(re=>{J[re.locationId]=j(re)}),J})}fetchLocationById(B){return new Promise((A,j)=>_(this,null,function*(){try{const J=yield this.fetchLocations([B]);J[B]||j(new Error(`\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430 CNX-\u0422\u043E\u0447\u043A\u0430 \u0441 ID: ${B}`)),A(J[B])}catch(J){j(J)}}))}}},49113:function(de,Y,n){n.d(Y,{I4:function(){return s},Km:function(){return D},ZP:function(){return P}});var w=n(53869),G=n(8952),L=n(79718),M=n(65363),g=Object.defineProperty,R=Object.defineProperties,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,o=(l,r,e)=>r in l?g(l,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[r]=e,i=(l,r)=>{for(var e in r||(r={}))y.call(r,e)&&o(l,e,r[e]);if(E)for(var e of E(r))f.call(r,e)&&o(l,e,r[e]);return l},m=(l,r)=>R(l,T(r)),O=(l,r,e)=>new Promise((d,h)=>{var v=c=>{try{u(e.next(c))}catch(I){h(I)}},a=c=>{try{u(e.throw(c))}catch(I){h(I)}},u=c=>c.done?d(c.value):Promise.resolve(c.value).then(v,a);u((e=e.apply(l,r)).next())}),s=(l=>(l.SingleValue="SINGLE_VALUE_BLOCK",l.Rating="RATING_BLOCK",l))(s||{});class D extends Error{constructor(r){super("Goods compare error"),this.errors=r,Object.setPrototypeOf(this,D.prototype)}}class p extends Error{constructor(r){super(r[0].userMsg||"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430"),this.errors=r,Object.setPrototypeOf(this,p.prototype)}}class _ extends Error{constructor(r){super(r[0].userMsg||"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430"),this.errors=r,Object.setPrototypeOf(this,_.prototype)}}class P{constructor(r=(0,w.inject)(G.ZP)){this.mgate=r}fetchCompareData(r){return O(this,null,function*(){const e=yield this.mgate.fetch("api/mobile/v1/comparisonService/goods/compare",r);if(!e.success)throw new D(e.errors);return{comparisonBlocksGroups:e.comparisonBlocksGroups,categories:this.adaptCompareCategories(e.categories)}})}getCompareGoodsIdsList(){return O(this,null,function*(){const r=yield this.mgate.fetch("api/mobile/v1/comparisonService/goods/list");if(!r.success)throw new D(r.errors);return r})}removeGoodsFromCompare(r){return O(this,null,function*(){const e=yield this.mgate.fetch("api/mobile/v1/comparisonService/goods/delete",{goodsIds:r});if(!e.success)throw new p(e.errors);return e})}addGoodToCompare(r){return O(this,null,function*(){const e=yield this.mgate.fetch("api/mobile/v1/comparisonService/goods/add",{goodsId:r});if(!e.success)throw new _(e.errors);return e})}adaptCompareCategories(r){return r.map(e=>m(i({},e),{items:this.adaptCompareItems(e.items)}))}adaptCompareItems(r){return r.map(e=>{var d;return{badges:e.badges,crossedPrice:e.crossedPrice,crossedPricePeriod:e.crossedPricePeriod,hasOtherOffers:e.hasOtherOffers,goods:{goodsId:e.goods.id,categoryId:"",brand:"",title:e.goods.title,stocks:null,titleImage:e.goods.imageItems[0].url||"",images:e.goods.imageItems.map(h=>h.url),slug:e.goods.slug,webUrl:e.goods.url,contentFlags:e.goods.contentFlags,contentFlagsStr:e.goods.contentFlags,photosCount:e.goods.imageItems.length,package:e.goods.package},price:e.favoriteOffer.price,bonusPercent:e.favoriteOffer.bonusPercent,bonusAmount:e.favoriteOffer.bonusAmount,finalPrice:e.favoriteOffer.finalPrice,isAvailable:e.isAvailable,lastPrice:e.lastPrice,comboId:(0,L.un)({goodsId:e.goods.id,merchantId:e.favoriteOffer.merchantId,warehouseId:e.favoriteOffer.warehouseId}),favoriteOffer:this.adaptCompareItemOffer(e.favoriteOffer,e),deliveryPossibilities:e.favoriteOffer.deliveryPossibilities,discounts:e.favoriteOffer.discounts,contentFlags:e.goods.contentFlags,contentFlagsStr:((d=e.goods)==null?void 0:d.contentFlagsStr)||[],offerCount:null}})}adaptCompareItemOffer(r,e){var d,h,v,a;const u=r.discounts.find(c=>c.type==="BPG");return{id:r.id,merchant:{id:r.merchantId||"",name:r.merchantName||"",url:"",design:{logoUrl:""},merchantLogoUrl:r.merchantLogoUrl},loyalty:{amount:r.bonusAmountFinalPrice||r.bonusAmount,percent:r.bonusPercent},offerId:r.id,price:r.price,deliveryPossibilities:r.deliveryPossibilities,isFavorite:r.isFavorite,lastPrice:r.isFavorite&&e?.lastPrice?e.lastPrice:null,finalPrice:r.finalPrice,creditPaymentAmount:r.creditPaymentAmount||0,installmentPaymentAmount:r.installmentPaymentAmount||0,bonusAmountFinalPrice:r.bonusAmountFinalPrice||0,bonusAmount:r.bonusAmount,bonusPercent:r.bonusPercent,bonusInfoGroups:[],oldPrice:r.oldPrice,oldPriceChangePercentage:r.oldPriceChangePercentage,isBpgByMerchant:r.isBpgByMerchant,merchantId:r.merchantId,comboId:(0,L.un)({goodsId:e.goods.id,merchantId:r.merchantId}),locationId:r.locationId||"",hasBpg:!!u,bpgDiscount:u?.amount||0,delivery:{},badges:e.badges,salesBlockInfo:r.salesBlockInfo,salesBlockInfoTitle:(d=r.salesBlockInfo)==null?void 0:d.displayText,salesBlockInfoShortTitle:(h=r.salesBlockInfo)==null?void 0:h.shortTitle,salesBlockInfoOrder:((v=r.salesBlockInfo)==null?void 0:v.order)||0,salesBlockIsSelected:!!((a=r.salesBlockInfo)!=null&&a.isSelected),showMerchant:r.showMerchant,spasiboIsAvailable:!!r.spasiboIsAvailable,bpgType:r.bpgType,dueDate:r.dueDate,pricesPerMeasurement:r.pricesPerMeasurement,availablePaymentMethod:(0,M.aQ)(r.availablePaymentMethods||[]),warehouseId:r.warehouseId,merchantSummaryRating:0}}}},4606:function(de,Y,n){n.d(Y,{v6:function(){return R},iE:function(){return T}});const w="",G=0,L=!1;class M{constructor(y={}){this.apiBaseUrl=w,this.apiMgateBaseUrl=w,this.applePayMerchantId=w,this.buildName=w,this.captchaKey=w,this.disableMarketingScripts=L,this.enableMgateAllLogs=L,this.enableServerApiRequestsKeepAlive=L,this.isLocalProd=L,this.maxApiResponseWaitTime=G,this.paymentAppUrl=w,this.proxyBase=w,this.sentrySamplingRate=G,this.staticBaseUrl=w,this.sentryDsn=w,this.staticExtraUrl=w,this.testToolsEnabled=L,this.voiceAssistantClientKey=w;const f=(s,D)=>typeof s==typeof D,o=s=>f(this[s],y[s])?y[s]:this[s],i=s=>typeof s=="string"?s:w,m=s=>typeof s=="number"?s:G,O=s=>typeof s=="boolean"?s:L;this.apiBaseUrl=i(o("apiBaseUrl")),this.apiMgateBaseUrl=i(o("apiMgateBaseUrl")),this.applePayMerchantId=i(o("applePayMerchantId")),this.buildName=i(o("buildName")),this.captchaKey=i(o("captchaKey")),this.paymentAppUrl=i(o("paymentAppUrl")),this.proxyBase=i(o("proxyBase")),this.staticBaseUrl=i(o("staticBaseUrl")),this.sentryDsn=i(o("sentryDsn")),this.staticExtraUrl=i(o("staticExtraUrl")),this.voiceAssistantClientKey=i(o("voiceAssistantClientKey")),this.disableMarketingScripts=O(o("disableMarketingScripts")),this.enableMgateAllLogs=O(o("enableMgateAllLogs")),this.enableServerApiRequestsKeepAlive=O(o("enableServerApiRequestsKeepAlive")),this.isLocalProd=O(o("isLocalProd")),this.testToolsEnabled=O(o("testToolsEnabled")),this.maxApiResponseWaitTime=m(o("maxApiResponseWaitTime")),this.sentrySamplingRate=m(o("sentrySamplingRate"))}}let g=null;const R=E=>{g=new M(E)},T=()=>{if(g!==null)return g;throw new Error("Config is not initialized! Initialize it before using getConfig function!")}},80113:function(de,Y,n){n.d(Y,{CF:function(){return M},pW:function(){return g},ZP:function(){return T}});var w=n(53869),G=n(8952),L=(E,y,f)=>new Promise((o,i)=>{var m=D=>{try{s(f.next(D))}catch(p){i(p)}},O=D=>{try{s(f.throw(D))}catch(p){i(p)}},s=D=>D.done?o(D.value):Promise.resolve(D.value).then(m,O);s((f=f.apply(E,y)).next())}),M=(E=>(E.Credit="CREDIT_CREDIT_PRODUCT",E.Installment="INSTALLMENT_CREDIT_PRODUCT",E.Bnpl="BNPL_CREDIT_PRODUCT",E))(M||{}),g=(E=>(E.Credit="credit",E.Installment="installment",E.Bnpl="bnpl",E))(g||{});class R extends Error{constructor(y){super("Unsuccessful get credit rate list"),this.errors=y,Object.setPrototypeOf(this,R.prototype)}}class T{constructor(y=(0,w.inject)(G.ZP)){this.mgate=y}getCreditRateList(y){return L(this,null,function*(){const f=yield this.mgate.fetch("/api/mobile/v1/paymentInfoService/creditRate/list",{product:y});if(!f.success)throw new R(f.errors);return f.summary[0]})}}},49005:function(de,Y,n){n.d(Y,{pZ:function(){return g},_Q:function(){return T},at:function(){return E},P$:function(){return y},Vo:function(){return f},CS:function(){return o},_h:function(){return i},ZP:function(){return D}});var w=n(53869),G=n(8952),L=n(20025),M=(p,_,P)=>new Promise((l,r)=>{var e=v=>{try{h(P.next(v))}catch(a){r(a)}},d=v=>{try{h(P.throw(v))}catch(a){r(a)}},h=v=>v.done?l(v.value):Promise.resolve(v.value).then(e,d);h((P=P.apply(p,_)).next())});const g="unauthorizedPostVote",R="unauthorized_vote";var T=(p=>(p.Banned="BANNED",p.Published="PUBLISHED",p.Moderating="MODERATING",p.Unknown="UNKNOWN",p))(T||{}),E=(p=>(p.Banned="\u041E\u0442\u043A\u043B\u043E\u043D\u0435\u043D\u043E",p.Published="\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u043D",p.Moderating="\u041D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0435",p.Unknown="\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E",p))(E||{}),y=(p=>(p[p.Unknown=0]="Unknown",p[p.Newest=1]="Newest",p[p.Oldest=2]="Oldest",p[p.Answered=3]="Answered",p[p.Unanswered=4]="Unanswered",p))(y||{}),f=(p=>(p[p.Useful=1]="Useful",p[p.Useless=2]="Useless",p))(f||{});class o extends Error{constructor(_){super("Unsuccessful get posts"),this.errors=_,Object.setPrototypeOf(this,o.prototype)}}class i extends Error{constructor(_){super("Unsuccessful get posts for lkp"),this.errors=_,Object.setPrototypeOf(this,i.prototype)}}class m extends Error{constructor(_){super("Unsuccessful add question"),this.errors=_,Object.setPrototypeOf(this,m.prototype)}}class O extends Error{constructor(_){super("Unsuccessful add answer"),this.errors=_,Object.setPrototypeOf(this,O.prototype)}}class s extends Error{constructor(_){super("Unsuccessful vote set"),this.errors=_,Object.setPrototypeOf(this,s.prototype)}}class D{constructor(_=(0,w.inject)(G.ZP),P=(0,w.inject)(L.Z)){this.mgate=_,this.logger=P}getPosts(_){return M(this,null,function*(){const P=yield this.mgate.fetch("/api/mobile/v1/customerQuestionService/post/list",_);if(!P.success)throw new o(P.errors);return P})}getPostsForLkp(_){return M(this,null,function*(){const P=yield this.mgate.fetch("/api/mobile/v1/customerQuestionService/post/list",_);if(!P.success)throw new i(P.errors);return P})}addQuestion(_){return M(this,null,function*(){const P=yield this.mgate.fetch("/api/mobile/v1/customerQuestionService/question/add",_);if(!P.success)throw new m(P.errors);return P})}addAnswer(_){return M(this,null,function*(){const P=yield this.mgate.fetch("/api/mobile/v1/customerQuestionService/answer/add",_);if(!P.success)throw new O(P.errors);return P})}voteSet(_){return M(this,null,function*(){const P=yield this.mgate.fetch("/api/mobile/v1/customerQuestionService/vote/set",_);if(!P.success)throw new s(P.errors);return P})}}},52063:function(de,Y,n){n.d(Y,{CK:function(){return M},ZP:function(){return R}});var w=n(53869),G=n(8952),L=(T,E,y)=>new Promise((f,o)=>{var i=s=>{try{O(y.next(s))}catch(D){o(D)}},m=s=>{try{O(y.throw(s))}catch(D){o(D)}},O=s=>s.done?f(s.value):Promise.resolve(s.value).then(i,m);O((y=y.apply(T,E)).next())}),M=(T=>(T.Standard="MGT_REGION_DELIVERY_OPTION",T.Dimensional="SGT_REGION_DELIVERY_OPTION",T.Oversized="KGT_REGION_DELIVERY_OPTION",T))(M||{});class g extends Error{constructor(){super("Unsuccessful request trying to get min courier delivery"),Object.setPrototypeOf(this,g.prototype)}}class R{constructor(E=(0,w.inject)(G.ZP)){this.mgate=E}getMinCourierDeliveryCost(E){return L(this,null,function*(){const{postalCode:y,geo:f}=E,o=yield this.mgate.fetch("/api/mobile/v1/regionService/delivery/calculate",{postcode:y,geo:f});if(!o.success)throw new g;return o.deliveryVariants})}}},89323:function(de,Y,n){n.d(Y,{Z:function(){return E}});var w=n(51206),G=n.n(w),L=n(53869),M=n(8952),g=n(34863),R=n(61016),T=(y,f,o)=>new Promise((i,m)=>{var O=p=>{try{D(o.next(p))}catch(_){m(_)}},s=p=>{try{D(o.throw(p))}catch(_){m(_)}},D=p=>p.done?i(p.value):Promise.resolve(p.value).then(O,s);D((o=o.apply(y,f)).next())});class E{constructor(f=(0,L.inject)(M.ZP)){this.mgate=f}fetchExperiments(f){return T(this,null,function*(){var o,i,m,O;const s=f.userAgent?w.parse(f.userAgent):null,D={platform:"Web",region:f.userLocationId||null,browser:((o=s?.browser)==null?void 0:o.name)||null,browserVersion:((i=s?.browser)==null?void 0:i.version)||null,os:((m=s?.os)==null?void 0:m.name)||null,osVersion:((O=s?.os)==null?void 0:O.version)||null,newUser:(!!f?.newUser).toString(),deviceType:(0,g.P)(f.userAgent)||R.Yi.Desktop},p=yield this.mgate.fetch("/api/mobile/v1/abTestService/experiment/search",{userSegments:[],userProperties:D});return p?.experiments&&this.mgate.setExperiments(p.experiments),p})}}},30254:function(de,Y,n){n.d(Y,{ZP:function(){return y}});var w=n(53869),G=n(8952),L=(f,o,i)=>new Promise((m,O)=>{var s=_=>{try{p(i.next(_))}catch(P){O(P)}},D=_=>{try{p(i.throw(_))}catch(P){O(P)}},p=_=>_.done?m(_.value):Promise.resolve(_.value).then(s,D);p((i=i.apply(f,o)).next())});class M extends Error{constructor(o){super("Unsuccessful add favorites list"),this.errors=o,Object.setPrototypeOf(this,M.prototype)}}class g extends Error{constructor(o){super("Unsuccessful set favorites lists"),this.errors=o,Object.setPrototypeOf(this,g.prototype)}}class R extends Error{constructor(o){super("Unsuccessful get favorites lists"),this.errors=o,Object.setPrototypeOf(this,R.prototype)}}class T extends Error{constructor(o){super("Unsuccessful get favorites lists"),this.errors=o,Object.setPrototypeOf(this,T.prototype)}}class E extends Error{constructor(o){super("Unsuccessful get favorites lists"),this.errors=o,Object.setPrototypeOf(this,E.prototype)}}class y{constructor(o=(0,w.inject)(G.ZP)){this.mgate=o}deleteFavoritesList(o){return L(this,null,function*(){const i=yield this.mgate.fetch("api/mobile/v1/favoriteGoodsListService/favoriteGoodsList/delete",{listId:o});if(!i.success)throw new T(i.errors)})}deleteGoodsFromFavoritesList(o,i){return L(this,null,function*(){const m=yield this.mgate.fetch("api/mobile/v1/favoriteGoodsListService/favoriteGoodsList/deleteGoods",{listId:o,goodsIds:[i]});if(!m.success)throw new E(m.errors);return m.success})}getFavoritesLists(){return L(this,null,function*(){const o=yield this.mgate.fetch("api/mobile/v1/favoriteGoodsListService/favoriteGoodsList/list");if(!o.success)throw new R(o.errors);return o.lists})}setFavoritesList(o){return L(this,null,function*(){const i=yield this.mgate.fetch("api/mobile/v1/favoriteGoodsListService/favoriteGoodsList/updateGoods",{listItems:o});if(!i.success)throw new g(i.errors)})}addFavoritesList(o,i=null){return L(this,null,function*(){const m={title:o};i&&i.length!==0&&(m.goodsIds=i);const O=yield this.mgate.fetch("api/mobile/v1/favoriteGoodsListService/favoriteGoodsList/create",m);if(!O.success)throw new M(O.errors)})}}},11865:function(de,Y,n){n.d(Y,{K2:function(){return M},Jp:function(){return R},lf:function(){return T},ZP:function(){return E}});var w=n(53869),G=n(8952),L=(y,f,o)=>new Promise((i,m)=>{var O=p=>{try{D(o.next(p))}catch(_){m(_)}},s=p=>{try{D(o.throw(p))}catch(_){m(_)}},D=p=>p.done?i(p.value):Promise.resolve(p.value).then(O,s);D((o=o.apply(y,f)).next())});class M extends Error{constructor(f){super("Unsuccessful get favorite merchants list"),this.errors=f,Object.setPrototypeOf(this,M.prototype)}}class g extends Error{constructor(f){super("Unsuccessful get favorite merchants ids list"),this.errors=f,Object.setPrototypeOf(this,g.prototype)}}class R extends Error{constructor(f){super("Unsuccessful add favorite merchant"),this.errors=f,Object.setPrototypeOf(this,R.prototype)}}class T extends Error{constructor(f){super("Unsuccessful delete favorite merchant"),this.errors=f,Object.setPrototypeOf(this,T.prototype)}}class E{constructor(f=(0,w.inject)(G.ZP)){this.mgate=f}getFavoriteMerchantsList(){return L(this,null,function*(){const{success:f,errors:o,merchants:i}=yield this.mgate.fetch("api/mobile/v1/customerMerchantsListService/merchant/list");if(!f)throw new M(o);return i})}getFavoriteMerchantsIdsList(){return L(this,null,function*(){const{success:f,errors:o,merchantIds:i}=yield this.mgate.fetch("api/mobile/v1/customerMerchantsListService/merchant/listSimple");if(!f)throw new g(o);return i})}addFavoriteMerchant(f){return L(this,null,function*(){const{success:o,errors:i}=yield this.mgate.fetch("api/mobile/v1/customerMerchantsListService/merchant/add",{merchantIds:[f]});if(!o)throw new R(i)})}deleteFavoriteMerchant(f){return L(this,null,function*(){const{success:o,errors:i}=yield this.mgate.fetch("api/mobile/v1/customerMerchantsListService/merchant/delete",{merchantIds:[f]});if(!o)throw new T(i)})}}},83205:function(de,Y,n){n.d(Y,{RH:function(){return R},ZP:function(){return f}});var w=n(53869),G=n(8952),L=n(79718),M=n(65363),g=(o,i,m)=>new Promise((O,s)=>{var D=P=>{try{_(m.next(P))}catch(l){s(l)}},p=P=>{try{_(m.throw(P))}catch(l){s(l)}},_=P=>P.done?O(P.value):Promise.resolve(P.value).then(D,p);_((m=m.apply(o,i)).next())}),R=(o=>(o[o.Favorites=0]="Favorites",o[o.BoughtGoods=1]="BoughtGoods",o))(R||{});class T extends Error{constructor(i){super("Unsuccessful get favorites goods"),this.errors=i,Object.setPrototypeOf(this,T.prototype)}}class E extends Error{constructor(i){super("Unsuccessful get favorites lists"),this.errors=i,Object.setPrototypeOf(this,E.prototype)}}class y extends Error{constructor(i){super("Unsuccessful get favorites lists"),this.errors=i,Object.setPrototypeOf(this,y.prototype)}}class f{constructor(i=(0,w.inject)(G.ZP)){this.mgate=i}getFavoriteGoodsIdsList(i={offset:0,perPageLimit:0,sorting:1,selectedFilters:[]}){return this.mgate.fetch("api/mobile/v1/customerGoodsListService/item/listSimple",{limit:i.perPageLimit,offset:i.offset})}formatItemsResponse(i){return i.map(m=>{var O;m.comboId=(0,L.un)({goodsId:m.goods.goodsId,merchantId:(O=m.favoriteOffer)!=null&&O.merchantId?m.favoriteOffer.merchantId:"",warehouseId:m.favoriteOffer.warehouseId});const s=(0,M.KB)([m.favoriteOffer],[],m);return s.length&&(m.favoriteOffer=s[0]),m})}getPersonalGoods(){return g(this,arguments,function*(i={offset:0,perPageLimit:0,sorting:1,selectedFilters:[],type:0,addressId:"",features:[]}){const m=yield this.mgate.fetch("api/mobile/v1/customerGoodsListService/item/list",{limit:i.perPageLimit,offset:i.offset,categoryId:i.categoryId,sorting:i.sorting,selectedFilters:i.selectedFilters,type:i.type,addressId:i.addressId,features:i.features});return m.items=this.formatItemsResponse(m.items),m})}getFavoritesListGoods(i){return g(this,arguments,function*(m,O={offset:0,perPageLimit:0,sorting:1,selectedFilters:[],type:0,addressId:"",features:[]}){const s=yield this.mgate.fetch("api/mobile/v1/favoriteGoodsListService/favoriteGoodsList/get",{listId:m,goodsListingParams:{limit:O.perPageLimit,offset:O.offset,categoryId:O.categoryId,sorting:O.sorting,selectedFilters:O.selectedFilters,type:O.type,addressId:O.addressId,features:O.features}});if(!s.success)throw new T(s.errors);return s.items=this.formatItemsResponse(s.items),s})}addFavoriteItem(i){if(!i||i.length===0)throw new Error("[favorites store: addFavoriteItem] \u043D\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u043D \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440 goodsIds");return this.mgate.fetch("api/mobile/v1/customerGoodsListService/item/add",Array.isArray(i)?{goodsIds:i}:{goodsId:i})}removeFavoriteItem(i){if(!i||i.length===0)throw new Error("[favorites store: removeFavoriteItem] \u043D\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u043D \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440 goodsIds");return this.mgate.fetch("api/mobile/v1/customerGoodsListService/item/remove",{goodsIds:i})}}},78101:function(de,Y,n){n.d(Y,{Z:function(){return M}});var w=n(53869),G=n(8952),L=(g,R,T)=>new Promise((E,y)=>{var f=m=>{try{i(T.next(m))}catch(O){y(O)}},o=m=>{try{i(T.throw(m))}catch(O){y(O)}},i=m=>m.done?E(m.value):Promise.resolve(m.value).then(f,o);i((T=T.apply(g,R)).next())});class M{constructor(R=(0,w.inject)(G.ZP)){this.mgate=R}getFeatures(){return L(this,null,function*(){const R=(yield this.mgate.fetch("api/mobile/v1/featureService/features/get")).features;return R?.length?R.filter(T=>T.enabled).map(T=>T.name):[]})}}},97387:function(de,Y,n){n.d(Y,{n:function(){return E}});var w=n(53869),G=n(89940),L=n(8952),M=n(21725),g=n(1643),R=n(20025),T=(y,f,o)=>new Promise((i,m)=>{var O=p=>{try{D(o.next(p))}catch(_){m(_)}},s=p=>{try{D(o.throw(p))}catch(_){m(_)}},D=p=>p.done?i(p.value):Promise.resolve(p.value).then(O,s);D((o=o.apply(y,f)).next())});class E{constructor(f=(0,w.inject)(G.ZP),o=(0,w.inject)(L.ZP),i=(0,w.inject)(R.Z)){this.http=f,this.mgate=o,this.logger=i}uploadFile(f){return new Promise((o,i)=>{const m=new FileReader,O=new Blob([f.file]);m.readAsArrayBuffer(O),m.onload=()=>T(this,null,function*(){var s;try{const D=m.result;if(!(D&&D instanceof ArrayBuffer))throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0447\u0442\u0435\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u0430");const p={content:Array.from(new Uint8Array(D)),extension:(0,M.Z)(f.file.name),filename:(0,g.Z)(f.file.name),for:f.serviceType||"web"},P=(s=(yield this.http.post("api/mobile/v1/fileService/file/upload",p,{headers:{"Content-Type":"multipart/form-data"},signal:f.signal})).data)==null?void 0:s.url;if(!P)throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0441\u0441\u044B\u043B\u043A\u0438 \u043D\u0430 \u0444\u0430\u0439\u043B");o({fileLink:P,name:f.file.name,type:f.file.type})}catch(D){this.logger.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0444\u043E\u0442\u043E fileService/file/upload",details:D}),i("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u0430\u0439\u043B. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0441\u043D\u043E\u0432\u0430 \u0447\u0435\u0440\u0435\u0437 \u043F\u0430\u0440\u0443 \u043C\u0438\u043D\u0443\u0442")}})})}uploadVideoFile(f){return new Promise((o,i)=>T(this,null,function*(){try{if(!f.file)throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0447\u0442\u0435\u043D\u0438\u044F \u0432\u0438\u0434\u0435\u043E \u0444\u0430\u0439\u043B\u0430");const m=yield this.mgate.sendFormData("api/mobile/v1/fileService/video/upload",{files:[{key:"video",value:f.file}]},{signal:f.signal,cb:f.cb,requestType:G.lO.Xhr});if(!m?.videoId)throw new Error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F ID \u0444\u0430\u0439\u043B\u0430");o({fileLink:"",fileId:m?.videoId,name:f.file.name,type:f.file.type})}catch(m){this.logger.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0432\u0438\u0434\u0435\u043E fileService/video/upload",details:m}),i("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0432\u0438\u0434\u0435\u043E \u0444\u0430\u0439\u043B. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0441\u043D\u043E\u0432\u0430 \u0447\u0435\u0440\u0435\u0437 \u043F\u0430\u0440\u0443 \u043C\u0438\u043D\u0443\u0442")}}))}}},55466:function(de,Y,n){n.d(Y,{Jo:function(){return M},mQ:function(){return g},FP:function(){return R},tL:function(){return E},EE:function(){return y},U3:function(){return f},jS:function(){return o},BL:function(){return i},ZP:function(){return O}});var w=n(53869),G=n(8952),L=(s,D,p)=>new Promise((_,P)=>{var l=d=>{try{e(p.next(d))}catch(h){P(h)}},r=d=>{try{e(p.throw(d))}catch(h){P(h)}},e=d=>d.done?_(d.value):Promise.resolve(d.value).then(l,r);e((p=p.apply(s,D)).next())});const M="cached_regions";function g(s){return!!s.clusterPointsQuantity}function R(s){return!s||typeof s!="object"?!1:"lat"in s&&"lon"in s}function T(s){return typeof s=="number"?s:typeof s=="string"?parseFloat(s)||0:typeof s=="object"&&s&&parseFloat(s.toString())||0}function E(s,D){return{lat:T(s),lon:T(D)}}function y(s){return{lowerLeft:E(s[0][0],s[0][1]),upperRight:E(s[1][0],s[1][1])}}function f(){return{lat:55.7522,lon:37.6156}}function o(){return{lowerLeft:{lat:0,lon:0},upperRight:{lat:0,lon:0}}}function i(s,D){const p=new Set(D.map(r=>r.id)),_=new Set(s.map(r=>r.id)),P=new Set(Array.from(_).filter(r=>!p.has(r))),l=new Set(Array.from(p).filter(r=>!_.has(r)));return{toAdd:P,toRemove:l}}function m(s){const D={full:s.full,kladrId:s.regionKladrId,regionType:s.regionType||"",region:s.region||"",regionId:s.regionId||"",regionKladrId:s.regionKladrId||"",regionFiasId:s.regionFiasId||"",areaType:s.areaType||"",area:s.area||"",cityType:s.cityType||"",city:s.city||"",settlementType:s.settlementType||"",settlement:s.settlement||"",streetType:s.streetType||"",street:s.street||"",houseType:s.houseType||"",house:s.house||"",floor:s.floor||"",entrance:s.entrance||"",intercom:s.intercom||"",buildingType:s.blockType||"",building:s.block||"",flatType:s.flatType||"",flat:s.flat||"",postalCode:s.postalCode||"",isCorrect:!!s.isCorrect,addressId:s.addressId||"",courierDeliveryError:s.courierDeliveryError||null,name:s.name||""};return s.geoLon&&s.geoLat&&(D.geo=E(s.geoLat,s.geoLon)),D}class O{constructor(D=(0,w.inject)(G.ZP)){this.mgate=D}getAddressSuggestions(D,p){return L(this,null,function*(){const _={query:D.query,count:p?.count||10,isSkipRegionFilter:p?.isSkipRegionFilter===!0,onlyRegionsCities:p?.onlyRegionsCities,onlyCities:p?.onlyCities},P=yield this.mgate.fetch("api/mobile/v1/addressSuggestService/address/suggest",_);return(P?.items||[]).map(r=>{const e=m(r);return{address:r.full,details:e}})})}getAddressByCoordinates(D){return L(this,null,function*(){var p,_;const P={lat:D.lat,lon:D.lon,radius:(p=D.radius)!=null?p:100,count:(_=D.count)!=null?_:10};try{const l=yield this.mgate.fetch("api/mobile/v1/addressSuggestService/address/geolocate",P);return(l?.items||[]).map(e=>m(e))}catch{return[]}})}}},63523:function(de,Y,n){n.d(Y,{RZ:function(){return O},Ny:function(){return p},ZP:function(){return _}});var w=n(53869),G=n(57644),L=n(8952),M=Object.defineProperty,g=Object.defineProperties,R=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,f=(P,l,r)=>l in P?M(P,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):P[l]=r,o=(P,l)=>{for(var r in l||(l={}))E.call(l,r)&&f(P,r,l[r]);if(T)for(var r of T(l))y.call(l,r)&&f(P,r,l[r]);return P},i=(P,l)=>g(P,R(l)),m=(P,l,r)=>new Promise((e,d)=>{var h=u=>{try{a(r.next(u))}catch(c){d(c)}},v=u=>{try{a(r.throw(u))}catch(c){d(c)}},a=u=>u.done?e(u.value):Promise.resolve(u.value).then(h,v);a((r=r.apply(P,l)).next())});class O extends Error{constructor(l){super(`Help article not found: ${l}`),Object.setPrototypeOf(this,O.prototype)}}const s={168953384:"card",168953372:"cart",168953422:"coins",168953394:"car",168953404:"return-good",168953382:"edit-pencil"},D={catalog:"/catalog/",cart:"/multicart/",favorites:"/personal/favorites/",home:"/",profile:"/personal/profile/","profile/addresses":"/personal/address/","profile/bonuscard":"/personal/loyalty/","profile/claims":"/personal/issues/","profile/orders":"/personal/order/","profile/reviews":"/personal/reviews/","profile/help":"/help/"},p=Object.freeze(Object.keys(s));class _{constructor(l=(0,w.inject)(L.ZP)){this.mgate=l}getCategoryTree(){return m(this,null,function*(){var l,r;const e=yield this.mgate.fetch("/api/mobile/v2/faqService/category/get",{data:{articleLabels:["web"]}});return(r=(l=e.data)==null?void 0:l.categories)!=null&&r.length?e.data.categories[0].children.map(d=>s[d.id]?i(o({},d),{icon:s[d.id]}):d):[]})}getArticle(l){return m(this,arguments,function*(r,e={}){var d;const h=new RegExp(`/s+href="https?://conf.(goods|${G.CD.toLowerCase()}).ru#/g`),v=new RegExp(`/s+href="(goods|${G.CD.toLowerCase()})://([^"]+)"/g`),a=yield this.mgate.fetch("/api/mobile/v1/faqService/article/get",{data:{id:r}});if(!((d=a.data)!=null&&d.article))throw new O(`${a.errors}`);return a.data.article.body=a.data.article.body.replace(h,' href="#'),e.withDeepLinks||(a.data.article.body=a.data.article.body.replace(v,(u,c,I)=>` href="${D[I]||"#"}"`)),a.data.article})}}},12545:function(de,Y,n){n.d(Y,{ZP:function(){return T}});var w=n(53869),G=n(8952),L=(E,y,f)=>new Promise((o,i)=>{var m=D=>{try{s(f.next(D))}catch(p){i(p)}},O=D=>{try{s(f.throw(D))}catch(p){i(p)}},s=D=>D.done?o(D.value):Promise.resolve(D.value).then(m,O);s((f=f.apply(E,y)).next())});class M extends Error{constructor(y){super("Unsuccessful fetch customer hobbies list"),this.errors=y,Object.setPrototypeOf(this,M.prototype)}}class g extends Error{constructor(y){super("Unsuccessful add customer hobby"),this.errors=y,Object.setPrototypeOf(this,g.prototype)}}class R extends Error{constructor(y){super("Unsuccessful delete customer hobby"),this.errors=y,Object.setPrototypeOf(this,R.prototype)}}class T{constructor(y=(0,w.inject)(G.ZP)){this.mgate=y}getCustomerHobbiesList(){return L(this,null,function*(){const y=yield this.mgate.fetch("api/mobile/v1/hobbyService/customerHobby/list");if(!y.success)throw new M(y.errors);return y})}addCustomerHobby(y){return L(this,null,function*(){const f=yield this.mgate.fetch("api/mobile/v1/hobbyService/customerHobby/add",{hobbyIds:[y]});if(!f.success)throw new g(f.errors);return f.success})}deleteCustomerHobby(y){return L(this,null,function*(){const f=yield this.mgate.fetch("api/mobile/v1/hobbyService/customerHobby/delete",{hobbyIds:[y]});if(!f.success)throw new R(f.errors);return f.success})}}},71670:function(de,Y,n){n.d(Y,{u6:function(){return _},wX:function(){return P},qD:function(){return l},c:function(){return r},a0:function(){return e},sk:function(){return d},Vi:function(){return h},C1:function(){return v},C$:function(){return a},RB:function(){return u},CA:function(){return c},sw:function(){return Pe},wI:function(){return x},rv:function(){return ee},ZA:function(){return W},ZP:function(){return ue}});var w=n(53869),G=n(8952),L=n(77235),M=n(20025),g=n(96466),R=Object.defineProperty,T=Object.defineProperties,E=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(Z,U,K)=>U in Z?R(Z,U,{enumerable:!0,configurable:!0,writable:!0,value:K}):Z[U]=K,m=(Z,U)=>{for(var K in U||(U={}))f.call(U,K)&&i(Z,K,U[K]);if(y)for(var K of y(U))o.call(U,K)&&i(Z,K,U[K]);return Z},O=(Z,U)=>T(Z,E(U)),s=(Z,U,K)=>new Promise((se,b)=>{var z=q=>{try{le(K.next(q))}catch(Ie){b(Ie)}},$=q=>{try{le(K.throw(q))}catch(Ie){b(Ie)}},le=q=>q.done?se(q.value):Promise.resolve(q.value).then(z,$);le((K=K.apply(Z,U)).next())});const D="WEB",p="DISPATCHED_RETURN_REQUEST_FLAG";var _=(Z=>(Z.Unknown="UNKNOWN",Z.InProgress="IN_PROGRESS",Z.Resolved="RESOLVED",Z.WaitingForCustomer="WAITING_FOR_CUSTOMER",Z.PendingStatusCode="PENDING_STATUS_CODE",Z.NotCreatedStatusCode="NOT_CREATED_STATUS_CODE",Z))(_||{}),P=(Z=>(Z.WaitingSolution="RETURN_ORDER_STATUS_WAITING_SOLUTION",Z.WaitingShipment="RETURN_ORDER_STATUS_WAITING_SHIPMENT",Z.WaitDelivery="RETURN_ORDER_STATUS_WAIT_DELIVERY",Z.SentToSeller="RETURN_ORDER_STATUS_SENT_TO_SELLER",Z.DispatchedToSeller="RETURN_ORDER_STATUS_DISPATCHED_TO_SELLER",Z.ReadyRequestDelivery="RETURN_ORDER_STATUS_READY_REQUEST_DELIVERY",Z.CourierOnTheWay="RETURN_ORDER_STATUS_COURIER_ON_THE_WAY",Z.Done="RETURN_ORDER_STATUS_DONE",Z.CancellingByExpiration="RETURN_ORDER_STATUS_CANCELING_BY_EXPIRATION",Z.Rejection="RETURN_ORDER_STATUS_REJECTION",Z.BuyerCancelling="RETURN_ORDER_STATUS_BUYER_CANCELLATION",Z.Cancelling="RETURN_ORDER_STATUS_CANCELING",Z))(P||{}),l=(Z=>(Z.Easy="EASY_RETURN_SCHEME",Z.Standard="STANDARD_RETURN_SCHEME",Z.Simplified="SIMPLIFIED_RETURN_SCHEME",Z))(l||{}),r=(Z=>(Z.ReturnMethodPickup="RETURN_METHOD_PICKUP",Z.ReturnMethodCourier="RETURN_METHOD_COURIER",Z))(r||{}),e=(Z=>(Z.OnDemandReturnDeliveryMethodOption="ON_DEMAND_RETURN_DELIVERY_METHOD_OPTION",Z.OnDemandReturnOrderDeliveryOption="ON_DEMAND_RETURN_ORDER_DELIVERY_OPTION",Z.OnDemandAbortedReturnOrderDeliveryOption="ON_DEMAND_ABORTED_RETURN_ORDER_DELIVERY_OPTION",Z))(e||{}),d=(Z=>(Z.Large="l",Z.Medium="m",Z.Small="sm",Z.ExtraSmall="xs",Z.Square="square",Z))(d||{}),h=(Z=>(Z.Customer="customer",Z.Merchant="merchant",Z.Goods="goods",Z))(h||{}),v=(Z=>(Z.InviteGoods="INVITE_GOODS",Z))(v||{});function a(Z){return!!Z?.systemCommentType}function u(Z){return!a(Z)}var c=(Z=>(Z.Merchant="MERCHANT",Z.Goods="GOODS",Z.MerchantWithGoods="MERCHANT_WITH_GOODS",Z))(c||{});class I extends Error{constructor(){super("Issue list error"),Object.setPrototypeOf(this,I.prototype)}}class N extends Error{constructor(){super("Failed to create issue"),Object.setPrototypeOf(this,N.prototype)}}class H extends Error{constructor(){super("Failed to get issue"),Object.setPrototypeOf(this,H.prototype)}}class F extends Error{constructor(){super("Create Product Description Issue error"),Object.setPrototypeOf(this,F.prototype)}}class B extends Error{constructor(){super("Failed to create issue comment"),Object.setPrototypeOf(this,B.prototype)}}class A extends Error{constructor(){super("Failed to create issue attachment"),Object.setPrototypeOf(this,A.prototype)}}class j extends Error{constructor(){super("Failed to spawn goods to issue"),Object.setPrototypeOf(this,j.prototype)}}class J extends Error{constructor(U){super(`Failed to rate issue: ${U}`),Object.setPrototypeOf(this,J.prototype)}}class re extends Error{constructor(U){super(`Failed to list preferred: ${U}`),Object.setPrototypeOf(this,re.prototype)}}class Pe extends Error{constructor(U){super("Failed to unread count"),this.errors=U,Object.setPrototypeOf(this,Pe.prototype)}}class De extends Error{constructor(){super("Failed to update read date"),Object.setPrototypeOf(this,De.prototype)}}class ge extends Error{constructor(U){super(`ReturnScheme get error ${U}`),Object.setPrototypeOf(this,ge.prototype)}}class fe extends Error{constructor(U){super(`CategoryRequirements get error ${U}`),Object.setPrototypeOf(this,fe.prototype)}}var x=(Z=>(Z.Good="GOODS",Z.Delivery="DELIVERY",Z))(x||{}),ee=(Z=>(Z.MerchantNotAnswer="merchant_not_answer",Z.RecalculateBonuses="recalculate_bonuses",Z.DisagreeWithMerchant="disagree_with_merchant",Z.Other="other",Z))(ee||{}),ae=(Z=>(Z.MerchantNotAnswer="\u041F\u0440\u043E\u0434\u0430\u0432\u0435\u0446 \u043D\u0435 \u043E\u0442\u0432\u0435\u0447\u0430\u0435\u0442",Z.RecalculateBonuses="\u041D\u0443\u0436\u043D\u043E \u043F\u0435\u0440\u0435\u0441\u0447\u0438\u0442\u0430\u0442\u044C \u0431\u043E\u043D\u0443\u0441\u044B",Z.DisagreeWithMerchant="\u041D\u0435 \u0441\u043E\u0433\u043B\u0430\u0441\u0435\u043D \u0441 \u0440\u0435\u0448\u0435\u043D\u0438\u0435\u043C \u043F\u0440\u043E\u0434\u0430\u0432\u0446\u0430",Z.Other="\u0414\u0440\u0443\u0433\u043E\u0435",Z))(ae||{});class ye extends Error{constructor(U){super("Issue resolver error"),this.error=U,Object.setPrototypeOf(this,ye.prototype)}}class Re extends Error{constructor(U){super("Issue resolution error"),this.error=U,Object.setPrototypeOf(this,Re.prototype)}}class Ue extends Error{constructor(U){super("Set issue close error"),this.error=U,Object.setPrototypeOf(this,Ue.prototype)}}class be extends Error{constructor(U){super("Send filter recommendation error"),this.error=U,Object.setPrototypeOf(this,be.prototype)}}class k extends Error{constructor(U){super("Reason invite goods error"),this.error=U,Object.setPrototypeOf(this,k.prototype)}}class C extends Error{constructor(U){super("Return detailed info error"),this.errors=U,Object.setPrototypeOf(this,C.prototype)}}class W extends Error{constructor(U){super("Return method list error"),this.errors=U,Object.setPrototypeOf(this,W.prototype)}}class te extends Error{constructor(U){super("Get reopening reasons error"),this.errors=U,Object.setPrototypeOf(this,te.prototype)}}class V extends Error{constructor(U){super("Issue reopen error"),this.errors=U,Object.setPrototypeOf(this,V.prototype)}}class ue{constructor(U=(0,w.inject)(G.ZP),K=(0,w.inject)(M.Z)){this.mgate=U,this.logger=K}getIssuesList(U,K){return s(this,null,function*(){const se=yield this.mgate.fetch("api/mobile/v2/issuesService/issue/list",{maxResults:U,startAt:K,flags:["SHOW_NON_CREATED_FLAG",p]});if(se.success.toString()!=="1")throw new I;return O(m({},se.data),{issues:se.data.issues.map(b=>O(m({},b),{newCommentsCount:Number(b.newCommentsCount)||0}))})})}getIssuesReasons(){return s(this,arguments,function*(U="",K="",se=["GOODS"]){return(yield this.mgate.fetch("/api/mobile/v2/issuesService/category/list",{onlyChilds:!0,consumerCode:D,customerOrderId:U,deliveryId:K,categoryClassCodes:se})).data.categories})}createIssue(U,K){return s(this,null,function*(){if(K==="good"){const b=yield this.mgate.fetch("/api/mobile/v5/issuesService/issue/create",U);if(!b.success)throw new N;return{issueKey:b.requestId}}const se=yield this.mgate.fetch("/api/mobile/v1/issuesService/deliveryIssue/create",{data:U});if(!se.success)throw new N;return se.data})}createProductDescriptionIssue(U){return s(this,arguments,function*({text:K,productId:se,productName:b,email:z,merchantId:$}){const le={issue:{partnerId:"",source:"\u041B\u041A\u041F \u0412\u0435\u0431",text:K,product:{article:se,name:b,merchantId:$}}};z&&(le.contact={email:z});const q=yield this.mgate.fetch("/api/mobile/v1/issuesService/issueProductDescription/create",{data:le});if(!q.success)throw new F;return q.data})}getIssue(U){return s(this,null,function*(){var K;const se=yield this.mgate.fetch("/api/mobile/v2/issuesService/issue/get",U);if(se.success.toString()!=="1")throw new H;const b=se.data.issue;return(K=b.comments)!=null&&K.length&&(b.comments.reduce((z,$)=>(z.lastInSequence=z.authorType!==$.authorType,$)),b.comments[b.comments.length-1].lastInSequence=!0),b.newCommentsCount=Number(se.data.issue.newCommentsCount)||0,b})}sendText(U,K){return s(this,null,function*(){try{return{commentId:(yield this.createIssueComment({issueKey:U,comment:K})).commentId,text:K}}catch(se){return this.logger.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F",details:(0,L.A)(se)}),{text:K}}})}sendFile(U,K){return s(this,null,function*(){const se=[];try{const b=[];for(const $ of K){const[le]=$.fileLink.match(/(mobileApp\/.*\..*$)/)||[];b.push(this.createIssueAttachment({issueKey:U,attachmentName:le}))}(yield Promise.allSettled(b)).forEach(($,le)=>{var q,Ie;se.push({text:"",file:K[le],attachmentIds:$.status==="fulfilled"&&$.value?[(q=$.value)==null?void 0:q.commentId]:[],commentId:$.status==="fulfilled"&&$.value?(Ie=$.value)==null?void 0:Ie.commentId:""})})}catch(b){this.logger.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435 \u0444\u0430\u0439\u043B\u0430",details:(0,L.A)(b)})}return se})}sendChatMessage(U,K,se){return s(this,null,function*(){const b=[];if(K?.length){const z=yield this.sendText(U,K);b.push(z)}if(se?.length){const z=yield this.sendFile(U,se);for(const $ of z)b.push($)}return b})}createIssueComment(U){return s(this,null,function*(){const K={data:O(m({},U),{consumer:U.consumer||D})},se=yield this.mgate.fetch("/api/mobile/v1/issuesService/issueComment/create",K);if(!se.success)throw new B;return se.data})}createIssueAttachment(U){return s(this,null,function*(){const K={data:O(m({},U),{consumer:U.consumer||D})},se=yield this.mgate.fetch("/api/mobile/v1/issuesService/issueAttachment/create",K);if(!se.success)throw new A;return se.data})}inviteGoodsToIssue(U){return s(this,null,function*(){const K={data:O(m({},U),{consumer:U.consumer||D})},se=yield this.mgate.fetch("/api/mobile/v1/issuesService/issue/assignToReclamation",K);if(!se.success)throw new j;return se.data})}issueRate(U){return s(this,null,function*(){var K;const se=yield this.mgate.fetch("/api/mobile/v1/issuesService/issue/rate",U);if(!se.success){const b=se.errors||[];throw new J(((K=b[0])==null?void 0:K.msg)||"unknown error")}})}getListPreferred(){return s(this,null,function*(){var U;const K=yield this.mgate.fetch("/api/mobile/v1/issuesService/settlementOption/listPreferred");if(!K.success){const se=K.errors||[];throw new re(((U=se[0])==null?void 0:U.msg)||"unknown error")}return K.preferredSettlementOptions})}getUnreadCount(){return s(this,null,function*(){const{success:U,errors:K,unreadCount:se}=yield this.mgate.fetch("/api/mobile/v1/issuesService/issueComment/getUnreadCount");if(!U)throw new Pe(K);return se})}updateReadDate(U){return s(this,null,function*(){if(!(yield this.mgate.fetch("/api/mobile/v1/issuesService/issue/updateReadDate",{data:{issueKey:U,consumer:"WEB"}})).success)throw new De})}getIssueResolver(){return s(this,null,function*(){const U=yield this.mgate.fetch("api/mobile/v1/issuesService/issueResolver/list");if(!U.success)throw new ye(U.errors[0]);return U.resolvers||[]})}getIssueResolutions(){return s(this,null,function*(){const U=yield this.mgate.fetch("api/mobile/v1/issuesService/issueResolution/list");if(!U.success)throw new Re(U.errors[0]);return U.resolutions||[]})}setIssueClose(U,K,se){return s(this,null,function*(){const b=yield this.mgate.fetch("api/mobile/v1/issuesService/issue/close",{issueKey:U,resolver:{value:K},resolution:{value:se}});if(!b.success)throw new Ue(b.errors[0])})}sendFilterRecommendation(U){return s(this,null,function*(){const K=yield this.mgate.fetch("api/mobile/v1/issuesService/filter/recommend",U);if(!K.success)throw new be(K.errors[0]);return K.success})}getReasonsInviteGoods(){return s(this,null,function*(){const{success:U,errors:K,reasons:se}=yield this.mgate.fetch("api/mobile/v1/issuesService/issueReclamationConnectionReason/list");if(!U)throw new k(K[0]);return se||[]})}getReturnScheme(U){return s(this,null,function*(){const K=yield this.mgate.fetch("api/mobile/v2/issuesService/returnScheme/get",m({},U));if(!K.success)throw new ge(JSON.stringify(K.errors));return K.items})}getCategoryRequirements(U){return s(this,null,function*(){const K=yield this.mgate.fetch("api/mobile/v1/issuesService/category/get",{categoryId:U});if(!K.success)throw new fe(JSON.stringify(K.errors));return K})}getReturnDetailedInfo(U){return s(this,null,function*(){const{success:K,errors:se,returnOrder:b}=yield this.mgate.fetch("api/mobile/v1/issuesService/returnOrder/get",{issueId:U,flags:[p]});if(!K)throw new C(se);return b})}getReturnMethodList(U,K){return s(this,null,function*(){const{success:se,errors:b,returnMethods:z}=yield this.mgate.fetch("api/mobile/v1/issuesService/returnMethod/list",{goods:U,addressId:K});if(!se)throw new W(b);const $={returnMethod:"RETURN_METHOD_PICKUP",deliveryOptions:[],returnDeliveryDateTimeInterval:[],name:"\u0412 \u043F\u0443\u043D\u043A\u0442",disabled:!1,hasError:!1},le={returnMethod:"RETURN_METHOD_COURIER",deliveryOptions:[],returnDeliveryDateTimeInterval:[],name:"\u041A\u0443\u0440\u044C\u0435\u0440\u043E\u043C",disabled:!1,hasError:!1},q={returnMethod:"RETURN_METHOD_COURIER",deliveryOptions:["ON_DEMAND_RETURN_DELIVERY_METHOD_OPTION"],returnDeliveryDateTimeInterval:[],name:"\u041A\u0443\u0440\u044C\u0435\u0440\u043E\u043C \u043F\u043E \u043A\u043B\u0438\u043A\u0443",disabled:!1,hasError:!1};if(z.length){if(z.length===1)return z[0].returnMethod==="RETURN_METHOD_COURIER"?($.disabled=!0,z[0].deliveryOptions.includes("ON_DEMAND_RETURN_DELIVERY_METHOD_OPTION")?[$,q]:(le.returnDeliveryDateTimeInterval=z[0].returnDeliveryDateTimeInterval,[$,le])):(q.hasError=!0,[$,q])}else return le.hasError=!0,$.disabled=!0,[$,le];return[$,q]})}callCourierNow(U){return s(this,null,function*(){const K=yield this.mgate.fetch("/api/mobile/v1/issuesService/returnDelivery/request",{reclamationId:U});if(!K.success)throw new g.IQ(K.errors)})}getReopeningReasons(){return s(this,null,function*(){const U=yield this.mgate.fetch("/api/mobile/v1/issuesService/reopenReason/list");if(!U.success)throw new te(U.errors);return U.reopenReasons})}issueReopen(U){return s(this,null,function*(){const K=yield this.mgate.fetch("/api/mobile/v1/issuesService/issue/reopen",U);if(!K.success)throw new V(K.errors)})}}},55931:function(de,Y,n){n.d(Y,{Z:function(){return p}});var w=n(53869),G=n(8952),L=n(45803),M=Object.defineProperty,g=Object.defineProperties,R=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,f=(_,P,l)=>P in _?M(_,P,{enumerable:!0,configurable:!0,writable:!0,value:l}):_[P]=l,o=(_,P)=>{for(var l in P||(P={}))E.call(P,l)&&f(_,l,P[l]);if(T)for(var l of T(P))y.call(P,l)&&f(_,l,P[l]);return _},i=(_,P)=>g(_,R(P)),m=(_,P)=>{var l={};for(var r in _)E.call(_,r)&&P.indexOf(r)<0&&(l[r]=_[r]);if(_!=null&&T)for(var r of T(_))P.indexOf(r)<0&&y.call(_,r)&&(l[r]=_[r]);return l},O=(_,P,l)=>new Promise((r,e)=>{var d=a=>{try{v(l.next(a))}catch(u){e(u)}},h=a=>{try{v(l.throw(a))}catch(u){e(u)}},v=a=>a.done?r(a.value):Promise.resolve(a.value).then(d,h);v((l=l.apply(_,P)).next())});const s={logoUrl:L,mapLogoUrl:""};class D extends Error{constructor(P){super(`Fetch merchant legal info exception ${JSON.stringify(P)}`),this.error=P,Object.setPrototypeOf(this,D.prototype)}}class p{constructor(P=(0,w.inject)(G.ZP)){this.mgate=P}getLegalInfo(P){return O(this,null,function*(){if(!P)throw new Error("merchantId is required for getLegalInfo");const l=yield this.mgate.fetch("/api/mobile/v1/partnerService/merchant/legalInfo/get",{merchantId:P});if(!l||l.message||l.success===!1)throw new D(l.message?l.message:"\u041D\u0435 \u043F\u043E\u043B\u0443\u0447\u0435\u043D \u043E\u0442\u0432\u0435\u0442");const{summaryRating:r,idealOrderRate:e,feedbackRate:d,dateActivation:h}=l,v=l.merchant,{design:a}=v,u=m(v,["design"]),c=a?.logoUrl?a:s;return i(o({},u),{shopDesign:c,summaryRating:Number(r.toFixed(1)),idealOrderRate:e,feedbackRate:Number(d.toFixed(1)),dateActivation:h})})}findMerchants(P){return O(this,null,function*(){return(yield this.mgate.fetch("/api/mobile/v1/merchantService/merchant/search",{searchText:P})).items})}findMerchantsByFlags(P){return O(this,null,function*(){let{categories:l}=yield this.mgate.fetch("/api/mobile/v2/merchantService/merchant/search",{flags:P});l=l.filter(e=>e.items.length);const r=[];for(let e=0;e<l.length;e++){let d=[];const h=l[e];d=h.items.map(v=>o({location:{name:v.name},logo:v.design.logoUrl},v)),delete h.items,d=d,r.push(i(o({},h),{locations:d}))}return r})}}},48544:function(de,Y,n){n.d(Y,{Lb:function(){return s},uq:function(){return D},Rj:function(){return _},bF:function(){return l}});var w=n(53869),G=n(34853),L=n(8952),M=n(91557),g=Object.defineProperty,R=Object.defineProperties,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,o=(r,e,d)=>e in r?g(r,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[e]=d,i=(r,e)=>{for(var d in e||(e={}))y.call(e,d)&&o(r,d,e[d]);if(E)for(var d of E(e))f.call(e,d)&&o(r,d,e[d]);return r},m=(r,e)=>R(r,T(e)),O=(r,e,d)=>new Promise((h,v)=>{var a=I=>{try{c(d.next(I))}catch(N){v(N)}},u=I=>{try{c(d.throw(I))}catch(N){v(N)}},c=I=>I.done?h(I.value):Promise.resolve(I.value).then(a,u);c((d=d.apply(r,e)).next())}),s=(r=>(r.Bpg2="BPG20",r.Bonus="BONUS",r.PromoCode="PROMO_CODE",r.Bpg1="BPG1",r.Sbpg="SBPG",r.Bpg="BPG",r.PaymentSpasibo="PAYMENT_SPASIBO",r))(s||{}),D=(r=>(r.Bonus="BONUS",r.PromoCode="PROMO_CODE",r.Bpg="BPG",r.PaymentSpasibo="PAYMENT_SPASIBO",r))(D||{});const p="discounts",_=m(i({},D),{PaymentInstallment:"PAYMENT_INSTALLMENT",Unknown:"UNKNOWN_DISCOUNT_TYPE"});class P extends Error{constructor(e){super(`${PrefixSentryError.Checkout} Unsuccessful discount applying`),this.errors=e,Object.setPrototypeOf(this,P.prototype)}}class l{constructor(e=(0,w.inject)(L.ZP)){this.mgate=e}getAvailableDiscounts(e,d){return O(this,null,function*(){return(yield this.mgate.fetch("/api/mobile/v1/checkoutService/discount/availableList",{identification:{id:e},isSelectedCartItemGroupsOnly:d})).availableDiscounts})}setDiscounts(e,d){window&&window.sessionStorage.setItem(p+e,JSON.stringify(d))}clearDiscounts(e){window&&window.sessionStorage.removeItem(p+e)}getDiscounts(e){if(!window)return[];const d=window.sessionStorage.getItem(p+e);return(0,M.Qf)(d)}}},5756:function(de,Y,n){n.d(Y,{Do:function(){return x},_n:function(){return a},Lb:function(){return D},n8:function(){return I},EI:function(){return Pe},Rj:function(){return L.Rj},uq:function(){return L.uq},lF:function(){return ye},HL:function(){return L.Lb},bF:function(){return L.bF},kF:function(){return p},zS:function(){return E},dR:function(){return De},oT:function(){return ge},HX:function(){return fe},l4:function(){return ee},gf:function(){return H},pI:function(){return N},Dg:function(){return _.Dg},tW:function(){return _.tW},AE:function(){return _.AE},s9:function(){return ae},q_:function(){return be},yf:function(){return Re},Qg:function(){return Ue}});var w=n(79718),G=n(55466),L=n(48544),M=n(53869),g=n(8952),R=n(20025),T=(k,C,W)=>new Promise((te,V)=>{var ue=K=>{try{U(W.next(K))}catch(se){V(se)}},Z=K=>{try{U(W.throw(K))}catch(se){V(se)}},U=K=>K.done?te(K.value):Promise.resolve(K.value).then(ue,Z);U((W=W.apply(k,C)).next())});class E{constructor(C=(0,M.inject)(g.ZP),W=(0,M.inject)(R.Z)){this.mgate=C,this.logger=W}getCarts(){return T(this,null,function*(){if(window){const C=yield this.mgate.fetch("/api/mobile/v2/cartService/cart/search",{requestVersion:7});return(C?.elements||[]).map(W=>({cartId:W.identification.id,type:W.type,location:{id:W.locationId,name:W.locationName,address:W.locationAddress}}))}else return this.logger.error("\u041F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \u043A\u043E\u0440\u0437\u0438\u043D\u044B \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435!"),[]})}}var y=Object.defineProperty,f=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,m=(k,C,W)=>C in k?y(k,C,{enumerable:!0,configurable:!0,writable:!0,value:W}):k[C]=W,O=(k,C)=>{for(var W in C||(C={}))o.call(C,W)&&m(k,W,C[W]);if(f)for(var W of f(C))i.call(C,W)&&m(k,W,C[W]);return k},s=(k,C,W)=>new Promise((te,V)=>{var ue=K=>{try{U(W.next(K))}catch(se){V(se)}},Z=K=>{try{U(W.throw(K))}catch(se){V(se)}},U=K=>K.done?te(K.value):Promise.resolve(K.value).then(ue,Z);U((W=W.apply(k,C)).next())}),D=(k=>(k.QuantityLimitExceed="CS-API-E8",k))(D||{});class p{constructor(C=(0,M.inject)(g.ZP)){this.mgate=C}getSingleCartState(C){return s(this,null,function*(){const W=yield this.mgate.fetch("/api/mobile/v2/cartService/cart/get",{identification:{id:C.id},isCartStateValidationRequired:C.isCartStateValidationRequired,isSelectedItemGroupsOnly:C.isSelectedItemGroups,loyaltyCalculationRequired:C.loyaltyCalculationRequired,isSkipPersonalDiscounts:C.isSkipPersonalDiscounts});if(!W)throw Object.assign(new Error("[multi-cart service: getSingleCartState] \u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \u043A\u043E\u0440\u0437\u0438\u043D\u044B"),{cartId:C.id});if(be(W))return Ue(W);throw Object.assign(new Error("[multi-cart service: getSingleCartState] \u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \u043A\u043E\u0440\u0437\u0438\u043D\u044B"),O({cartId:C.id},W))})}getCartsState(C){return s(this,null,function*(){const W=yield Promise.all(C.ids.map(V=>s(this,null,function*(){try{const ue=yield this.getSingleCartState({id:V,isCartStateValidationRequired:!!C.isCartStateValidationRequired,loyaltyCalculationRequired:!!C.loyaltyCalculationRequired,isSelectedItemGroups:C.isSelectedItemGroups,isSkipPersonalDiscounts:!!C.isSkipPersonalDiscounts});return ue||null}catch{return null}}))),te=[];for(const V of W)V&&te.push(V);return te})}}var _=n(19858),P=Object.defineProperty,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable,d=(k,C,W)=>C in k?P(k,C,{enumerable:!0,configurable:!0,writable:!0,value:W}):k[C]=W,h=(k,C)=>{for(var W in C||(C={}))r.call(C,W)&&d(k,W,C[W]);if(l)for(var W of l(C))e.call(C,W)&&d(k,W,C[W]);return k},v=(k,C,W)=>new Promise((te,V)=>{var ue=K=>{try{U(W.next(K))}catch(se){V(se)}},Z=K=>{try{U(W.throw(K))}catch(se){V(se)}},U=K=>K.done?te(K.value):Promise.resolve(K.value).then(ue,Z);U((W=W.apply(k,C)).next())});class a{constructor(C=(0,M.inject)(g.ZP)){this.mgate=C}addBpgOneItem(C){return v(this,null,function*(){if(!C)throw new Error("[bpg-one service: addBpgOneItem] \u043D\u0435 \u0431\u044B\u043B \u043F\u0435\u0440\u0435\u0434\u0430\u043D token");const W=yield this.mgate.fetch("/api/mobile/v2/cartService/offer/addWithBpg1",{token:C});if(be(W))return Ue(W);throw Object.assign(new Error(`[bpg-one service: addBpgOneItem] \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0442\u043E\u0432\u0430\u0440 \u043F\u043E \u0413\u041B\u04261 (${W.message})`),h({},W))})}}var u=n(34853),c=(k,C,W)=>new Promise((te,V)=>{var ue=K=>{try{U(W.next(K))}catch(se){V(se)}},Z=K=>{try{U(W.throw(K))}catch(se){V(se)}},U=K=>K.done?te(K.value):Promise.resolve(K.value).then(ue,Z);U((W=W.apply(k,C)).next())}),I=(k=>(k.Unknown="UNKNOWN",k.Include="INCLUDE",k.Exclude="EXCLUDE",k))(I||{});class N extends Error{constructor(C){super(`${u.QI.Checkout} Unsuccessful create address`),this.errors=C,Object.setPrototypeOf(this,N.prototype)}}class H{constructor(C=(0,M.inject)(g.ZP)){this.mgate=C}toggleCartItems(C){return c(this,null,function*(){const W=yield this.mgate.fetch("/api/mobile/v1/cartService/cartItem/toggle",C);if(!W.success)throw new N(W.errors);return W})}}var F=Object.defineProperty,B=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,J=(k,C,W)=>C in k?F(k,C,{enumerable:!0,configurable:!0,writable:!0,value:W}):k[C]=W,re=(k,C)=>{for(var W in C||(C={}))A.call(C,W)&&J(k,W,C[W]);if(B)for(var W of B(C))j.call(C,W)&&J(k,W,C[W]);return k},Pe=(k=>(k.Default="CART_TYPE_DEFAULT",k.Cnc="CART_TYPE_CNC",k.Cnd="CART_TYPE_CND",k.Dsm="CART_TYPE_MERCHANT",k.Digital="CART_TYPE_DIGITAL",k))(Pe||{}),De=(k=>(k.Digital="digital",k.Drugs="drugs",k.DrugsWithLimitations="drugs_with_limitations",k.Favor="favor",k.Ethanol="ethanol",k.Censorship="censorship",k.Plus18="plus18",k.Tobacco="tobacco",k.Fitting="fitting",k.NoCredit="no_credit",k.NoBuyNowPayLater="no_bnpl",k.NoInstallment="no_installment",k.NonReturnable="nonreturnable",k.Service="service",k.Import="import",k.Ref="ref",k.FreshSmk="fresh_smk",k))(De||{}),ge=(k=>(k.Piece="PIECE_TYPE",k.Weight="WEIGHT_TYPE",k.Unknown="UNKNOWN_TYPE",k))(ge||{}),fe=(k=>(k.Milligram="MILLIGRAM_WEIGHT_UNIT",k.Gram="GRAM_WEIGHT_UNIT",k.Kilogram="KILOGRAM_WEIGHT_UNIT",k.Tone="TONES_WEIGHT_UNIT",k.Unknown="UNKNOWN_WEIGHT_UNIT",k))(fe||{}),x=(k=>(k.Items="ITEMS",k.PaymentType="PAYMENT_TYPE",k.DeliveryType="DELIVERY_TYPE",k.Unknown="UNKNOWN",k.Prime="PRIME",k))(x||{}),ee=(k=>(k.Items="ITEMS_BONUS_TYPE",k.PaymentType="PAYMENT_TYPE_BONUS_TYPE",k.DeliveryType="DELIVERY_TYPE_BONUS_TYPE",k.Unknown="UNKNOWN_BONUS_TYPE",k.Prime="PRIME_BONUS_TYPE",k))(ee||{});function ae(k){return k.hasOwnProperty("cartId")}var ye=(k=>(k.Courier="COURIER",k.Pickup="PICKUP",k.Cnc="CLICK_COLLECT",k.Cnd="CLICK_DELIVERY",k))(ye||{});function Re(k){if((0,G.FP)(k?.geo)){const{geo:C}=k;return{addressId:k.addressId,address:k.address,geo:{lat:C?.lat.toString(),lon:C?.lon.toString()}}}return{address:k?.address}}function Ue(k){let C=Object.assign({},k);return C.cartId=k.identification.id,C.location={id:k.locationId,name:k.locationName,address:k.locationAddress},C.itemGroups&&C.itemGroups.length&&C.itemGroups.forEach(W=>{var te;W.offer.discounts.forEach(ue=>{ue.type==="BPG"&&(ue.type=L.Lb.Bpg2)}),W.cartType=C.type;const V={merchantId:W.offer.merchantId,discount:(te=W.offer.discounts.find(ue=>ue.type===L.Lb.Bpg2||ue.type===L.Lb.Sbpg))==null?void 0:te.type};W.cartType!=="CART_TYPE_CNC"&&(V.warehouseId=W.offer.warehouseId),W.comboId=(0,w.un)(re({goodsId:W.goods.goodsId},V)),W.goodsIdAlt&&(W.altComboId=(0,w.un)(re({goodsId:W.goodsIdAlt},V)))}),delete C.identification,delete C.locationId,delete C.locationName,delete C.locationAddress,delete C.success,C}function be(k){return!!k.identification&&!!k.identification.id}},19858:function(de,Y,n){n.d(Y,{AE:function(){return E},Dg:function(){return y},tW:function(){return m}});var w=n(53869),G=n(34853),L=n(8952),M=n(63653),g=n(79718),R=n(5756),T=(O,s,D)=>new Promise((p,_)=>{var P=e=>{try{r(D.next(e))}catch(d){_(d)}},l=e=>{try{r(D.throw(e))}catch(d){_(d)}},r=e=>e.done?p(e.value):Promise.resolve(e.value).then(P,l);r((D=D.apply(O,s)).next())}),E=(O=>(O.Add="add",O.Delete="delete",O.Internal="internal",O))(E||{});class y extends Error{constructor(s,D=null){super(`${G.QI.Checkout} Multicart offer update error`),this.params=s,this.cartState=D,Object.setPrototypeOf(this,y.prototype)}}class f extends Error{constructor(s,D){super(`${G.QI.Checkout} Multicart offer cart update error`),this.params=s,this.error=D,Object.setPrototypeOf(this,f.prototype)}}function o(O){return O?.type?[R.EI.Cnd,R.EI.Cnc].includes(O.type):!!O.cnc}function i(O){return{identification:O.identification,offer:O.items[0].offer,goods:O.items[0].goods,quantity:O.items[0].quantity,cartType:O.cartType,isBpg20:O.items[0].isBpg20,additionalData:O.items[0].additionalData,clientAddress:O.clientAddress,locationId:O.locationId,warehouseId:O.warehouseId}}class m{constructor(s=(0,w.inject)(L.ZP),D=(0,w.inject)(M.Z)){this.mgate=s,this.experimentsAndFeatures=D}updateOffers(s){return T(this,null,function*(){var D,p,_;const P=s.items.map(e=>({quantity:e.quantity,isBpg20:e.isBpg20,additionalData:e.additionalData,ids:(0,g.Z0)(e.comboId)})),l={identification:{id:s.cartId},items:P.map(e=>({offer:{id:null,merchantId:+e.ids.merchantId},goods:{goodsId:e.ids.goodsId},quantity:e.quantity,isBpg20:!!e.isBpg20,discounts:[],additionalData:e.additionalData})),cartType:s.type||null,clientAddress:s?.clientAddress?(0,R.yf)(s.clientAddress):null,locationId:o(s)?s?.locationId.toString():null,warehouseId:(D=s.warehouseId)==null?void 0:D.toString()};let r=null;try{if(l.items.length>1)r=yield this.mgate.fetch("/api/mobile/v2/cartService/offers/add",l);else{const e=i(l),d="/api/mobile/v2/cartService/offer/add";delete e.warehouseId,r=yield this.mgate.fetch(d,e)}}catch(e){const h=e instanceof L.nw?"body":"data",v=(p=e.response)==null?void 0:p[h];throw v?.code?new f(l,{code:v.code.toString(),title:v.message,detail:(_=v.details)!=null&&_.length?`${v.details[0]}`:"",field:""}):e}if(!r)throw new y(l);if(!r.success)throw r.errors[0];return(0,R.Qg)(r)})}}},75381:function(de,Y,n){n.d(Y,{Z:function(){return R}});var w=n(53869),G=n(34853),L=n(8952),M=(T,E,y)=>new Promise((f,o)=>{var i=s=>{try{O(y.next(s))}catch(D){o(D)}},m=s=>{try{O(y.throw(s))}catch(D){o(D)}},O=s=>s.done?f(s.value):Promise.resolve(s.value).then(i,m);O((y=y.apply(T,E)).next())});class g extends Error{constructor(){super(`${G.QI.PostCheckout} Order cancel error`),Object.setPrototypeOf(this,g.prototype)}}class R{constructor(E=(0,w.inject)(L.ZP)){this.mgate=E}getCancelReasonOptions(){return M(this,null,function*(){return(yield this.mgate.fetch("api/mobile/v1/orderService/cancellationReason/list")).data.cancellationReasons.map(y=>({id:y.reasonId,description:y.reason}))})}cancelOrder(E,y){return M(this,null,function*(){if((yield this.mgate.fetch("api/mobile/v1/orderService/order/cancel",{orderId:E,cancellationReasonIds:y})).success!=="1")throw new g})}}},96466:function(de,Y,n){n.d(Y,{$c:function(){return D},$R:function(){return _},E6:function(){return P},Vu:function(){return l},r_:function(){return e},ow:function(){return d},p3:function(){return h},oG:function(){return v},R0:function(){return a},PS:function(){return u},Pe:function(){return c},_Q:function(){return B},IQ:function(){return J},en:function(){return re},gv:function(){return Pe},F2:function(){return ge},ZP:function(){return fe}});var w=n(53869),G=n(91434),L=n(34853),M=n(8952),g=n(5756),R=Object.defineProperty,T=Object.defineProperties,E=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(x,ee,ae)=>ee in x?R(x,ee,{enumerable:!0,configurable:!0,writable:!0,value:ae}):x[ee]=ae,m=(x,ee)=>{for(var ae in ee||(ee={}))f.call(ee,ae)&&i(x,ae,ee[ae]);if(y)for(var ae of y(ee))o.call(ee,ae)&&i(x,ae,ee[ae]);return x},O=(x,ee)=>T(x,E(ee)),s=(x,ee,ae)=>new Promise((ye,Re)=>{var Ue=C=>{try{k(ae.next(C))}catch(W){Re(W)}},be=C=>{try{k(ae.throw(C))}catch(W){Re(W)}},k=C=>C.done?ye(C.value):Promise.resolve(C.value).then(Ue,be);k((ae=ae.apply(x,ee)).next())}),D=(x=>(x.OrderDeliveryHover="lkp_order_delivery_hover",x.OrderDetailDeliveryHover="lkp_order_detail_delivery_hover",x.CanceledOrderRepeatClick="lkp_canceled_order_repeat_click",x.CanceledOrderBackClick="lkp_canceled_order_back_click",x.CanceledOrderExitClick="lkp_canceled_order_exit_click",x.OrderDeliveryClick="lkp_order_delivery_click",x.OrderDetailDeliveryClick="lkp_order_detail_delivery_click",x))(D||{}),p=(x=>(x.Prepaid="prepaid_100",x.Refund="refund",x.RefundPrepaid="prepay_refund",x.Payment="payment",x.FullRefund="full_refund",x))(p||{});const _={prepaid_100:"\u041F\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u0430",refund:"\u0412\u043E\u0437\u0432\u0440\u0430\u0442 \u043F\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u044B",prepay_refund:"\u041E\u0442\u043C\u0435\u043D\u0430 \u043F\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u044B",payment:"\u0418\u0442\u043E\u0433",full_refund:"\u0412\u043E\u0437\u0432\u0440\u0430\u0442"};var P=(x=>(x.PendingCreation="FFFFFFF",x.CanceledNotPayed="FFRJ01F",x.Received="FFGT00F",x.Cancel="FFRJ00F",x.Canceling="FFCN0F",x))(P||{}),l=(x=>(x.NotPayed="CANCELLED_NOT_PAYED",x.Received="RECIEVED",x.Cancelled="CANCELED",x.Created="CREATED",x.SentToSeller="SENT_TO_MERCHANT",x.ApprovedBySeller="CONFIRMED_BY_MERCHANT",x.ReceivedByTransporter="RECIEVED_BY_COURIER",x.DeliveredToPickupPoint="DELIVERED_TO_PVZ",x.CourierRun="BY_COURIER",x.HandedToCourier="HANDED_TO_COURIER",x.Cancelling="CANCELING",x.PendingCreation="CREATING",x.FittingNow="FITTING_NOW",x.CourierReturning="COURIER_RETURNING",x))(l||{}),r=(x=>(x.Received="\u043F\u043E\u043B\u0443\u0447\u0435\u043D",x))(r||{}),e=(x=>(x.WaitForPayment="WAIT_FOR_PAYMENT",x.CanceledNotPayed="CANCELED_NOT_PAYED",x.InProgress="IN_PROGRESS",x.WaitingForDelivery="WAITING_FOR_DELIVERY",x.HandedToCourier="HANDED_TO_COURIER",x.Received="RECEIVED",x.Canceled="CANCELED",x.Canceling="CANCELING",x))(e||{}),d=(x=>(x[x.Uncached=0]="Uncached",x[x.Cached=1]="Cached",x))(d||{}),h=(x=>(x.UnknownCustomerOrderDeliveryOption="UNKNOWN_CUSTOMER_ORDER_DELIVERY_OPTION",x.OnDemandCustomerOrderDeliveryOption="ON_DEMAND_CUSTOMER_ORDER_DELIVERY_OPTION",x.OnDemandAbortedCustomerOrderDeliveryOption="ON_DEMAND_ABORTED_CUSTOMER_ORDER_DELIVERY_OPTION",x.OnDemandReadyCustomerOrderDeliveryOption="ON_DEMAND_READY_CUSTOMER_ORDER_DELIVERY_OPTION",x.OnDemandShippedCustomerOrderDeliveryOption="ON_DEMAND_SHIPPED_CUSTOMER_ORDER_DELIVERY_OPTION",x.FittingCustomerOrderDeliveryOption="FITTING_CUSTOMER_ORDER_DELIVERY_OPTION",x))(h||{}),v=(x=>(x.DeliveryRecipientUpdateAllowed="RECIPIENT_UPDATE_ALLOWED_UPDATE_FLAG",x.DeliveryDateUpdateAllowed="DATE_UPDATE_ALLOWED_UPDATE_FLAG",x))(v||{}),a=(x=>(x.UpdatingDeliveryRecipient="RECIPIENT_UPDATING_UPDATE_FLAG",x.UpdatingDeliveryDate="DATE_UPDATING_UPDATE_FLAG",x))(a||{}),u=(x=>(x.All="ORDER_FILTER_NOT_HIDDEN",x.Active="ORDER_FILTER_ACTIVE",x.Hidden="ORDER_FILTER_HIDDEN",x))(u||{}),c=(x=>(x[x.All=3]="All",x[x.Active=4]="Active",x[x.Hidden=2]="Hidden",x[x.Demand=5]="Demand",x))(c||{});class I extends Error{constructor(ee){super(`${L.QI.PostCheckout} Order delivery update error ${ee}`),Object.setPrototypeOf(this,I.prototype)}}class N extends Error{constructor(ee){super(`Order delivery get error ${ee}`),Object.setPrototypeOf(this,N.prototype)}}class H extends Error{constructor(ee){super("Order filters get error"),this.errors=ee,Object.setPrototypeOf(this,H.prototype)}}class F extends Error{constructor(ee){super(`${L.QI.PostCheckout} Order set status get error`),this.errors=ee,Object.setPrototypeOf(this,F.prototype)}}class B extends Error{constructor(ee){super(`${L.QI.PostCheckout} Order doesn't exist OR Customer doesn't have access to order ${ee}`),Object.setPrototypeOf(this,B.prototype)}}class A extends Error{constructor(ee){super(`${L.QI.PostCheckout} Order repeat error`),this.errors=ee,Object.setPrototypeOf(this,A.prototype)}}class j extends Error{constructor(ee){super(`${L.QI.PostCheckout} Stock list error`),this.errors=ee,Object.setPrototypeOf(this,j.prototype)}}class J extends Error{constructor(ee){super(`${L.QI.PostCheckout} call courier now error`),this.errors=ee,Object.setPrototypeOf(this,J.prototype)}}class re extends Error{constructor(ee){super(`${L.QI.PostCheckout} call courier now batch request error`),this.errors=ee,Object.setPrototypeOf(this,re.prototype)}}class Pe extends Error{constructor(ee){super(`${L.QI.PostCheckout} call return goods error`),this.errors=ee,Object.setPrototypeOf(this,Pe.prototype)}}class De extends Error{constructor(ee){super(`${L.QI.PostCheckout} get order stats error`),this.errors=ee,Object.setPrototypeOf(this,De.prototype)}}function ge(x){const ee=String(x.dateTimeFrom.hours).padStart(2,"0"),ae=String(x.dateTimeFrom.minutes).padStart(2,"0"),ye=String(x.dateTimeTo.hours).padStart(2,"0"),Re=String(x.dateTimeTo.minutes).padStart(2,"0");return{from:ee+":"+ae,to:ye+":"+Re}}class fe{constructor(ee=(0,w.inject)(M.ZP)){this.mgate=ee}getOrderList(ee,ae,ye){return s(this,null,function*(){var Re;try{return yield this.mgate.fetch("/api/mobile/v1/orderService/order/list",m(O(m({},ee),{filter:ae}),ye))}catch(Ue){if((0,G.Z)(Ue)){const be=((Re=Ue.response)==null?void 0:Re.data)||{};if(be.code===2)throw new B(JSON.stringify(be))}throw Ue}})}getOrderById(ee,ae=3){return s(this,null,function*(){var ye;try{const Re=yield this.mgate.fetch("/api/mobile/v1/orderService/order/list",{filter:{orderIds:[ee]},requestVersion:ae});if(!((ye=Re?.orders)!=null&&ye.length))throw new B(JSON.stringify(Re.errors));return Re.orders[0]}catch(Re){throw Re}})}getOrdersByIds(ee){return s(this,null,function*(){var ae;try{const ye=yield this.mgate.fetch("/api/mobile/v1/orderService/order/list",{filter:{orderIds:ee}});if(!((ae=ye?.orders)!=null&&ae.length))throw new B(JSON.stringify(ye.errors));return ye.orders}catch(ye){throw ye}})}updateDelivery(ee){return s(this,null,function*(){const ae=yield this.mgate.fetch("/api/mobile/v1/orderService/delivery/update",m({},ee));if(!ae.success)throw new I(JSON.stringify(ae.errors))})}getDelivery(ee){return s(this,null,function*(){const ae=yield this.mgate.fetch("/api/mobile/v2/orderService/delivery/get",m({},ee));if(!ae.success)throw new N(JSON.stringify(ae.errors));return ae.items})}getDeliveryOptions(ee){return s(this,null,function*(){const ae=yield this.mgate.fetch("/api/mobile/v1/orderService/calculate/forward",{deliveryId:ee}),ye=[];return ae.items.forEach(Re=>{Re.intervals.forEach(Ue=>{const[be,k]=Ue.split("-"),[C]=Re.date.split("T");ye.push({id:`${Re.date}+${Ue}`,start:Re.date,end:Re.date,timeSlot:{from:be,to:k},deliveryDate:C,deliveryPrice:0,deliveryBonus:0,deliveryTermsLink:"",maxDeliveryDays:null,paymentMethods:[],possiblePaymentMethods:[]})})}),ye})}repeatOrder(ee){return s(this,null,function*(){const ae=yield this.mgate.fetch("/api/mobile/v2/cartService/cart/repeatOrder",{orderId:ee});if(!ae.success)throw new A(ae.errors);return(0,g.Qg)(ae)})}getStockList(ee){return s(this,null,function*(){const ae=yield this.mgate.fetch("/api/mobile/v1/orderService/stock/list",{orderId:ee});if(!ae.success)throw new j(ae.errors);return ae.stocks})}callCourierNow(ee){return s(this,null,function*(){const ae=yield this.mgate.fetch("/api/mobile/v1/orderService/delivery/request",{deliveryId:ee});if(!ae.success)throw new J(ae.errors)})}callCourierNowBatchRequest(ee){return s(this,null,function*(){const ae=yield this.mgate.fetch("/api/mobile/v1/orderService/delivery/batchRequest",{deliveryIds:ee});if(ae.items.some(ye=>!ye.success)||!ae.success)throw new re(ae);return ae.success})}setOrderStatus(ee,ae){return s(this,null,function*(){const ye=yield this.mgate.fetch("/api/mobile/v1/orderService/hiddenOrder/manage",{orderIds:[ee],action:ae});if(!ye.success)throw new F(ye.errors);return ye.success})}getOrderStats(){return s(this,null,function*(){const ee=yield this.mgate.fetch("/api/mobile/v1/orderService/order/stats",{filterIds:["LAST_ACTIVE_ORDERS_FILTER_ID"]});if(!ee.success)throw new De(ee.errors);return ee.items[0].count})}callReturnRequest(ee,ae){return s(this,null,function*(){const ye=yield this.mgate.fetch("/api/mobile/v1/orderService/return/request",{deliveryId:ee,itemIds:ae});if(!ye.success)throw new Pe(ye.errors);return ye})}}},6444:function(de,Y,n){n.d(Y,{XL:function(){return m},uG:function(){return s},tm:function(){return D},S_:function(){return _},tT:function(){return P},u5:function(){return l},aG:function(){return r},PR:function(){return e},mF:function(){return h},zH:function(){return v},GX:function(){return a},pR:function(){return u},_A:function(){return I},yT:function(){return N},us:function(){return H},YQ:function(){return F},ZP:function(){return B}});var w=n(53869),G=n(8952),L=Object.defineProperty,M=Object.defineProperties,g=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,y=(A,j,J)=>j in A?L(A,j,{enumerable:!0,configurable:!0,writable:!0,value:J}):A[j]=J,f=(A,j)=>{for(var J in j||(j={}))T.call(j,J)&&y(A,J,j[J]);if(R)for(var J of R(j))E.call(j,J)&&y(A,J,j[J]);return A},o=(A,j)=>M(A,g(j)),i=(A,j,J)=>new Promise((re,Pe)=>{var De=x=>{try{fe(J.next(x))}catch(ee){Pe(ee)}},ge=x=>{try{fe(J.throw(x))}catch(ee){Pe(ee)}},fe=x=>x.done?re(x.value):Promise.resolve(x.value).then(De,ge);fe((J=J.apply(A,j)).next())}),m=(A=>(A.ApplePay="APPLE_PAY",A.Online="ONLINE",A.Cash="CASH",A.Card="PAYMENT_CARD",A.Spasibo="SPASIBO",A.SberPay="SBERPAY",A.Credit="CREDIT",A.Installment="INSTALLMENT",A.BuyNowPayLater="BNPL",A))(m||{}),O=(A=>(A.Sberbank="SBERBANK",A.SberPay="SBERPAY_ACQUIRING",A.SberCredit="SBERBANK_CREDIT",A.CloudPayments="CLOUD_PAYMENTS",A))(O||{}),s=(A=>(A.Card="CARD_ONLINE",A.ApplePay="APPLE_PAY",A.Offline="CASH_ON_DELIVERY",A.CardOnDelivery="CARD_ON_DELIVERY",A.Spasibo="SPASIBO",A.SberPay="SBERPAY",A.Credit="CREDIT",A.Installment="INSTALLMENT",A.BuyNowPayLater="BNPL",A))(s||{}),D=(A=>(A.Cash="cash",A.Card="card",A.PrepayOnline="prepayOnline",A.PrepaySpasibo="prepaySpasibo",A))(D||{});const p={CARD_ONLINE:"\u0411\u0430\u043D\u043A\u043E\u0432\u0441\u043A\u043E\u0439 \u043A\u0430\u0440\u0442\u043E\u0439 \u043E\u043D\u043B\u0430\u0439\u043D",CARD_ON_DELIVERY:"\u041A\u0430\u0440\u0442\u043E\u0439 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438",CASH_ON_DELIVERY:"\u041F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438",APPLE_PAY:"Apple Pay",SPASIBO:"\u0411\u043E\u043D\u0443\u0441\u044B",SBERPAY:"SberPay",CREDIT:"\u041A\u0440\u0435\u0434\u0438\u0442",INSTALLMENT:"\u0420\u0430\u0441\u0441\u0440\u043E\u0447\u043A\u0430",BNPL:"\u041F\u043B\u0430\u0442\u0438 \u0447\u0430\u0441\u0442\u044F\u043C\u0438"},_={APPLE_PAY:"Apple Pay",PAYMENT_CARD:"\u041A\u0430\u0440\u0442\u043E\u0439",CASH:"\u041D\u0430\u043B\u0438\u0447\u043D\u044B\u043C\u0438",ONLINE:"\u041F\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u0430",SPASIBO:"\u0411\u043E\u043D\u0443\u0441\u044B",SBERPAY:"SberPay",CREDIT:"\u041A\u0440\u0435\u0434\u0438\u0442",INSTALLMENT:"\u0420\u0430\u0441\u0441\u0440\u043E\u0447\u043A\u0430",BNPL:"\u041F\u043B\u0430\u0442\u0438 \u0447\u0430\u0441\u0442\u044F\u043C\u0438"},P={card:"\u041E\u043F\u043B\u0430\u0442\u0430 \u043A\u0430\u0440\u0442\u043E\u0439",cash:"\u041E\u043F\u043B\u0430\u0442\u0430 \u043D\u0430\u043B\u0438\u0447\u043D\u044B\u043C\u0438",prepayOnline:"\u041E\u043F\u043B\u0430\u0442\u0430 \u043E\u043D\u043B\u0430\u0439\u043D",prepaySpasibo:"\u041F\u0440\u0435\u0434\u043E\u043F\u043B\u0430\u0442\u0430 \u043A\u0430\u0440\u0442\u043E\u0439 \u0441 \u0431\u043E\u043D\u0443\u0441\u0430\u043C\u0438"},l={APPLE_PAY:"APPLE_PAY",CARD_ONLINE:"ONLINE",CASH_ON_DELIVERY:"CASH",CARD_ON_DELIVERY:"PAYMENT_CARD",SPASIBO:"SPASIBO",SBERPAY:"SBERPAY",CREDIT:"CREDIT",INSTALLMENT:"INSTALLMENT",BNPL:"BNPL"};var r=(A=>(A.NonSpasiboCard="cx-backend-mgate-0002",A.NonSpasiboCardProd="common-0002",A.NonSpasiboCardAfterRefactor="common-not-found",A.GeneralError="error",A))(r||{});const e="\u0417\u0430\u043A\u0430\u0437 \u0434\u043E\u0441\u0442\u0430\u0432\u0438\u0442 \u043F\u0440\u043E\u0434\u0430\u0432\u0435\u0446. \u041E\u043D \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u043B \u0441\u0432\u043E\u0438 \u0441\u043F\u043E\u0441\u043E\u0431\u044B \u043E\u043F\u043B\u0430\u0442\u044B";var d=(A=>(A.Visa="VISA",A.Mastercard="MASTERCARD",A.Maestro="MAESTRO",A.Mir="MIR",A.Jcb="JCB",A.Unknown="UNKNOWN",A))(d||{});const h=["VISA","MASTERCARD","MIR","MAESTRO","JCB"];var v=(A=>(A.Sberbank="SBERBANK",A.Unknown="",A))(v||{}),a=(A=>(A.Postpaid="POSTPAID",A))(a||{});function u(A){return A.hasOwnProperty("savedCard")}function c(A,j){return A&&(A!=="APPLE_PAY"||j)}function I(A){return["cx-backend-mgate-0002","common-0002","common-not-found"].includes(A.code)}function N(A,j){let J=[];return Array.isArray(A)&&(J=A.map(re=>l[re]).filter(re=>c(re,j))),J}function H(A,j){return A.map(J=>o(f({},J),{paymentType:l[J.paymentType],totalSumLimit:J.totalSumLimit?J.totalSumLimit:{}})).filter(J=>c(J.paymentType,j))}function F(A){const j={card:A.some(J=>["APPLE_PAY","CARD_ONLINE"].includes(J)),cash:A.some(J=>["CASH_ON_DELIVERY","CARD_ON_DELIVERY"].includes(J))};return Object.keys(j).filter(J=>j[J])}class B{constructor(j=(0,w.inject)(G.ZP)){this.mgate=j}getSavedPaymentCards(j){return i(this,null,function*(){return(yield this.mgate.fetch("api/mobile/v1/acquiringService/paymentCard/list",{acquiringIds:j?.length?j:void 0,isCheckSpasibo:!0})).paymentCards||[]})}removePaymentCard(j,J){return i(this,null,function*(){yield this.mgate.fetch("api/mobile/v1/acquiringService/paymentCard/delete",{paymentCardId:j,acquiringId:J})})}}},62881:function(de,Y,n){n.d(Y,{Uf:function(){return w},Yn:function(){return G},Hf:function(){return L}});const w="welcome-banner-sber-prime";var G=(R=>(R.SberPrime="TYPE_SBER_PRIME",R))(G||{}),L=(R=>(R.Unknown="SUBTYPE_UNKNOWN",R.SberPrimePlus="SUBTYPE_SBER_PRIME_PLUS",R))(L||{}),M=(R=>(R.Active="STATUS_ACTIVE",R.BlackList="STATUS_BLACK_LIST",R.NotActiveConditionsNotSatisfied="STATUS_NOT_ACTIVE_CONDITIONS_NOT_SATISFIED",R.NotActiveConditionsSatisfied="STATUS_NOT_ACTIVE_CONDITIONS_SATISFIED",R))(M||{}),g=(R=>(R.Activated="STATUS_CHANGE_TYPE_ACTIVATED",R.Expired="STATUS_CHANGE_TYPE_EXPIRED",R.Prolonged="STATUS_CHANGE_TYPE_PROLONGED",R.Stopped="STATUS_CHANGE_TYPE_STOPPED",R))(g||{})},21829:function(de,Y,n){n.d(Y,{GV:function(){return D},al:function(){return p},BF:function(){return e},bC:function(){return d},R0:function(){return a},ZP:function(){return u}});var w=n(53869),G=n(34853),L=n(8952),M=n(26021),g=n(48730),R=Object.defineProperty,T=Object.defineProperties,E=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(c,I,N)=>I in c?R(c,I,{enumerable:!0,configurable:!0,writable:!0,value:N}):c[I]=N,m=(c,I)=>{for(var N in I||(I={}))f.call(I,N)&&i(c,N,I[N]);if(y)for(var N of y(I))o.call(I,N)&&i(c,N,I[N]);return c},O=(c,I)=>T(c,E(I)),s=(c,I,N)=>new Promise((H,F)=>{var B=J=>{try{j(N.next(J))}catch(re){F(re)}},A=J=>{try{j(N.throw(J))}catch(re){F(re)}},j=J=>J.done?H(J.value):Promise.resolve(J.value).then(B,A);j((N=N.apply(c,I)).next())}),D=(c=>(c.Add="add",c.Edit="edit",c))(D||{});function p(c,I=!1){return{addressId:c.addressId,name:c.name,type:"OTHER",geo:c.geo||{lat:0,lon:0},full:c.full,postalCode:c.postalCode,region:c.region,regionId:c.regionId,regionKladrId:c.regionKladrId,regionType:c.regionType,city:c.city,cityType:c.city,street:c.street,streetType:c.streetType,house:c.house,houseType:c.houseType,building:c.building,buildingType:c.buildingType,intercom:c.intercom,entrance:c.entrance,apartment:"",floor:c.floor,flat:c.flat,flatType:c.flatType,isDeleted:!1,isDefault:I}}class _ extends Error{constructor(I){super("Unsuccessful create address"),this.errors=I,Object.setPrototypeOf(this,_.prototype)}}class P extends Error{constructor(I){super("Unsuccessful update default address"),this.errors=I,Object.setPrototypeOf(this,P.prototype)}}class l extends Error{constructor(I){super("Unsuccessful update address"),this.errors=I,Object.setPrototypeOf(this,l.prototype)}}class r extends Error{constructor(I){super("Unsuccessful delete address"),this.errors=I,Object.setPrototypeOf(this,l.prototype)}}class e extends Error{constructor(I){super("Unsuccessfully deleted profile"),this.errors=I,Object.setPrototypeOf(this,e.prototype)}}class d extends Error{constructor(I){super("Unsuccessful get webim hash"),this.errors=I,Object.setPrototypeOf(this,d.prototype)}}class h extends Error{constructor(I){super(`${G.QI.Personal} unsuccessful check can delete profile`),this.errors=I,Object.setPrototypeOf(this,h.prototype)}}class v extends Error{constructor(I){super(`${G.QI.Personal} unsuccessful get profile recovery token`),this.errors=I,Object.setPrototypeOf(this,v.prototype)}}class a extends Error{constructor(I){super(`${G.QI.Personal} unsuccessful profile recover`),this.errors=I,Object.setPrototypeOf(this,a.prototype)}}class u{constructor(I=(0,w.inject)(L.ZP),N=(0,w.inject)(g.Z)){this.mgate=I,this.cookie=N}getAddresses(){return s(this,null,function*(){return(yield this.mgate.fetch("/api/mobile/v1/profileService/address/list")).profileAddresses})}setFavoriteAddress(I,N){return s(this,null,function*(){const H={profileAddress:O(m({},I),{isDefault:!0}),oldAddressId:N||I?.addressId};try{const F=yield this.mgate.fetch("/api/mobile/v1/profileService/address/update",H);if(!F.success)throw new l(F.errors)}catch(F){throw F}})}setDefaultAddress(I){return s(this,null,function*(){const N={addressId:I},H=yield this.mgate.fetch("/api/mobile/v1/profileService/address/setDefault",N);if(!H.success)throw new P(H.errors)})}createAddress(I){return s(this,null,function*(){const N=p(I,!0),H={profileAddresses:[N]};try{const F=yield this.mgate.fetch("/api/mobile/v1/profileService/address/add",H);if(F.success)return N;throw new _(F.errors)}catch(F){throw F}})}deleteAddress(I){return s(this,null,function*(){const N={addressIds:I};try{const H=yield this.mgate.fetch("/api/mobile/v1/profileService/address/delete",N);if(H.success)return H.success;throw new r(H.errors)}catch(H){throw H}})}getCacheProfileAddress(){return(0,M.d)(this.cookie.getItem(L.j5)||"",null)}setCacheProfileAddress(I){this.cookie.setItem(L.j5,JSON.stringify({addressId:I.addressId,full:I.full,geo:I.geo}),{maxAge:60*60*24*7})}clearCacheProfileAddress(){this.cookie.removeItem(L.j5)}getWebimHash(){return s(this,null,function*(){const{success:I,errors:N,hash:H,fields:F}=yield this.mgate.fetch("/api/mobile/v1/profileService/webim/getHash");if(!I)throw new d(N);return{fields:F,hash:H}})}checkCanDeleteProfile(){return s(this,null,function*(){const I=yield this.mgate.fetch("/api/mobile/v1/profileService/profileDeleteStatus/get");if(!I.success)throw new h(I.errors);return I})}deleteProfile(){return s(this,null,function*(){const I=yield this.mgate.fetch("/api/mobile/v1/profileService/profile/delete");if(!I.success)throw new e(I.errors);return I})}getProfileRecoveryInfo(I){return s(this,null,function*(){const N=yield this.mgate.fetch("/api/mobile/v1/profileService/profileRecoveryInfo/get",{recoveryToken:I});if(!N.success)throw new v(N.errors);return N})}profileRecover(I){return s(this,null,function*(){const N=yield this.mgate.fetch("/api/mobile/v1/profileService/profile/recover",{recoveryToken:I});if(!N.success)throw new a(N.errors);return N})}}},27210:function(de,Y,n){n.d(Y,{i:function(){return T},Z:function(){return E}});var w=n(53869),G=n(8952),L=(y,f,o)=>new Promise((i,m)=>{var O=p=>{try{D(o.next(p))}catch(_){m(_)}},s=p=>{try{D(o.throw(p))}catch(_){m(_)}},D=p=>p.done?i(p.value):Promise.resolve(p.value).then(O,s);D((o=o.apply(y,f)).next())}),M=(y=>(y.ShowNew="showNew",y.ShowEndingSoon="showEndingSoon",y))(M||{});class g extends Error{constructor(f){super("Unsuccessful fetch promotion filters"),this.errors=f,Object.setPrototypeOf(this,g.prototype)}}class R extends Error{constructor(f){super("Unsuccessful fetch promotion list"),this.errors=f,Object.setPrototypeOf(this,R.prototype)}}class T extends Error{constructor(f){super("Unsuccessful fetch promo codes list"),this.errors=f,Object.setPrototypeOf(this,T.prototype)}}class E{constructor(f=(0,w.inject)(G.ZP)){this.mgate=f}getPromoList(f){return L(this,null,function*(){const o=f?.types||[],i=Object.values(M),m=o.filter(s=>!i.includes(s)),O=yield this.mgate.fetch("api/mobile/v1/promotionService/promotion/list",{regionId:this.mgate.getLocationId(),showNew:o.includes("showNew"),showEndingSoon:o.includes("showEndingSoon"),categories:f.categories,types:m,page:f.page,offset:f.offset,perPage:f.limit});if(!O.success)throw new R(O.errors);return{page:parseInt(O.page),total:parseInt(O.total),promotions:(O?.promotions||[]).map(s=>({id:parseInt(s.id),name:s.name,title:s.title,image:s.image,description:s.description,promoLink:s.promoLink,priority:parseInt(s.priority),active:parseInt(s.active),isArchive:parseInt(s.isArchive),countdown:parseInt(s.countdown),activeFrom:s.activeFrom,activeTo:s.activeTo}))}})}getPromoFilters(){return L(this,arguments,function*(f=[],o=[]){const i=Object.values(M),m=o.filter(D=>!i.includes(D)),O={categories:f,types:m,showNew:o.includes("showNew"),showEndingSoon:o.includes("showEndingSoon")},s=yield this.mgate.fetch("api/mobile/v1/promotionService/filters/list",O);if(!s?.success)throw new g(s.errors);return{categories:s.categories,types:s.types}})}getPromoCodesList(f){return L(this,null,function*(){const o=f?{flags:["INCLUDE_PUBLIC_FLAG"]}:{},{success:i,errors:m,promoCodes:O}=yield this.mgate.fetch("/api/mobile/v1/promotionService/promoCode/list",o);if(!i)throw new T(m);return O})}}},22760:function(de,Y,n){n.d(Y,{Z:function(){return s}});var w=n(53869),G=n(8952),L=n(66129),M=n(79718),g=Object.defineProperty,R=Object.defineProperties,T=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,o=(D,p,_)=>p in D?g(D,p,{enumerable:!0,configurable:!0,writable:!0,value:_}):D[p]=_,i=(D,p)=>{for(var _ in p||(p={}))y.call(p,_)&&o(D,_,p[_]);if(E)for(var _ of E(p))f.call(p,_)&&o(D,_,p[_]);return D},m=(D,p)=>R(D,T(p)),O=(D,p,_)=>new Promise((P,l)=>{var r=h=>{try{d(_.next(h))}catch(v){l(v)}},e=h=>{try{d(_.throw(h))}catch(v){l(v)}},d=h=>h.done?P(h.value):Promise.resolve(h.value).then(r,e);d((_=_.apply(D,p)).next())});class s{constructor(p=(0,w.inject)(G.ZP)){this.mgate=p}getRecentViews(p){return O(this,null,function*(){const _=yield this.mgate.fetch("api/mobile/v2/customerRecentlyViewedService/goods/list",{addressId:p});return{items:_.items.map(P=>m(i({},P),{comboId:(0,M.un)({goodsId:(0,L.Z)(P,["goods","goodsId"],""),merchantId:(0,L.Z)(P,["favoriteOffer","merchantId"],""),warehouseId:(0,L.Z)(P,["favoriteOffer","warehouseId"],"")})})),collections:_.collections.map(P=>({title:P.title,url:`/catalog/${P.slug}/`}))}})}}},34890:function(de,Y,n){n.d(Y,{Z:function(){return M}});var w=n(53869),G=n(8952),L=(g,R,T)=>new Promise((E,y)=>{var f=m=>{try{i(T.next(m))}catch(O){y(O)}},o=m=>{try{i(T.throw(m))}catch(O){y(O)}},i=m=>m.done?E(m.value):Promise.resolve(m.value).then(f,o);i((T=T.apply(g,R)).next())});class M{constructor(R=(0,w.inject)(G.ZP)){this.mgate=R}getRegionInfo(R){return L(this,null,function*(){const T=yield this.mgate.fetch("api/mobile/v1/regionService/region/search",{kladrId:R});return T?.regions.find(E=>E.kladrId===R)})}}},63934:function(de,Y,n){n.d(Y,{E1:function(){return R},oC:function(){return T},Z4:function(){return E},ZP:function(){return y}});var w=n(53869),G=n(8952),L=n(67176),M=n(79718),g=(f,o,i)=>new Promise((m,O)=>{var s=_=>{try{p(i.next(_))}catch(P){O(P)}},D=_=>{try{p(i.throw(_))}catch(P){O(P)}},p=_=>_.done?m(_.value):Promise.resolve(_.value).then(s,D);p((i=i.apply(f,o)).next())});class R extends Error{constructor(o){super("Unsuccessful review alphabet index fetch"),this.errors=o,Object.setPrototypeOf(this,R.prototype)}}class T extends Error{constructor(o){super("Unsuccessful review category fetch"),this.errors=o,Object.setPrototypeOf(this,T.prototype)}}class E extends Error{constructor(o){super("Unsuccessful review seo fetch"),this.errors=o,Object.setPrototypeOf(this,E.prototype)}}class y{constructor(o=(0,w.inject)(G.ZP)){this.mgate=o}getReviewAlphabetIndex(){return g(this,null,function*(){const o=yield this.mgate.fetch("api/mobile/v1/catalogService/reviewCatalog/index");if(!o.success)throw new R(o.errors);const i=o.index.index,m=i.filter(_=>"\u0410\u0411\u0412\u0413\u0414\u0415\u0401\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F".includes(_.symbol)),O=i.filter(_=>"ABCDEFGHIJKLMNOPQRSTUVWXYZ".includes(_.symbol)),s=i.filter(_=>"0123456789".includes(_.symbol)),D=s.reduce((_,P)=>(_.categories=_.categories.concat(P.categories),_),{symbol:"0 \u2014 9",categories:[]}),p=(0,L.Z)([...m,...O,...s],i);return{rusLetterIndex:m,engLetterIndex:O,numberIndex:[D],otherSymbolIndex:p}})}getReviewCategoryData(o,i,m){return g(this,null,function*(){const O=yield this.mgate.fetch("/api/mobile/v1/catalogService/reviewCatalog/getCategory",{url:o,categorySlug:i,brandSlug:m});if(!O.success)throw new T(O.errors);return{breadcrumbs:(0,M.bC)(O.breadcrumbs,o),brands:O.brands,otherCategories:O.otherCategories}})}getReviewAlphabetSeo(){return g(this,null,function*(){const o=yield this.mgate.fetch("/api/mobile/v1/seoService/reviewCatalogIndexSeo/get");if(!o.success)throw new E(o.errors);return o.seoMeta})}getReviewCategorySeo(o,i,m,O,s){return g(this,null,function*(){const D=yield this.mgate.fetch("/api/mobile/v1/seoService/reviewCatalogCategorySeo/get",{categorySlug:o,brandSlug:i,sort:m,userAgent:O,page:s});if(!D.success)throw new E(D.errors);return D.seoMeta})}}},94901:function(de,Y,n){n.d(Y,{HL:function(){return g},Lb:function(){return R},uG:function(){return T},vr:function(){return E},EJ:function(){return y},Yi:function(){return o},OK:function(){return i},aP:function(){return m},N:function(){return s},kM:function(){return D},$B:function(){return l},ZP:function(){return v}});var w=n(53869),G=n(8952),L=n(30573),M=(a,u,c)=>new Promise((I,N)=>{var H=A=>{try{B(c.next(A))}catch(j){N(j)}},F=A=>{try{B(c.throw(A))}catch(j){N(j)}},B=A=>A.done?I(A.value):Promise.resolve(A.value).then(H,F);B((c=c.apply(a,u)).next())});const g=2,R="unauthorizedReviewVote",T="[\u041E\u0446\u0435\u043D\u043A\u0430 \u043E\u0442\u0437\u044B\u0432\u0430] \u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u043E\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043B\u0430\u0439\u043A\u0430/\u0434\u0438\u0437\u043B\u0430\u0439\u043A\u0430 \u0434\u043B\u044F \u043E\u0442\u0437\u044B\u0432\u0430 \u043F\u043E\u043A\u0443\u043F\u0430\u0442\u0435\u043B\u044F";var E=(a=>(a.Total="total",a.Published="published",a.Banned="banned",a.Waiting="waiting",a))(E||{}),y=(a=>(a.Decline="decline",a.Question="question",a))(y||{}),f=(a=>(a.Helpfulness="HELPFULNESS",a.Created="CREATED_AT",a.Rating="RATING",a.Main="IS_MAIN",a))(f||{}),o=(a=>(a.Other="0",a.Spam="1",a.Unacceptable="2",a.Abusive="3",a))(o||{}),i=(a=>(a.Unknown="UNKNOWN",a.Feedback="FEEDBACK",a.Question="QUESTION",a.Answer="ANSWER",a))(i||{});const m=Object.freeze([{label:"\u041F\u043E\u043B\u0435\u0437\u043D\u044B\u0435",value:"HELPFULNESS:DESC"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435",value:"CREATED_AT:DESC"},{label:"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0441\u0442\u0430\u0440\u044B\u0435",value:"CREATED_AT:ASC"},{label:"\u0421 \u0432\u044B\u0441\u043E\u043A\u0438\u043C \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u043E\u043C",value:"RATING:DESC"},{label:"\u0421 \u043D\u0438\u0437\u043A\u0438\u043C \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u043E\u043C",value:"RATING:ASC"}]);function O(a,u){const{likes:c,dislikes:I,userVote:N}=a;u.dislikes=I,u.userVote=N,u.likes=c}function s(a,u,c){if(!a)return;const I=a.id,N=u.findIndex(H=>H.id===I);N>=0&&O(a,u[N]),I===c?.id&&O(a,c)}function D(){return(0,L.$P)(R)}function p(a){if(!a)return{type:"HELPFULNESS",direction:"desc"};if(typeof a=="string"){const[u,c]=a.split(":");return{type:u,direction:c}}return{type:"HELPFULNESS",direction:"desc"}}function _(a){if(!a)return null;const u=a.getFullYear(),c=(1+a.getMonth()).toString().padStart(2,"0");return`${a.getDate().toString().padStart(2,"0")}.${c}.${u}`}class P extends Error{constructor(u){super("Unsuccessful review create"),this.error=u,Object.setPrototypeOf(this,P.prototype)}}class l extends Error{constructor(u){super("Goods for review list error"),this.errors=u,Object.setPrototypeOf(this,l.prototype)}}class r extends Error{constructor(u){super("Vote for review error"),this.errors=u,Object.setPrototypeOf(this,r.prototype)}}function e(a){var u;return a?{id:a.id,isUnique:!!a.isUnique,comment:a.body&&a.body||"",pros:a.pros&&a.pros||"",cons:a.cons&&a.cons||"",createdAt:a.createdAtDate,author:{name:a.authorName,iconLink:a.avatarLink},likes:a.likeCount,dislikes:a.dislikeCount,photos:a.photos,videos:a.video,rating:a.rating||0,isMain:a.isMain,goodsId:a.goods&&a.goods.goodsId||"",userVote:a.customerVote.vote||null,comments:a.comments,selectors:((u=a.goodsFeatures)==null?void 0:u.selectors)||[],merchant:a.merchant}:null}function d(a){const u=[{rating:1,count:0,percent:0},{rating:2,count:0,percent:0},{rating:3,count:0,percent:0},{rating:4,count:0,percent:0},{rating:5,count:0,percent:0}];return a.forEach(c=>{u[c.rating-1]=c}),u.reverse()}class h extends Error{constructor(u){super("Unsuccessful fetch customer reviews"),this.errors=u,Object.setPrototypeOf(this,h.prototype)}}class v{constructor(u=(0,w.inject)(G.ZP)){this.mgate=u}voteLikeAdd(u){return this.mgate.fetch("/api/mobile/v1/productReviewService/like/add",{reviewId:u})}voteDislikeAdd(u){return this.mgate.fetch("/api/mobile/v1/productReviewService/dislike/add",{reviewId:u})}complainAboutContent(u){return this.mgate.fetch("/api/mobile/v1/complainService/complain/send",u)}voteFromResult(u,c){return M(this,null,function*(){let I=null;if(u===L.Pl.Like?I=yield this.voteLikeAdd(c):I=yield this.voteDislikeAdd(c),!I.success)throw new r(I.errors);return I})}getProductReviews(u){return M(this,arguments,function*({goodsId:c,sort:I,page:N=1,perPage:H=10,flags:F={withPhoto:!1},ratings:B=[]}){var A;const j=yield this.mgate.fetch("/api/mobile/v1/catalogService/catalog/productCardReviews",{goodsId:c,limit:H,offset:H*(N-1),sort:p(I),flags:F,ratings:B});return{reviews:Array.isArray(j.reviews)&&j.reviews.map(re=>e(re))||[],total:j.total,page:Math.floor(j.offset/j.limit)||1,perPage:j.limit,lastPage:Math.ceil(j.total/j.limit),withPhoto:Number(((A=j.counts)==null?void 0:A.withPhoto)||!0)}})}getProductReviewsHandler(u,c){return M(this,null,function*(){try{return yield this.getProductReviews({goodsId:u,sort:m[0].value,perPage:20,page:1,ratings:[],flags:{withPhoto:!1}})}catch(I){c.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u043E\u0442\u0437\u044B\u0432\u043E\u0432 PDP",details:I})}})}getReviewRatingProperties(u){return M(this,null,function*(){const c=yield this.mgate.fetch("/api/mobile/v1/productReviewService/ratingDetails/list",{goodsId:u}),I={};return(c?.ratingAttributes||[]).forEach(H=>{I[H.id]={value:null,props:{type:"rating",label:H.name}}}),I})}createNewReview(u){return M(this,null,function*(){const c=yield this.mgate.fetch("/api/mobile/v1/productReviewService/review/add",u);if(c.error)throw new P(c.error);return c})}checkIsReviewable(u){return M(this,null,function*(){const c=yield this.mgate.fetch("/api/mobile/v1/productReviewService/goods/checkReviewable",u);return c?.goodsIds||[]})}getPersonalReviews(u,c){return M(this,null,function*(){const I=yield this.mgate.fetch("/api/mobile/v1/productReviewService/review/list",{offset:u,limit:c});if(!I.success)throw new h(I.errors);return{stats:I.stats,reviews:I.reviews.map(N=>{var H,F,B;const A=new Date(N.displayCreatedAt);return{id:N.id,image:N.item&&N.item.goods.titleImage,contentFlags:N.item&&N.item.contentFlags,contentFlagsStr:N.item&&N.item.contentFlagsStr,rating:N.rating,productTitle:N.item&&N.item.goods.title,date:_(A),goodsId:(H=N.item)==null?void 0:H.goods.goodsId,statusId:N.stateId&&N.stateId.toLowerCase(),statusTitle:N.stateMessage,productUrl:(B=(F=N.item)==null?void 0:F.goods)!=null&&B.slug?`/catalog/details/${N.item.goods.slug}/`:"",banReason:N.banReason,photos:N.photoUrls,videos:N.video,details:{pros:N.pros,cons:N.cons,body:N.body},likeCount:N.likeCount,dislikeCount:N.dislikeCount,orderId:N.customAttributes.orderCustomerId,bonusDetail:{text:N.statusDetail&&N.statusDetail.statusText,detail:N.statusDetail&&N.statusDetail.statusDetail}}})}})}getProductCardReviewInfo(u,c){return M(this,null,function*(){try{const I=yield this.mgate.fetch("/api/mobile/v1/catalogService/productCardReviewInfo/get",{goodsId:u}),{previewMediaGalleryItems:N,reviewsCount:H,questionCount:F,mainReview:B,ratingAttributes:A,reviewStats:j,rating:J}=I;let re=(N||[]).map(Pe=>({url:Pe.url,id:Pe.reviewId}));return re.length>7&&(re=re.slice(0,7)),{previewGallery:re,totalCount:Number(I.totalMediaGalleryItems)||0,reviewsCount:parseInt(H)||0,questionsCount:parseInt(F)||0,mainReview:e(B),reviewsStats:d(j),reviewsAttributes:A,rating:J}}catch(I){c.handleError({message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u043F\u0440\u0435\u0432\u044C\u044E \u0433\u0430\u043B\u0435\u0440\u0435\u0438 \u043E\u0442\u0437\u044B\u0432\u043E\u0432 PDP",details:I})}})}getGoodsForReviewList(u=0,c=20){return M(this,null,function*(){const I={offset:String(u),limit:String(c)},N=yield this.mgate.fetch("/api/mobile/v1/productReviewService/goodsForReview/list",I);if(!N.success)throw new l(N.errors);return N.goods})}banGoodsForReview(u){return M(this,null,function*(){const c=yield this.mgate.fetch("/api/mobile/v1/productReviewService/goodsForReview/discard",{goodsId:u});if(!c.success)throw new l(c.errors);return c})}}},85419:function(de,Y,n){n.d(Y,{Z:function(){return T}});var w=n(53869),G=n(89940),L=n(8952),M=n(45105),g=(E,y,f)=>new Promise((o,i)=>{var m=D=>{try{s(f.next(D))}catch(p){i(p)}},O=D=>{try{s(f.throw(D))}catch(p){i(p)}},s=D=>D.done?o(D.value):Promise.resolve(D.value).then(m,O);s((f=f.apply(E,y)).next())});class R extends Error{constructor(y){super("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0442\u0432\u044F\u0437\u043A\u0435 \u0421\u0431\u0435\u0440 ID"),this.errors=y,Object.setPrototypeOf(this,R.prototype)}}class T{constructor(y=(0,w.inject)(L.ZP),f=(0,w.inject)(M.ZP),o=(0,w.inject)(G.ZP)){this.mgate=y,this.securityService=f,this.httpClient=o}deactivateSberId(){return g(this,null,function*(){try{return yield this.mgate.fetch("/api/mobile/v1/securityService/oauthSession/reset")}catch(y){throw Array.isArray(y)?new R(y):y}})}}},5088:function(de,Y,n){n.d(Y,{sW:function(){return D},i3:function(){return p},g1:function(){return _},ZP:function(){return P}});var w=n(53869),G=n(8952),L=n(34697),M=n(13642),g=n(79718),R=Object.defineProperty,T=Object.defineProperties,E=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(l,r,e)=>r in l?R(l,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[r]=e,m=(l,r)=>{for(var e in r||(r={}))f.call(r,e)&&i(l,e,r[e]);if(y)for(var e of y(r))o.call(r,e)&&i(l,e,r[e]);return l},O=(l,r)=>T(l,E(r)),s=(l,r,e)=>new Promise((d,h)=>{var v=c=>{try{u(e.next(c))}catch(I){h(I)}},a=c=>{try{u(e.throw(c))}catch(I){h(I)}},u=c=>c.done?d(c.value):Promise.resolve(c.value).then(v,a);u((e=e.apply(l,r)).next())}),D=(l=>(l.Unknown="UNKNOWN",l.Brand="BRAND",l.BrandZone="BRAND_ZONE",l.Sis="SHOP_IN_SHOP",l.Category="CATEGORY",l.CategoryTag="CATEGORY_POPULAR_TAG",l.CategoryBrand="CATEGORY_BRAND",l.CategoryBrandModel="CATEGORY_BRAND_MODEL",l.CategoryCustom="CATEGORY_CUSTOM_ATTRIBUTE",l.Author="AUTHOR",l.PopularItem="CATEGORY_POPULAR_ITEM",l.FrequentQuery="FREQUENT_QUERY",l.History="HISTORY",l.CategoryDepartment="CATEGORY_DEPARTMENT",l.CategoryBrandCustomAttribute="CATEGORY_BRAND_CUSTOM_ATTRIBUTE",l.Constructor="CONSTRUCTOR",l))(D||{}),p=(l=>(l.Prompt="PROMPT",l.PrefixConst="PREFIX_CONST",l.PrefixFlex="PREFIX_FLEX",l))(p||{}),_=(l=>(l.Prompt="prompt",l.Granted="granted",l.Denied="denied",l))(_||{});class P{constructor(r=(0,w.inject)(G.ZP),e=(0,w.inject)(M.ZP)){this.mgate=r,this.adultStore=e}getSuggestions(r){return s(this,null,function*(){const e=(yield this.mgate.fetch("api/mobile/v3/catalogService/catalog/searchSuggest",{searchText:r.value,searchRequestVersion:g.EM,merchantId:r.merchantId,ageMore18:!!Number(this.adultStore.disclaimerStatus)})).suggests;return e?.reduce((d,h)=>(typeof h=="object"&&d.push(O(m({},h),{id:(0,L.y)()})),d),[])})}}},45105:function(de,Y,n){n.d(Y,{zO:function(){return i},n7:function(){return O},AI:function(){return s},JY:function(){return D},Hs:function(){return p},NK:function(){return _},fk:function(){return P},s_:function(){return l},yw:function(){return r},sM:function(){return d},M_:function(){return h},ZP:function(){return a}});var w=n(53869),G=n(91434),L=n(89940),M=n(8952),g=n(29002),R=n(45037),T=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,f=(u,c)=>{var I={};for(var N in u)E.call(u,N)&&c.indexOf(N)<0&&(I[N]=u[N]);if(u!=null&&T)for(var N of T(u))c.indexOf(N)<0&&y.call(u,N)&&(I[N]=u[N]);return I},o=(u,c,I)=>new Promise((N,H)=>{var F=j=>{try{A(I.next(j))}catch(J){H(J)}},B=j=>{try{A(I.throw(j))}catch(J){H(J)}},A=j=>j.done?N(j.value):Promise.resolve(j.value).then(F,B);A((I=I.apply(u,c)).next())}),i=(u=>(u[u.CreateUser=0]="CreateUser",u[u.ChangePhoneNumber=1]="ChangePhoneNumber",u[u.WriteOffBonus=2]="WriteOffBonus",u[u.ApplyPromocode=3]="ApplyPromocode",u[u.SavedCardPayment=4]="SavedCardPayment",u))(i||{});const m="goodsOAuth",O="redirectAfterOauthUri",s="oAuthErrors";var D=(u=>(u.Sber="SBER",u))(D||{});function p(u,c,I){if(u&&g.LS.setItem("uri",u,O),c){const N=c,{auth_with:H,target_page:F}=N,B=f(N,["auth_with","target_page"]),A=Object.keys(B).find(j=>j.toLowerCase()==="sberidredirect")||"";delete B[A],g.LS.setItem("queryParams",B,O)}I&&g.LS.setItem("hashParams",I,O),!u&&!c&&!I&&g.LS.clearAll(O)}function _(u){if(!u.query)return"";const c=Object.keys(u.query).find(I=>I.toLowerCase()==="sberidredirect")||"";return c?decodeURIComponent(u.query[c]):""}function P(u){if(!u.query)return"";const c=Object.keys(u.query).find(I=>I.toLowerCase()==="token")||"";return c?decodeURIComponent(u.query[c]):""}function l(u){var c;return((c=u?.query)==null?void 0:c.auth_with)==="SBER"||!!_(u)}function r(u){return!!_(u)&&!!P(u)}class e extends Error{constructor(c){super("Unsuccessful init OAuth session request"),this.errors=c,Object.setPrototypeOf(this,e.prototype)}}function d(){g.LS.clearAll(m)}var h=(u=>(u.Unknown="UNKNOWN",u.Registered="REGISTERED",u.IncompleteRegistration="REGISTERED_BUT_INCOMPLETE",u.Authorized="AUTHORIZED",u.MarkAsDeleted="MARK_AS_DELETED",u))(h||{});class v extends Error{constructor(c){super("Unsuccessful start OAuth session request"),this.errors=c,Object.setPrototypeOf(this,v.prototype)}}class a{constructor(c=(0,w.inject)(M.ZP),I=(0,w.inject)(L.ZP)){this.mgate=c,this.http=I}getSberClientId(c){return o(this,null,function*(){const{clientId:I}=yield this.mgate.fetch("/api/mobile/v1/securityService/oauthSession/init",{provider:c});return I})}initOauthSession(c,I){return o(this,null,function*(){const N=yield this.mgate.fetch("/api/mobile/v1/securityService/oauthSession/init",{provider:c});if(!N.success)throw new e(N.errors);return N.authUriWeb=N.authUriWeb.replace("{redirectUri}",I),g.LS.setItem("nonce",N.nonce,m),g.LS.setItem("redirectUri",I,m),N})}startOauthSession(c,I,N){return o(this,null,function*(){const H=yield this.mgate.fetch("/api/mobile/v1/securityService/oauthSession/start",{provider:c,code:I,flags:N,nonce:g.LS.getItem("nonce",m),redirectUri:g.LS.getItem("redirectUri",m)});if(H.success||!H.success&&H.responseType==="MARK_AS_DELETED")return H;if(!H.success)throw(0,R.AB)("Failed To Log In","Auth",{action:c.toLowerCase(),label:H.errors.map(F=>F.userMsg).join("; ")}),new v(H.errors)})}sendCode(c,I,N){return o(this,null,function*(){var H;const F={context:c,phone:I};N&&(F.captchaToken=N);try{return(yield this.http.post("/api/mobile/v1/securityService/extraAuthentication/keySend",F)).data}catch(B){throw(0,G.Z)(B)&&((H=B.response)==null?void 0:H.status)===401&&(yield this.mgate.resetMgateSession()),B}})}checkCode(c,I,N){return o(this,null,function*(){return(yield this.http.post("/api/mobile/v1/securityService/extraAuthentication/authenticate",{context:c,key:I,phone:N})).data})}}},20677:function(de,Y,n){n.d(Y,{Ds:function(){return R},VE:function(){return E},ZP:function(){return f}});var w=n(53869),G=n(8952),L=n(79718),M=(o,i,m)=>new Promise((O,s)=>{var D=P=>{try{_(m.next(P))}catch(l){s(l)}},p=P=>{try{_(m.throw(P))}catch(l){s(l)}},_=P=>P.done?O(P.value):Promise.resolve(P.value).then(D,p);_((m=m.apply(o,i)).next())});class g extends Error{constructor(i){super("Fetch listing seo data exception"),this.errors=i,Object.setPrototypeOf(this,g.prototype)}}class R extends Error{constructor(){super("Fetch listing seo data exception - page does not exist"),Object.setPrototypeOf(this,R.prototype)}}class T extends Error{constructor(i){super("Fetch search seo data exception"),this.errors=i,Object.setPrototypeOf(this,g.prototype)}}function E(o){return o.reduce((i,m)=>(i[m.title]=m.link,i),{})}class y extends Error{constructor(i){super(`Fetch static page seo data exception ${JSON.stringify(i)}`),this.errors=i,Object.setPrototypeOf(this,y.prototype)}}class f{constructor(i=(0,w.inject)(G.ZP)){this.mgate=i}fetchListingSeoData(i){return M(this,null,function*(){var m,O,s,D,p,_,P,l;const r={collectionId:i.collectionId.toString(),url:i.url,page:i.page.toString(),censorshipConfirmation:i.censorshipConfirmation?i.censorshipConfirmation.toString():"0",userAgent:window?window.navigator.userAgent:"ssr"};i.selectedFilters&&(r.selectedFilters=i.selectedFilters);const e=yield this.mgate.fetch("api/mobile/v1/seoService/seo/listing",r);if(((O=(m=e?.errors)==null?void 0:m[0])==null?void 0:O.code)==="cx-backend-seo-meta-invalid-listing-page")throw new R;if(!e||!e.success)throw new g(e.errors);const d=e.popularItems.map(u=>({comboId:(0,L.un)({goodsId:u.goods.goodsId,merchantId:u.favoriteOffer.merchantId,warehouseId:u.favoriteOffer.warehouseId}),badges:u.badges,goods:{goodsId:u.goods.goodsId,titleImage:u.goods.titleImage,title:u.goods.title,attributes:u.goods.attributes,slug:u.goods.slug,images:u.goods.images},relatedItems:u.relatedItems||[],reviewCount:u.reviewCount,rating:u.rating,finalPrice:u.finalPrice,bonusPercent:u.bonusPercent,bonusAmount:u.bonusAmount,contentFlags:u.goods.contentFlags||[],contentFlagsStr:u.goods.contentFlagsStr||[],deliveryPossibilities:u.deliveryPossibilities||[],favoriteOffer:{merchantId:u.favoriteOffer.merchantId,merchantName:u.favoriteOffer.merchantName,id:u.favoriteOffer.id,finalPrice:u.favoriteOffer.price,locationId:u.favoriteOffer.locationId},name:u.goods.title,mainImage:u.goods.titleImage})),h=[];if(((s=e.settings)==null?void 0:s.itemType)==="1"&&((D=e.settings)!=null&&D.itemTypeSynonyms.length))for(let u=0;u<e.settings.itemTypeSynonyms.length;u++)for(let c=0;c<e.settings.itemTypeSynonyms[u].limit;c++)h.push(e.settings.itemTypeSynonyms[u].name);const v={limit:(p=e.settings)!=null&&p.itemListingN?+e.settings.itemListingN:void 0,showPriceFrom:(_=e.settings)!=null&&_.price?e.settings.price==="1":!0,additionalAttributes:h.length?h:null},a={};return e.tags&&e.tags.filterTags.forEach(u=>{var c;u.filterCode&&u.filterCode&&u.filterValue&&u.slug&&(a[u.filterCode]||(a[u.filterCode]={}),a[u.filterCode][(c=u.filterValue)==null?void 0:c.toLowerCase()]=u.slug)}),{collectionTags:((P=e.tags)==null?void 0:P.collectionTags)||null,filterTags:a,popularItems:d,links:e.links,seoMeta:e.seoMeta,listingSettings:v,brandsLinks:((l=e.tags)==null?void 0:l.filterTags)||null}})}fetchSearchSeoData(i){return M(this,null,function*(){const m=yield this.mgate.fetch("api/mobile/v1/seoService/seo/search",i);if(!m||!m.success)throw new T(m.errors);return m.seoMeta})}fetchProductDetailsSeoData(i,m){return M(this,null,function*(){return!i||!m?null:yield this.mgate.fetch("/api/mobile/v1/seoService/pdp/get",{goodsId:i,url:m})})}fetchStaticPageSeoData(i){return M(this,null,function*(){if(!i)return null;const m=yield this.mgate.fetch("/api/mobile/v1/seoService/staticPageSeo/get",{slug:i});if(!m||!m.success)throw new y(m.errors);return m.seoMeta})}}},1682:function(de,Y,n){n.d(Y,{Z:function(){return w}});class w{constructor(L){this._listeners=new Map,this._observer=new IntersectionObserver(this.executeListeners.bind(this),L)}observe(L,M){this._listeners.set(L,M),this._observer.observe(L)}unobserve(L){this._listeners.delete(L),this._observer.unobserve(L)}clear(){this._listeners.forEach((L,M)=>{this._observer.unobserve(M)}),this._listeners.clear()}executeListeners(L){for(const M of L){const g=this._listeners.get(M.target);g&&g(M,this)}}}},13257:function(de,Y,n){n.d(Y,{f7:function(){return p},wf:function(){return _},b_:function(){return P},LN:function(){return l},ZP:function(){return v}});var w=n(53869),G=n(38019),L=n(8952),M=n(55740),g=n(20025),R=Object.defineProperty,T=Object.defineProperties,E=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(a,u,c)=>u in a?R(a,u,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[u]=c,m=(a,u)=>{for(var c in u||(u={}))f.call(u,c)&&i(a,c,u[c]);if(y)for(var c of y(u))o.call(u,c)&&i(a,c,u[c]);return a},O=(a,u)=>T(a,E(u)),s=(a,u,c)=>new Promise((I,N)=>{var H=A=>{try{B(c.next(A))}catch(j){N(j)}},F=A=>{try{B(c.throw(A))}catch(j){N(j)}},B=A=>A.done?I(A.value):Promise.resolve(A.value).then(H,F);B((c=c.apply(a,u)).next())}),D=(a=>(a.Header="STATIC_MENU_TYPE_HEADER_MENU",a.Footer="STATIC_MENU_TYPE_FOOTER_MENU",a))(D||{}),p=(a=>(a.Standard="LAYOUT_TYPE_STANDARD",a.Empty="LAYOUT_TYPE_EMPTY",a))(p||{}),_=(a=>(a.Unknown="STATIC_FILE_TYPE_UNKNOWN",a.Css="STATIC_FILE_TYPE_CSS",a.Js="STATIC_FILE_TYPE_JS",a.Image="STATIC_FILE_TYPE_IMAGE",a.Font="STATIC_FILE_TYPE_FONT",a))(_||{}),P=(a=>(a.Unknown="STATIC_FILE_PLATFORM_UNKNOWN",a.Desktop="STATIC_FILE_PLATFORM_DESKTOP",a.Mobile="STATIC_FILE_PLATFORM_MOBILE",a))(P||{}),l=(a=>(a.WithoutContainer="WITHOUT_CONTAINER",a))(l||{});function r(a){return!a.isHidden}function e(a){const u={special:a.isSpecial,express_onboarding:a.link==="/supermarket/",analytics_supermarket_header_btn:a.link==="/supermarket/"},c=Object.entries(u).filter(([,I])=>I).map(([I])=>I);return{id:parseInt(a.id),text:a.text,link:a.link,classes:c,children:(a?.children||[]).filter(r).map(e),imageUrl:a.imageUrl}}function d(a){var u,c;const I=((u=a.find(H=>H.type==="STATIC_MENU_TYPE_HEADER_MENU"))==null?void 0:u.menu)||[],N=((c=a.find(H=>H.type==="STATIC_MENU_TYPE_FOOTER_MENU"))==null?void 0:c.menu)||[];return{headerMenu:I.filter(r).map(e),footerMenu:N.filter(r).map(e)}}class h extends Error{constructor(u){super(`Unsuccessful static page content fetch: ${JSON.stringify(u)}`),this.errors=u,Object.setPrototypeOf(this,h.prototype)}}class v{constructor(u=(0,w.inject)(L.ZP),c=(0,w.inject)(g.Z)){this.mgate=u,this.logger=c,this.cachedMenus=null}getMenus(){return s(this,null,function*(){var u,c;try{const I=(u=this.cachedMenus)==null?void 0:u.get(this.mgate.getLocationId());if(I)return I;const N=yield this.mgate.fetch("api/mobile/v1/staticContentService/staticMenu/get",{type:["STATIC_MENU_TYPE_HEADER_MENU","STATIC_MENU_TYPE_FOOTER_MENU"]});if(!((c=N?.menus)!=null&&c.length))return this.logger.errorFormatted({message:"[getMenus] empty header and footer menus fetched",details:N}),G.K;const H=d(N.menus);return this.cachedMenus?this.cachedMenus.set(this.mgate.getLocationId(),H):this.cachedMenus=new Map([[this.mgate.getLocationId(),H]]),H}catch{return G.K}})}getStaticPageContent(u){return s(this,null,function*(){if(!u)return null;const c=yield this.mgate.fetch("/api/mobile/v1/staticContentService/page/get",{slug:(0,M.yx)(u)});if(!c||!c.page)throw new h(c.errors);const{page:I}=c,N=I?.options||[];return O(m({},I),{options:N})})}}},55412:function(de,Y,n){n.d(Y,{R:function(){return M},L:function(){return g}});var w=n(26021),G=n(29002);const L="goods_bus_key";function M(R,T){if(R?.key!==L)return;const E=R.newValue;if(E)return(0,w.d)(E,{})[T]}function g(R,T){window&&G.LS.setItem(R,T,L)}},29426:function(de,Y,n){n.d(Y,{NS:function(){return i},_h:function(){return O},eK:function(){return s},EX:function(){return p},ZP:function(){return P}});var w=n(53869),G=n(8952),L=n(45037),M=n(48730),g=Object.defineProperty,R=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,y=(l,r,e)=>r in l?g(l,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[r]=e,f=(l,r)=>{for(var e in r||(r={}))T.call(r,e)&&y(l,e,r[e]);if(R)for(var e of R(r))E.call(r,e)&&y(l,e,r[e]);return l},o=(l,r,e)=>new Promise((d,h)=>{var v=c=>{try{u(e.next(c))}catch(I){h(I)}},a=c=>{try{u(e.throw(c))}catch(I){h(I)}},u=c=>c.done?d(c.value):Promise.resolve(c.value).then(v,a);u((e=e.apply(l,r)).next())});const i="goods_lead_gen",m={notAvailable:{subscriber:{source:{contactSource:"goods_not_available_form"},registrationSource:"goods",forceUpdate:!0,optIn:!0,externalId:"8888"},flocktoryResponseFormat:!1},hardforms:{subscriber:{source:{contactSource:"hardforms"},registrationSource:"hardforms",forceUpdate:!0,optIn:!1,triggerId:"8137",listId:"653344812"},flocktoryResponseFormat:!0}};var O=(l=>(l.Hard="hardforms",l.Na="notAvailable",l))(O||{}),s=(l=>(l.TooManyLetters="TOO_MANY_LETTERS",l.NoInterest="NO_INTEREST",l.Other="OTHER",l.UnknownReason="UNKNOWN_REASON",l))(s||{});function D(l){const r=l.getFullYear(),e=(1+l.getMonth()).toString().padStart(2,"0");return`${l.getDate().toString().padStart(2,"0")}.${e}.${r}`}class p extends Error{constructor(r){super("Unsuccessful subscribing"),this.errors=r,Object.setPrototypeOf(this,p.prototype)}}class _ extends Error{constructor(r){super("Unsuccessful unsubscribing"),this.error=r,Object.setPrototypeOf(this,_.prototype)}}class P{constructor(r=(0,w.inject)(G.ZP),e=(0,w.inject)(M.Z)){this.mgate=r,this.cookie=e}addSubscriptionInfo(r){return o(this,null,function*(){const e=yield this.mgate.fetch("api/mobile/v1/subscriptionService/subscription/add",{data:{subscriber:f({email:r.email,registrationStatus:r.registrationStatus||"",registrationFinishURL:r.registrationFinishURL||""},m[r.type].subscriber),flocktoryResponseFormat:m[r.type].flocktoryResponseFormat}});if(e.success)this.cookie.setItem(i,"1");else throw new p(e.errors)})}subscribe(r){(0,L.Zl)(r.email,{date:D(new Date),source:"cradNA"}),(window.rrApiOnReady=window.rrApiOnReady||[]).push(()=>{window.rrApi.subscribeOnItemBackInStock(r.email,r.goodsId)}),(0,L.AB)("Requested Availability Report","Behaviour",{product:{skuCode:r.goodsId},contactInfo:{email:r.email}}),(0,L.AB)("Notify availability","CategoryNameLevel1|CategoryNameLastLevel",{product:{skuCode:r.goodsId}}),this.addSubscriptionInfo({email:r.email,type:"notAvailable"})}unsubscribe(r,e,d,h){return o(this,null,function*(){var v,a;const u=!d.length,c=yield this.mgate.fetch("api/mobile/v1/subscriptionService/subscription/unsubscribe",{data:{emailHash:r,unsubscribeReason:u?["UNKNOWN_REASON"]:d,unsubscribeOtherReason:h}});if(!c.success)throw new _((v=c.errors)!=null&&v.length?(a=c.errors[0])==null?void 0:a.userMsg:"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430");return`\u0412\u044B \u043E\u0442\u043F\u0438\u0441\u0430\u043B\u0438\u0441\u044C \u043E\u0442 \u0440\u0430\u0441\u0441\u044B\u043B\u043A\u0438. \u041F\u0438\u0441\u044C\u043C\u0430 \u043F\u043E \u0437\u0430\u043A\u0430\u0437\u0430\u043C \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0430\u0442 \u043F\u0440\u0438\u0445\u043E\u0434\u0438\u0442\u044C \u043D\u0430 ${e}`})}decodeEmail(r){return o(this,null,function*(){var e;if(!r)return null;const d=yield this.mgate.fetch("api/mobile/v1/subscriptionService/subscription/decodeEmail",{data:{emailHash:r}});return((e=d?.data)==null?void 0:e.email)||null})}}},20655:function(de,Y,n){n.d(Y,{uU:function(){return m},QM:function(){return O},Yj:function(){return _},$b:function(){return l},A0:function(){return r},ZP:function(){return h}});var w=n(53869),G=n(8952),L=Object.defineProperty,M=Object.defineProperties,g=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,y=(v,a,u)=>a in v?L(v,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):v[a]=u,f=(v,a)=>{for(var u in a||(a={}))T.call(a,u)&&y(v,u,a[u]);if(R)for(var u of R(a))E.call(a,u)&&y(v,u,a[u]);return v},o=(v,a)=>M(v,g(a)),i=(v,a,u)=>new Promise((c,I)=>{var N=B=>{try{F(u.next(B))}catch(A){I(A)}},H=B=>{try{F(u.throw(B))}catch(A){I(A)}},F=B=>B.done?c(B.value):Promise.resolve(B.value).then(N,H);F((u=u.apply(v,a)).next())});const m="WHEELS";var O=(v=>(v.Summer="SEASON_SUMMER",v.Winter="SEASON_WINTER",v.MudAndShow="SEASON_MUD_AND_SNOW",v.WinterNoSpikes="SEASON_WINTER_NO_SPIKES",v.WinterWithSpikes="SEASON_WINTER_WITH_SPIKES",v))(O||{}),s=(v=>(v.Vendor="TYPE_VENDOR",v.Model="TYPE_MODEL",v.Year="TYPE_YEAR",v.Modification="TYPE_MODIFICATION",v.SizeGroup="TYPE_SIZE_GROUP",v.SeasonsCriteria="TYPE_SEASONS_CRITERIA",v.DimensionCriteria="TYPE_DIMENSIONS_CRITERIA",v))(s||{}),D=(v=>(v.Original="TYPE_ORIGINAL",v.Replace="TYPE_REPLACE",v.Tuning="TYPE_TUNING",v))(D||{});const p=["TYPE_ORIGINAL","TYPE_REPLACE"],_={TYPE_ORIGINAL:"\u0428\u0442\u0430\u0442\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440",TYPE_REPLACE:"\u0410\u043B\u044C\u0442\u0435\u0440\u043D\u0430\u0442\u0438\u0432\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440",TYPE_SEASON:"\u0421\u0435\u0437\u043E\u043D\u043D\u043E\u0441\u0442\u044C",TYPE_TUNING:"\u0422\u044E\u043D\u0438\u043D\u0433\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440"};class P extends Error{constructor(){super("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0434\u0430\u043D\u043D\u044B\u0445 TireWidget"),Object.setPrototypeOf(this,P.prototype)}}const l=[{name:"\u041B\u0435\u0442\u043D\u0438\u0435",type:"SEASON_SUMMER"},{name:"\u0417\u0438\u043C\u043D\u0438\u0435",type:"SEASON_WINTER"},{name:"\u041D\u0430 \u043B\u044E\u0431\u043E\u0439 \u0441\u0435\u0437\u043E\u043D",type:"SEASON_MUD_AND_SNOW"}],r=[{name:"\u0428\u0438\u043F\u044B",type:"SEASON_WINTER_WITH_SPIKES"},{name:"\u0411\u0435\u0437 \u0448\u0438\u043F\u043E\u0432",type:"SEASON_WINTER_NO_SPIKES"}];function e(v){const a=[...v];return a.forEach(u=>{if(u.sizeType==="TYPE_TUNING"){const c=a.findIndex(I=>I.sizeType==="TYPE_REPLACE");c>-1&&(a[c]=o(f({},a[c]),{dimensions:[...a[c].dimensions,...u.dimensions]}))}}),a}function d(v){let a=[];return p.forEach(u=>{a.push(v.find(c=>c.sizeType===u))}),a.filter(u=>u)}class h{constructor(a=(0,w.inject)(G.ZP)){this.mgate=a}getFilterTiresWidget(){return i(this,arguments,function*(a={}){try{const u=yield this.mgate.fetch("/api/mobile/v1/tireWizardService/filter/search",a),c={};Array.from(new Set(u.listingCriterias.flatMap(F=>F.name))).forEach(F=>{c[F]=u.listingCriterias.filter(B=>B.name===F).map(({value:B})=>a.searchType===m?String(Number(B)):B)});const N=e(u.filterOptions.sizeGroups),H=d(N);return{options:o(f({},u.filterOptions),{sizeGroups:H}),listingCriterias:c}}catch{throw new P}})}}},2413:function(de,Y,n){n.d(Y,{GV:function(){return g},vU:function(){return R},Cw:function(){return T},xu:function(){return E},yu:function(){return y},ZP:function(){return f}});var w=n(53869),G=n(8952),L=n(55740),M=(o,i,m)=>new Promise((O,s)=>{var D=P=>{try{_(m.next(P))}catch(l){s(l)}},p=P=>{try{_(m.throw(P))}catch(l){s(l)}},_=P=>P.done?O(P.value):Promise.resolve(P.value).then(D,p);_((m=m.apply(o,i)).next())}),g=(o=>(o.Unknown="TYPE_UNKNOWN",o.Home="TYPE_HOME",o.Listing="TYPE_LISTING",o.Cart="TYPE_CART",o.Favorites="TYPE_CUSTOMER_GOODS_LIST",o.Profile="TYPE_PROFILE",o.Addresses="TYPE_ADDRESS",o.Product="TYPE_PRODUCT_CARD",o.Bonuses="TYPE_BONUS_CARD",o.OrderList="TYPE_ORDER_LIST",o.Order="TYPE_ORDER",o.StaticPage="TYPE_STATIC_PAGE",o.Catalog="TYPE_CATALOG",o.MenuNode="TYPE_MENU_NODE",o.Promo="TYPE_PROMO",o.Redirect301="TYPE_REDIRECT_301",o))(g||{}),R=(o=>(o.BrandZone="BRAND",o.Sis="SIS",o.PromoPage="DEFAULT",o.MerchantPromo="MERCHANT",o))(R||{}),T=(o=>(o.PromoDefault="default",o.PromoMerchant="merchant",o.PromoMultiMerchant="multi-merchant",o.PromoCnx="cnx",o.ShopInShop="sis",o.BrandZone="brand",o))(T||{});const E=42;function y(o){var i,m,O,s,D,p,_,P,l,r,e,d,h,v,a,u,c;const I=Number((s=(O=(m=(i=o.params)==null?void 0:i.collection)==null?void 0:m.attributes)==null?void 0:O.customCollectionListingSettings)==null?void 0:s.itemListingSize);return{type:o.type,params:{goodsId:((p=(D=o.params)==null?void 0:D.goods)==null?void 0:p.goodsId)||null,collection:(_=o.params)!=null&&_.collection?{collectionId:o.params.collection.collectionId,title:o.params.collection.title,listingSize:I||E,hierarchy:o.params.collection.hierarchy||[]}:null,mainCollectionId:((l=(P=o.params)==null?void 0:P.collection)==null?void 0:l.mainListingCollectionId)||null,mainListingCollectionRelativeUrl:((e=(r=o.params)==null?void 0:r.collection)==null?void 0:e.mainListingCollectionRelativeUrl)||null,menuNode:((d=o.params)==null?void 0:d.menuNode)||null,page:((h=o.params)==null?void 0:h.page)||1,url:((v=o.params)==null?void 0:v.url)||"",merchant:((a=o.params)==null?void 0:a.merchant)||null,promo:(u=o.params)!=null&&u.promoPage?{promoType:(c=o.params.promoPage.promoType)==null?void 0:c.trim(),isFlatListing:o.params.promoPage.isFlatListing,merchantId:o.params.promoPage.merchantId}:null}}}class f{constructor(i=(0,w.inject)(G.ZP)){this.mgate=i}fetchUrlParams(i){return M(this,null,function*(){i=(0,L.OO)(i);const m=yield this.mgate.fetch("api/mobile/v1/urlService/url/parse",{url:i},{skipMgateSessionStart:!0});return y(m)})}}},11475:function(de,Y,n){n.d(Y,{Z:function(){return y}});var w=n(53869),G=n(8952),L=n(26021),M=n(29002),g=n(48730),R=n(55466),T=(f,o,i)=>new Promise((m,O)=>{var s=_=>{try{p(i.next(_))}catch(P){O(P)}},D=_=>{try{p(i.throw(_))}catch(P){O(P)}},p=_=>_.done?m(_.value):Promise.resolve(_.value).then(s,D);p((i=i.apply(f,o)).next())});class E extends Error{constructor(o){super(`Unsuccessful user location receiving: ${o}`),Object.setPrototypeOf(this,E.prototype)}}class y{constructor(o=(0,w.inject)(G.ZP),i=(0,w.inject)(g.Z)){this.mgate=o,this.cookie=i}getUserRegion(){return T(this,null,function*(){const o=(0,L.d)(this.cookie.getItem(G.cr)||"",{id:"",kladrId:""});if(o.id&&o.kladrId)return{regionId:o.id,kladrId:o.kladrId};const i=yield this.mgate.fetch("api/mobile/v1/userLocationService/region/get");if(i?.success)return this.mgate.setLocationId(i.region),{regionId:i.region,kladrId:i.kladrId}})}saveUserRegion(o,i){return T(this,null,function*(){return!o||!i?!1:!!(yield this.mgate.fetch("api/mobile/v1/userLocationService/region/save",{region:o,kladr_id:i})).success})}getUserLocation(o){return T(this,null,function*(){var i;const m=yield this.mgate.fetch("api/mobile/v1/regionService/region/search",o);if(!((i=m?.regions)!=null&&i.length))throw new E(`\u0441\u043F\u0438\u0441\u043E\u043A \u0440\u0435\u0433\u0438\u043E\u043D\u043E\u0432 \u043F\u0443\u0441\u0442, input ${JSON.stringify(o)}`);const O=m.regions[0],s={id:O.id,kladrId:O.kladrId,displayName:O.dislplayName,isDeliveryEnabled:O.isDeliveryEnabled,geo:(0,R.tL)(O.geoLat,O.geoLon)};return M.LS.setItem(s.id,s,R.Jo),s})}}},30573:function(de,Y,n){n.d(Y,{Ec:function(){return G},Z7:function(){return L},CK:function(){return M},Pl:function(){return g},$P:function(){return R},gF:function(){return T}});var w=n(29002);const G="unauthorized_vote",L="[\u041E\u0446\u0435\u043D\u043A\u0430 \u043E\u0442\u0432\u0435\u0442\u0430] \u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u043E\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043B\u0430\u0439\u043A\u0430/\u0434\u0438\u0437\u043B\u0430\u0439\u043A\u0430 \u0434\u043B\u044F \u043E\u0442\u0432\u0435\u0442\u0430",M="[\u041E\u0446\u0435\u043D\u043A\u0430 \u0432\u043E\u043F\u0440\u043E\u0441\u0430] \u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u043E\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043B\u0430\u0439\u043A\u0430 \u0434\u043B\u044F \u0432\u043E\u043F\u0440\u043E\u0441\u0430";var g=(E=>(E.Like="LIKE",E.Dislike="DISLIKE",E.Unknown="UNKNOWN",E))(g||{});function R(E){const y=w.LS.getItem(E,G);return y?(w.LS.deleteItem(E,G),y):null}function T(E){return!!w.LS.getItem(E,G)}},41935:function(de,Y,n){n.d(Y,{fM:function(){return M},AO:function(){return g},ZP:function(){return R}});var w=n(53869),G=n(8952),L=(T,E,y)=>new Promise((f,o)=>{var i=s=>{try{O(y.next(s))}catch(D){o(D)}},m=s=>{try{O(y.throw(s))}catch(D){o(D)}},O=s=>s.done?f(s.value):Promise.resolve(s.value).then(i,m);O((y=y.apply(T,E)).next())});class M extends Error{constructor(E){super("Unsuccessful get fms unit"),this.errors=E,Object.setPrototypeOf(this,M.prototype)}}class g extends Error{constructor(E){super("Unsuccessful get banks"),this.errors=E,Object.setPrototypeOf(this,g.prototype)}}class R{constructor(E=(0,w.inject)(G.ZP)){this.mgate=E}getFmsUnit(E){return L(this,null,function*(){const y=yield this.mgate.fetch("api/mobile/v1/yellowPagesService/fmsUnit/search",{code:E});if(!y.success)throw new M(y.errors);return y.fmsUnitItems})}getBanks(E){return L(this,null,function*(){const y=yield this.mgate.fetch("api/mobile/v1/yellowPagesService/bank/search",{bic:E});if(!y.success)throw new g(y.errors);return y.banks})}}}}]);
