try{var retailrocket=function(n){return(n=n||{}).modules=n.modules||{ns:n,window:window,document:document},n.setModule=function(e,t,r){for(var o=0;o<t.length;o++){if(void 0===n.modules[t[o]]||null===n.modules[t[o]])throw new Error("Invalid dependency with index "+o+" in module "+e);t[o]=n.modules[t[o]]}r=r.apply(r,t)||{};(n.modules[e]=r).useNs&&(n[e]=r)},n}(retailrocket),rrLibrary=(retailrocket.setModule("cdnurls",[],function(){return{cdn:"https://cdn.retailrocket.ru",cdnimg:"https://cdnimg.retailrocket.ru"}}),retailrocket.setModule("punycode",[],function(){var e,k,b,h,n,i,t,r,s,o,c,v,C;function I(e){throw new RangeError(o[e])}function u(e,t){for(var r=e.length,o=[];r--;)o[r]=t(e[r]);return o}function d(e,t){var r=e.split("@"),o="",r=(1<r.length&&(o=r[0]+"@",e=r[1]),(e=e.replace(s,".")).split("."));return o+u(r,t).join(".")}function y(e){for(var t,r,o=[],n=0,i=e.length;n<i;)55296<=(t=e.charCodeAt(n++))&&t<=56319&&n<i?56320==(64512&(r=e.charCodeAt(n++)))?o.push(((1023&t)<<10)+(1023&r)+65536):(o.push(t),n--):o.push(t);return o}function g(e){return u(e,function(e){var t="";return 65535<e&&(t+=C((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+C(e)}).join("")}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,r){var o=0;for(e=r?v(e/i):e>>1,e+=v(e/t);c*h>>1<e;o+=b)e=v(e/c);return v(o+(c+1)*e/(e+n))}function l(e){var t,r,o,n,i,a,s,c=[],u=e.length,d=0,l=128,m=72,p=e.lastIndexOf("-");for(p<0&&(p=0),r=0;r<p;++r)128<=e.charCodeAt(r)&&I("not-basic"),c.push(e.charCodeAt(r));for(o=0<p?p+1:0;o<u;){for(n=d,i=1,a=b;u<=o&&I("invalid-input"),s=e.charCodeAt(o++),(b<=(s=s-48<10?s-22:s-65<26?s-65:s-97<26?s-97:b)||s>v((k-d)/i))&&I("overflow"),d+=s*i,!(s<(s=a<=m?1:m+h<=a?h:a-m));a+=b)i>v(k/(s=b-s))&&I("overflow"),i*=s;m=w(d-n,t=c.length+1,0==n),v(d/t)>k-l&&I("overflow"),l+=v(d/t),d%=t,c.splice(d++,0,l)}return g(c)}function m(e){for(var t,r,o,n,i,a,s,c,u,d,l=[],m=(e=y(e)).length,p=128,g=72,f=t=0;f<m;++f)(s=e[f])<128&&l.push(C(s));for(r=o=l.length,o&&l.push("-");r<m;){for(n=k,f=0;f<m;++f)p<=(s=e[f])&&s<n&&(n=s);for(n-p>v((k-t)/(c=r+1))&&I("overflow"),t+=(n-p)*c,p=n,f=0;f<m;++f)if((s=e[f])<p&&++t>k&&I("overflow"),s==p){for(i=t,a=b;!(i<(u=a<=g?1:g+h<=a?h:a-g));a+=b)l.push(C(S(u+(d=i-u)%(u=b-u),0))),i=v(d/u);l.push(C(S(i,0))),g=w(t,c,r==o),t=0,++r}++t,++p}return l.join("")}return!(e="object"==typeof global&&global)||e.global!==e&&e.window!==e&&e.self!==e||(a=e),k=2147483647,h=26,n=38,i=700,t=/^xn--/,r=/[^\x20-\x7E]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,o={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=(b=36)-1,v=Math.floor,C=String.fromCharCode,{version:"1.3.2",ucs2:{decode:y,encode:g},decode:l,encode:m,toASCII:function(e){return d(e,function(e){return r.test(e)?"xn--"+m(e):e})},toUnicode:function(e){return d(e,function(e){return t.test(e)?l(e.slice(4).toLowerCase()):e})}}}),retailrocket.setModule("utils.daysToSecond",[],function(){return{daysToSecond:function(e){return 24*e*60*60}}}),retailrocket.setModule("utils.cookies",["punycode"],function(a){var r="rr-testCookie";function o(e,t,r){for(var o=location.hostname.split("."),n=Math.min(2,o.length);n<=o.length;n++){var i=o.slice(o.length-n).join(".");if(s(e,t,r,"/",i),c(e)==t)break}}function s(e,t,r,o,n){var r=(r=null==t?-1:r)<63072e3?r:63072e3,i=new Date,t=(i.setSeconds(i.getSeconds()+r),escape(t||"")+(r?"; expires="+i.toUTCString():"")+";path="+(o||"/")+(n?";domain="+a.toASCII(n):"")+"; SameSite=Lax;");document.cookie=e+"="+t}function c(e){for(var t,r,o=document.cookie.split(";"),n=0;n<o.length;n++)if(t=o[n].substr(0,o[n].indexOf("=")),r=o[n].substr(o[n].indexOf("=")+1),(t=t.replace(/^\s+|\s+$/g,""))==e)return unescape(r);return null}return{setRootCookie:o,areCookiesEnabled:function(){try{document.cookie}catch(e){return!1}var e,t=!!navigator.cookieEnabled;return void 0!==navigator.cookieEnabled||t||(document.cookie=r,t=-1!==document.cookie.indexOf(r)),!0===t&&(o(r,e="testvalue",10),t=c(r)===e),t},setCookie:s,getCookie:c}}),retailrocket.setModule("webPushCookies",["utils.cookies"],function(t){var r="rrwps",o="rrwpswu";return{setOnRootWebPushSwUpdated:function(e){t.setRootCookie(o,!0,e)},setOnRootWebPushSubscriptionSaved:function(e){t.setRootCookie(r,!0,e)},getWebPushSubscriptionSaved:function(){return t.getCookie(r)},getWebPushSwUpdated:function(){return t.getCookie(o)}}}),retailrocket.setModule("trackingCookies",["utils.daysToSecond","utils.cookies"],function(o,n){var t="rreiwfc",r="rrtwdf",i="rraem",a="rrdev",s="rrpvid",c="rrmrlct",u="rrlevt",d="rcuid",l="rrviewed",m="rrbasket",p="rr-RecomItemId",g="rr-MethodName",f="rr-Suggester",k="rr-viewItemId",b="rr-addToBasketItemId",h="rr-RecomAddToCartItemId",v="rr-AddToCartMethodName",C="rr-AddToCartSuggester",e="rr-subFormLastView",I="rr-VisitorSegment";return{getForceClosedFlagCookie:function(){return n.getCookie(t)},getDeactivatedFlagCookie:function(){return n.getCookie(r)},getIsVisitorAgreedToReceiveMarketingMailCookie:function(){return n.getCookie(i)},getRrPvidCookie:function(){return n.getCookie(s)},getDevCookie:function(){return n.getCookie(a)},getLastEventTimeCookie:function(){return n.getCookie(u)},getMailRequestLastCallTimeCookie:function(){return n.getCookie(c)},getSessionIdCookie:function(){return n.getCookie(d)},getLastViewedCookie:function(){return n.getCookie(l)},getLastAddedBasketCookie:function(){return n.getCookie(m)},getRecomAddToCartItemIdCookie:function(){return n.getCookie(h)},getRecomAddToCartMethodNameCookie:function(){return n.getCookie(v)},getRecomAddToCartSuggesterCookie:function(){return n.getCookie(C)},getRecomItemIdCookie:function(){return n.getCookie(p)},getRecomMethodNameCookie:function(){return n.getCookie(g)},getRecomSuggesterCookie:function(){return n.getCookie(f)},getViewItemIdCookie:function(){return n.getCookie(k)},getAddToBasketItemIdCookie:function(){return n.getCookie(b)},getSubFormLastViewCookie:function(){return n.getCookie(e)},getVisitorSegmenRecordCookie:function(e){return e?n.getCookie(e):n.getCookie(I)},setForceClosedFlagCookie:function(e){n.setCookie(t,e,2592e3,"/")},setDeactivatedFlagCookie:function(e){n.setCookie(r,e,15768e3)},setIsVisitorAgreedToReceiveMarketingMailCookie:function(e){n.setCookie(i,e)},setSubFormLastViewCookie:function(){n.setCookie(e,!0,3600,"/")},setOnRootRrPvidCookie:function(e,t){n.setRootCookie(s,e,t)},setOnRootDevCookie:function(e,t){n.setRootCookie(a,e,t)},setOnRootLastEventTimeCookie:function(e){n.setRootCookie(u,e)},setOnRootMailRequestLastCallTimeCookie:function(e){n.setRootCookie(c,e)},setOnRootSessionIdCookie:function(e){n.setRootCookie(d,e,o.daysToSecond(365))},setOnRootLastViewedCookie:function(e){n.setRootCookie(l,e,3600)},setOnRootLastAddedBasketCookie:function(e){n.setRootCookie(m,e,3600)},setOnRootViewItemIdCookie:function(e){n.setRootCookie(k,e,600)},setOnRootAddToBasketItemIdCookie:function(e){n.setRootCookie(b,e,30)},setOnRootRecomAddToCartItemIdCookie:function(e){n.setRootCookie(h,e,30)},setOnRootRecomAddToCartMethodNameCookie:function(e){n.setRootCookie(v,e,60)},setOnRootRecomAddToCartSuggesterCookie:function(e){n.setRootCookie(C,e,60)},setOnRootRecomItemIdCookie:function(e){n.setRootCookie(p,e,60)},setOnRootRecomMethodNameCookie:function(e){n.setRootCookie(g,e,60)},setOnRootRecomSuggesterCookie:function(e){n.setRootCookie(f,e,60)},setOnRootVisitorSegmenRecordCookie:function(e,t,r){r=o.daysToSecond(r||60);e?n.setRootCookie(e,t,r):n.setRootCookie(I,t,r)},cleanOnRootLastViewedCookie:function(){n.setRootCookie(l,null,-1)},cleanOnRootLastAddedBasketCookie:function(){n.setRootCookie(m,null,-1)},cleanOnRootAddToBasketItemIdCookie:function(){n.setRootCookie(b,null,-1)},cleanOnRootViewItemIdCookie:function(){n.setRootCookie(k,null,-1)},cleanOnRootRecomAddToCartItemIdCookie:function(){n.setRootCookie(h,null,-1)},cleanOnRootRecomAddToCartMethodNameCookie:function(){n.setRootCookie(v,null,-1)},cleanOnRootRecomAddToCartSuggesterCookie:function(){n.setRootCookie(C,null,-1)},cleanOnRootRecomMethodNameCookie:function(){n.setRootCookie(g,null,-1)},cleanOnRootRecomSuggesterCookie:function(){n.setRootCookie(f,null,-1)},cleanOnRootRecomItemIdCookie:function(){n.setRootCookie(p,null,-1)},getSvyaznoyUserFilterType:function(){return n.getCookie("userFilterType")},useNs:!0}}),retailrocket.setModule("dev",["trackingCookies"],function(t){return{developmentMode:function(e){return null==e?!!t.getDevCookie():(t.setOnRootDevCookie(e,86400),e)},useNs:!0}}),retailrocket.setModule("segmentator",["trackingCookies"],function(n){function u(e,t){var r,o=n.getVisitorSegmenRecordCookie((t=t||{}).cookieName);return o&&o.split(":")[0]==e||(o=e+":"+(r=1,e=e,Math.floor(Math.random()*(e-r+1))+r)),n.setOnRootVisitorSegmenRecordCookie(t.cookieName,o,t.expireInDay),o.split(":")[1]}function i(e,t){for(var r=0,o=0;o<e.length;o++)r+=e[o];for(var n=u(r,t),i=0,a=1;a<=e.length;a++){for(var s=e[a-1],c=1;c<=s;c++)if(i+c==n)return a;i+=s}}return{getVisitorSegment:u,getPseudoSegment:i,getPseudoNamedSegment:function(e,t){var r,o=[],n=[];for(r in e)!{}.hasOwnProperty.call(e,r)||(o.push(r),n.push(e[r]));return o[i(n,t)-1]},useNs:!0}}),retailrocket.setModule("cors",[],function(){return{make:function(e,t,r,o,n,i,a){var s;if(XMLHttpRequest){if("withCredentials"in(s=new XMLHttpRequest)){s.open(t,e,!0);for(var c=s,u=r||[],d=0;d<u.length;++d){var l=u[d];c.setRequestHeader(l.name,l.value)}s.onerror=a,s.withCredentials=n,s.onreadystatechange=function(){4===s.readyState&&(200<=s.status&&s.status<400?i&&i(s.responseText):a&&a(new Error("Response returned with non-OK status")))},s.send(o)}}else XDomainRequest?((r||0<r.length)&&a(new Error("custom headers not supported")),(s=new XDomainRequest).open(t,e),s.onerror=a,s.onload=function(){i(s.responseText)},s.send(o)):a(new Error("CORS not supported"))},useNs:!0}}),retailrocket.setModule("api",["trackingCookies","document","window"],function(r,e,t){return{getSessionId:function(){return r.getSessionIdCookie()},getPartnerVisitorId:function(){function e(){return Math.floor(Math.random()*Math.pow(10,15)).toString()}var t=(t=r.getRrPvidCookie()||e()).length<13?e():t;return r.setOnRootRrPvidCookie(t,31536e3),t},getPartnerId:function(){return t.rrPartnerId},pushTrackingCall:function(e){(t.rrApiOnReady=t.rrApiOnReady||[]).push(function(){e(t.rrApi)})},baseUrl:"https://api.retailrocket.ru",useNs:!0}}),retailrocket.setModule("svyaznoy",["api","trackingCookies","window"],function(e,t,r){return"52485de00d422d1cb4c83609"===e.getPartnerId()&&(r.rrTestSegment=t.getSvyaznoyUserFilterType()),{}}),retailrocket.setModule("utils",["ns","document","punycode"],function(e,n,o){function i(e){return e instanceof Array?e.map(encodeURIComponent).join(","):encodeURIComponent(e)}function a(t){try{return decodeURIComponent(t)}catch(e){return t}}function r(e){var t,r,o;return n.querySelectorAll?n.querySelectorAll(e):(r=(t=n).documentElement.firstChild,o=t.createElement("STYLE"),r.appendChild(o),t.__qsaels=[],o.styleSheet.cssText=e+"{x:expression(document.__qsaels.push(this))}",window.scrollBy(0,0),t.__qsaels)}function s(e,t){return-1<(" "+e.className+" ").indexOf(" "+t+" ")}function c(e){var t=Array.prototype.toJSON,e=(delete Array.prototype.toJSON,JSON.stringify(e));return t&&(Array.prototype.toJSON=t),e}function u(){for(var e=n.getElementsByTagName("meta"),t=0;t<e.length;t++)if("Content-Type"===e[t].httpEquiv)return(e[t].charset||(e[t].content||"").replace(/.*charset=([^;]+).*/i,"$1")||"").toLowerCase()}function d(e){e=(e||"").toLowerCase().trim();return"iso-8859-1"===e?"windows-1252":e}function l(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)}return"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,t){(t=void 0===t?0:t)<0&&(t+=this.length),t<0&&(t=0);for(var r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1}),"filter"in Array.prototype||(Array.prototype.filter=function(e,t){for(var r,o=[],n=0,i=this.length;n<i;n++)n in this&&e.call(t,r=this[n],n,this)&&o.push(r);return o}),"forEach"in Array.prototype||(Array.prototype.forEach=function(e,t){for(var r=0,o=this.length;r<o;r++)r in this&&e.call(t,this[r],r,this)}),"map"in Array.prototype||(Array.prototype.map=function(e,t){for(var r=new Array(this.length),o=0,n=this.length;o<n;o++)o in this&&(r[o]=e.call(t,this[o],o,this));return r}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{getQueryString:function(){return window.rrQueryString||window.location.search.substring(1)},objToQueryString:function(e){var t="";if(e)for(var r in e)e.hasOwnProperty(r)&&null!==e[r]&&void 0!==e[r]&&(t+="&"+r+"="+i(e[r]));return t},buildEncodedArrayQueryParameter:function(e,t){return e?t+"="+e.map(encodeURIComponent).join("&"+t+"="):""},objToQueryStringWithPrefix:function(e,t){var r="";if(e)for(var o in e)e.hasOwnProperty(o)&&null!==e[o]&&void 0!==e[o]&&(r+="&"+t+o+"="+i(e[o]));return r},queryStringToObj:function(e){for(var t=e.split("&"),r={},o=0;o<t.length;o++){var n=t[o].split("="),i=a(n[0]),n=a(n[1]||"");0<i.trim().length&&(r[i]=n)}return r},plainCopy:function(e,t){var r,o={};for(r in e)!{}.hasOwnProperty.call(e,r)||(o[(t||"")+r]=e[r]);return o},getAllKeys:function(e){var t,r=[];for(t in e)!{}.hasOwnProperty.call(e,t)||r.push(t);return r},getElementsByClassName:function(e){return n.getElementsByClassName?n.getElementsByClassName(e):r("."+e)},isValidEmail:function(e){return/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e)},extend:function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},uniq:function(e){var t=[];return e.forEach(function(e){t.indexOf(e)<0&&t.push(e)}),t},registerCss:function(e){var t=n.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),n.getElementsByTagName("head")[0].appendChild(t)},createEventProperty:function(){var t=[],r={subscribe:function(e){t.push(e)},publish:function(){t.forEach(function(e){try{e.apply(r,arguments||[])}catch(e){(window.console||{log:function(){}}).log(e)}})}};return r},$one:function(e){return r(e)[0]||null},$all:r,$forall:function(e,t){[].forEach.call(r(e),t)},hasClass:s,getContainerByClass:function(e,t){for(var r=e.parentElement;r&&!s(r,t);)r=r.parentElement;return r},prototypeSafeJsonStringify:c,createMd5Hash:function(e){var t,r,o=c(e),n=0;if(0!==o.length)for(t=0,r=o.length;t<r;t++)n=(n<<5)-n+o.charCodeAt(t),n|=0;return n},getUrlWithoutQuery:function(e){return e?e.split(/[?#]/)[0]:""},getPerformanceEntries:function(){return"function"==typeof window.performance.getEntries?window.performance.getEntries():[]},isRobot:function(){return!!(document.referrer&&-1<document.referrer.indexOf("//metrika.yandex.ru/stat/visor/player/"))||!!(document.location&&document.location.href&&-1<document.location.href.indexOf(".mtproxy.yandex.net"))},getMetaCharset:u,encodingIsModified:function(){var e=d(u()),t=d(n.characterSet);return e&&e!==t},addEventListener:l,getParentsAttributeValueByEvent:function(e){if(window.event)for(var t=window.event.target;t;){if(t.getAttribute&&t.getAttribute(e))return t.getAttribute(e);t=t.parentNode}return null},convertUrHostnameToASCII:function(e){var t,r;return e?((t=document.createElement("a")).href=e,e=o.toASCII(t.hostname),r=t.pathname&&"/"===t.pathname[0]?t.pathname:"/"+t.pathname,t.protocol+"//"+e+r+t.search+t.hash):null},repeatUntilDOMLoaded:function(e,t,r){var o;"interactive"!==n.readyState&&"complete"!==n.readyState&&(o=setInterval(function(){e()},r),l(n,"DOMContentLoaded",function(){clearTimeout(o),t()}))},extractInt:function(e){return/^(\-|\+)?([0-9]+)$/.test(e)?Number(e):NaN},useNs:!0,bind:function(e,t){var r=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,r.concat(Array.prototype.slice.call(arguments)))}}}}),retailrocket.setModule("utils.base64StringToUint8Array",["window"],function(n){return{invoke:function(e){for(var e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=n.atob(e),r=new n.Uint8Array(t.length),o=0;o<t.length;++o)r[o]=t.charCodeAt(o);return r}}}),retailrocket.setModule("utils.getUint8Array",["window"],function(t){return{invoke:function(e){return new t.Uint8Array(e)}}}),retailrocket.setModule("htmlEncode",[],function(){return{encode:function(e){return document.createElement("a").appendChild(document.createTextNode(e)).parentNode.innerHTML}}}),retailrocket.setModule("json",[],function(){return{stringify:function(e){var t=Array.prototype.toJSON,e=(delete Array.prototype.toJSON,JSON.stringify(e.obj));return t&&(Array.prototype.toJSON=t),e},parse:function(e){return JSON.parse(e.jsonString)},ns:!1}}),retailrocket.setModule("visitor",["cors","api"],function(s,c){function i(e,t,r,o,n,i){var a="https://api.retailrocket.ru/api/2.1/visitor/"+c.getSessionId()+"?partnerId="+c.getPartnerId();s.make(a=r?a+"&signature="+r+"&validTill="+o:a,e,[{name:"Content-type",value:"application/json"}],t,!1,n||function(){},i||function(){})}return{post:function(e,t,r,o,n){i("POST",e,t,r,o,n)},patch:function(e,t,r,o,n){i("PATCH",e,t,r,o,n)},get:function(e,t,r,o){s.make("https://api.retailrocket.ru/api/1.0/visitor/"+t+"?partnerId="+e,"GET",[],null,!1,function(e){return r(JSON.parse(e))},o||function(){})},useNs:!0}}),retailrocket.setModule("products",["cors","api","utils","cdnurls"],function(s,c,u,d){var a=["id","name","price","pictureUrl","url","isAvailable","categoryPaths","description","stockId","vendor","model","typePrefix","oldPrice","buyUrl","params","color","size","title","artist"];function l(e,t,r,o,n,i){var a=u.createMd5Hash(o),r=u.objToQueryString({stockId:r,signature:n,contentHash:a,validTill:i});s.make(d.cdn+"/api/1.0/partner/"+e+"/products/"+t+"?"+r,"POST",[{name:"Content-type",value:"application/json"}],o,!1,function(){},function(){})}function m(e,t){var r,o=t.id,n=t.stockId,i=(t.id=parseInt(t.id,10),t.price=parseFloat(t.price),t.oldPrice=parseFloat(t.oldPrice),t.categoryPaths=t.categoryPaths||t.category,t.stockId&&"string"!=typeof t.stockId&&(t.stockId=t.stockId.toString()),t);for(r in i)a.indexOf(r)<0&&((i.params=i.params||{})[r]=i[r],delete i[r]);l(e,o,n,u.prototypeSafeJsonStringify(t))}return{post:function(i,a,s){u.encodingIsModified()||c.pushTrackingCall(function(){var e,t,r,o,n;if(!a)return m(c.getPartnerId(),i);e=c.getPartnerId(),t=i,r=a,o=s,n=JSON.parse(t),l(e,n.id,n.stockId,t,r,o)})},useNs:!0}}),retailrocket.setModule("productsGroup",["cors","api","utils","cdnurls"],function(s,c,u,d){var l=["groupId","name","price","pictureUrl","url","isAvailable","categoryPaths","description","stockId","vendor","model","typePrefix","oldPrice","buyUrl","params","color","size","title","artist","products"];function m(e,t,r,o,n,i){var a=u.createMd5Hash(o),r=u.objToQueryString({stockId:r,signature:n,contentHash:a,validTill:i});s.make(d.cdn+"/api/1.0/partner/"+e+"/productsgroup/"+t+"?"+r,"POST",[{name:"Content-type",value:"application/json"}],o,!1,function(){},function(){})}function p(e,t){t.categoryPaths=t.categoryPaths||t.category;var r,o=t.groupId,n=t.stockId,i=(t.price=parseFloat(t.price),t.oldPrice=parseFloat(t.oldPrice),t);for(r in i)l.indexOf(r)<0&&((i.params=i.params||{})[r]=i[r],delete i[r]);if(t.products)for(var a in t.products)t.products.hasOwnProperty(a)&&("string"==typeof(a=t.products[a]).price&&(a.price=parseFloat(a.price)),"string"==typeof a.oldPrice&&(a.oldPrice=parseFloat(a.oldPrice)),a.stockId&&"string"!=typeof a.stockId&&(a.stockId=a.stockId.toString()),u.plainCopy(a.params));m(e,o,n,u.prototypeSafeJsonStringify(t))}return{post:function(i,a,s){u.encodingIsModified()||c.pushTrackingCall(function(){var e,t,r,o,n;if(!a)return p(c.getPartnerId(),i);e=c.getPartnerId(),t=i,r=a,o=s,n=JSON.parse(t),m(e,n.groupId,n.stockId,t,r,o)})},useNs:!0}}),retailrocket.setModule("recommendationClient",["cors","utils","api","dev"],function(n,i,a,s){return{get:function(e,t,r,o){r=i.plainCopy(r||{}),r.session=r.session||a.getSessionId(),r.pvid=a.getPartnerVisitorId(),r.isDebug=s.developmentMode(),r.segmentId=i.queryStringToObj(i.getQueryString()).rr_segmentId,r.format=r.format||"json",t="https://api.retailrocket.ru/api/2.0/recommendation/"+(r.algorithmType?r.algorithmType+"/":"")+t+"/"+e+"/?"+i.objToQueryString(r);n.make(t,"get",[],null,!1,function(e){(o||function(){})(JSON.parse(e))})}}}),retailrocket.setModule("recommendation",["utils","recommendationClient"],function(c,u){return{forProducts:function(e,t,r,o,n){o=c.plainCopy(o||{});o.itemIds=t,u.get(e,r,o,n)},forCategories:function(e,t,r,o,n){var i=c.plainCopy(o||{});i.categoryIds=[],i.categoryPaths=[];for(var a=0;a<t.length;++a){var s=c.extractInt(t[a]);(s||0===s?i.categoryIds:i.categoryPaths).push(t[a])}u.get(e,r,i,n)},forPerson:function(e,t,r,o,n,i){n=c.plainCopy(n||{});n.algorithmType="personal"!==o?"personal":null,u.get(e,o,n,i)},forVisitor:function(e,t,r,o){r=c.plainCopy(r||{});r.session=t,u.get(e,"visitorinterest",r,o)},forSearch:function(e,t,r,o){r=c.plainCopy(r||{});r.phrase=t,u.get(e,"Search",r,o)},forVisitorCategoryInterest:function(e,t,r,o,n){o=c.plainCopy(o||{});o.session=t,o.algorithmType="VisitorCategoryInterest",u.get(e,r,o,n)},forPreview:function(e,t){u.get(e,"preview",{},t)},forInterestedCategories:function(e,t,r,o){r=c.plainCopy(r||{});r.session=t,u.get(e,"InterestedCategories",r,o)},useNs:!0}}),retailrocket.setModule("items",["cors","utils"],function(n,r){function i(e){return"https://api.retailrocket.ru/api/1.0/partner/"+e+"/"}function a(e,t,r,o){e=i(e)+"items/?itemsIds="+t.join(",")+(r?"&stock="+r:"")+"&format=json";n.make(e,"get",[],{},!1,function(e){o(JSON.parse(e))})}return{get:function(e,t,r,o){return 4===arguments.length?a(e,t,r,o):a(e,t,null,r)},getByGroupId:function(e,t){e=i(e.partnerId)+"itemsByGroupId/?format=json&"+r.buildEncodedArrayQueryParameter(e.groupIds,"groupIds")+(e.stockId?"&stock="+e.stockId:"")+(e.isProductIdString?"&isProductIdString=true":""),n.make(e,"get",[],{},!1,function(e){t(JSON.parse(e))})},useNs:!0}}),window.rrApiOnReady=window.rrApiOnReady||[],window.rrLibrary=function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var i={objToQueryString:function(e){var t="";if(e)for(var r in e)null!==e[r]&&void 0!==e[r]&&(t+="&"+r+"="+encodeURIComponent(e[r]));return t},getQueryString:function(){return window.rrQueryString||window.location.search.substring(1)},getQueryParametr:function(e){for(var t=i.getQueryString().split("&"),r=0;r<t.length;r++){var o=t[r].split("=");if(decodeURIComponent(o[0])==e)return decodeURIComponent(o[1]||"")}return null},queryStringToObject:function(){for(var e=i.getQueryString().split("&"),t={},r=0;r<e.length;r++){var o=e[r].split("="),n=decodeURIComponent(o[0]),o=decodeURIComponent(o[1]||"");0<n.trim().length&&(t[n]=o)}return t},queryStringObjectByPrefix:function(e){var t,r=i.queryStringToObject(),o={};for(t in r)0===t.indexOf(e)&&(o[t.replace(e,"")]=r[t]);return o},getSubscriberDataFromQueryString:function(){return rrLibrary.queryStringObjectByPrefix("rrsd_")},prototypeSafeJsonStringify:function(e){var t=Array.prototype.toJSON,e=(delete Array.prototype.toJSON,JSON.stringify(e));return t&&(Array.prototype.toJSON=t),e},executeSubscribers:function(e,t){if(0!==e.length){for(var r=i.EventProperty(),o=0;o<e.length;o++)try{e[o].apply(r,t||[])}catch(e){(window.console||{log:function(){}}).log(e)}r()}},EventProperty:function(){function e(){i.executeSubscribers(t,arguments)}var t=[];return e.subscribe=function(e){t.push(e)},e},parseStringableProperty:function(e,t,r){return"string"==typeof e?e:typeof e==typeof{}?e[t]:r}};return i}());retailrocket.setModule("rrLibrary",["window"],function(e){return e.rrLibrary}),retailrocket.setModule("localEventsEngine",["rrLibrary"],function(e){var r="retailRocketEvents",o=[];function n(t){try{localStorage.setItem(r,e.prototypeSafeJsonStringify(t))}catch(e){o=t}}function i(){try{return JSON.parse(localStorage.getItem(r))||[]}catch(e){return o}}"filter"in Array.prototype||(Array.prototype.filter=function(e,t){for(var r,o=[],n=0,i=this.length;n<i;n++)n in this&&e.call(t,r=this[n],n,this)&&o.push(r);return o});var t;return t=(new Date).getTime()-864e5,n(i().filter(function(e){return e.ts>t})),e.getLocalEvents=i,e.registerLocalEvent=function(e,t){var r=i();r.push({ts:(new Date).getTime(),ev:e,dt:t}),n(r)},e.findLocalEvents=function(t,r){var e=i();return t&&(e=e.filter(function(e){return 0<=t.indexOf(e.ev)})),e=r?e.filter(function(e){return e.ts>r}):e},{}}),!function(r){var e;window.rrApi=window.rcApi=((e={initialized:!1,pageView:r.EventProperty(),pageViewCompleted:r.EventProperty(),view:r.EventProperty(),viewCompleted:r.EventProperty(),groupView:r.EventProperty(),addToBasket:r.EventProperty(),addToBasketCompleted:r.EventProperty(),removeFromBasket:r.EventProperty(),removeFromBasketCompleted:r.EventProperty(),categoryView:r.EventProperty(),categoryViewCompleted:r.EventProperty(),order:r.EventProperty(),orderCompleted:r.EventProperty(),recomAddToCart:r.EventProperty(),recomAddToCartCompleted:r.EventProperty(),recomAddToBasket:r.EventProperty(),recomAddToBasketCompleted:r.EventProperty(),recomTrack:r.EventProperty(),recomTrackCompleted:r.EventProperty(),recomMouseDown:r.EventProperty(),recomMouseDownCompleted:r.EventProperty(),setEmail:r.EventProperty(),setEmailCompleted:r.EventProperty(),setCustomer:r.EventProperty(),setCustomerCompleted:r.EventProperty(),setProfile:r.EventProperty(),subscribeOnItemBackInStock:r.EventProperty(),welcomeSequence:r.EventProperty(),setKeywords:r.EventProperty(),search:r.EventProperty(),mailRequest:r.EventProperty(),mailRequestFormView:r.EventProperty(),subscribeOnPriceDrop:r.EventProperty(),impressionContentViewed:r.EventProperty(),impressionContentClicked:r.EventProperty(),_initialize:r.EventProperty(),_empty:function(){}})._initialize.subscribe(function(t){this.subscribe(function(){r.executeSubscribers(window.rrApiOnReady||[],[t]),window.rrApiOnReady={push:function(e){r.executeSubscribers([e],[t])}},(window.rrAsyncInit||window.rcAsyncInit||function(){})()})}),e)}(rrLibrary),retailrocket.setModule("rrApi",["window"],function(e){return e.rrApi}),retailrocket.setModule("trackingClient",["cors","utils","document","window","api"],function(o,n,r,i,a){function s(e){var t={};return t.session=a.getSessionId(),t.pvid=a.getPartnerVisitorId(),t.referrer=n.convertUrHostnameToASCII(r.referrer),t.partnerTestSegment=i.rrTestSegment,t.pageUrl=n.convertUrHostnameToASCII(i.location.href),t.email=i.rrUserEmail,t.keywords=i.rrSearchPhrase,t._no_cache_=(new Date).getTime(),t.origin="js",n.extend(t,e),n.objToQueryString(t)}return{call:function(e){var t="https://tracking.retailrocket.ru/1.0/event/"+e.eventName+"/"+a.getPartnerId()+(e.id?"/"+encodeURIComponent(e.id):""),r=s(e.params);o.make(t+"?"+r,e.method,e.headers,n.prototypeSafeJsonStringify(e.data),!1,e.onSuccessCallback||function(){})},subscribe:function(e){var t="https://tracking.retailrocket.ru/1.0/partner/"+a.getPartnerId()+"/subscribe/"+e.eventName,r=s(e.params);o.make(t+"?"+r,e.method,e.headers,n.prototypeSafeJsonStringify(e.data),!1,e.onSuccessCallback||function(){})}}}),retailrocket.setModule("tracking",["trackingClient","utils"],function(s,c){function a(e,t,r,o,n,i){var a={};(a="object"!=typeof t||Array.isArray(t)?a:c.plainCopy(t||{},"rrsd_")).email=e,a.basket=r,a.viewed=o,a.isAgreedToReceiveMarketingMail=!1!==i,a._tjsv1=!0,s.call({eventName:"setEmail",method:"get",params:a,onSuccessCallback:n})}return{pageView:function(e){s.call({eventName:"pageView",method:"get",params:{_tjsv1:!0},onSuccessCallback:e.onSuccessCallback})},groupView:function(e){var t=[];e.productIds&&(t=e.productIds.map(Number)),s.call({eventName:"groupView",method:"post",headers:[{name:"Content-type",value:"application/json"}],params:{email:e.email,recomItemId:e.recomItemId,stockId:e.stockId,_tjsv1:!0},data:{productIds:t},onSuccessCallback:e.onSuccessCallback})},markupRendered:function(e){s.call({eventName:"markuprendered",partnerId:e.partnerId,method:"get",params:{blockId:e.blockId,segmentId:e.segmentId,pvid:e.pvid,session:e.session,isMarkupViewedSupported:e.isMarkupViewedSupported,_tjsv1:!0},onSuccessCallback:e.onSuccessCallback})},view:function(e){s.call({eventName:"view",method:"get",id:e.itemId,params:{recomItemId:e.recomItemId,stockId:e.stockId,_tjsv1:!0},onSuccessCallback:e.onSuccessCallback})},setEmail:a,setCustomer:function(e){var t="object"==typeof e.defaultStockId?e.defaultStockId.stockId:e.defaultStockId;s.call({eventName:"setCustomer",method:"post",headers:[{name:"Content-type",value:"application/json"}],params:{_tjsv1:!0},data:{customerId:e.customerId,email:e.email,phone:e.phone,customData:e.customData,softLinks:e.softLinks,defaultStockId:t,isAgreedToReceiveMarketingMail:!1!==e.isAgreedToReceiveMarketingMail},onSuccessCallback:e.onSuccessCallback})},setProfile:function(e){var t="object"==typeof e.defaultStockId?e.defaultStockId.stockId:e.defaultStockId;s.call({eventName:"setProfile",method:"post",headers:[{name:"Content-type",value:"application/json"}],params:{_tjsv1:!0},data:{email:e.email,phone:e.phone,customData:e.customData,softLinks:e.softLinks,defaultStockId:t,isAgreedToReceiveMarketingMail:!1!==e.isAgreedToReceiveMarketingMail},onSuccessCallback:e.onSuccessCallback})},addToBasket:function(e,t,r){t="object"==typeof t?t.stockId:t;s.call({eventName:"addToBasket",method:"get",id:e,params:{stockId:t,_tjsv1:!0},onSuccessCallback:r})},removeFromBasket:function(e,t){s.call({eventName:"removeFromBasket",method:"get",id:e,params:{_tjsv1:!0},onSuccessCallback:t})},categoryView:function(e,t,r){e="string"==typeof e?Number(e):e;s.call({eventName:"categoryView",method:"get",id:e,params:{categoryPath:t,_tjsv1:!0},onSuccessCallback:r})},recomAddToBasket:function(e,t,r,o){s.call({eventName:"recomAddToBasket",method:"get",id:e,params:{suggester:t,suggestMethod:r,_tjsv1:!0},onSuccessCallback:o})},order:function(e){s.call({eventName:"order",method:"get",id:e.itemId,params:{qnt:e.qnt,price:e.price,transaction:e.transaction,email:e.email,contactExternalId:e.contactExternalId,stockId:e.stockId,_tjsv1:!0},onSuccessCallback:e.onSuccessCallback})},search:function(e){s.call({eventName:"search",method:"get",params:{email:e.email,searchPhrase:e.searchPhrase,_tjsv1:!0},onSuccessCallback:e.onSuccessCallback})},recomMouseDown:function(e){s.call({eventName:"recomMouseDown",method:"get",id:e.itemId,params:{suggester:e.suggester,suggestMethod:e.suggestMethod,rrmbid:e.rrmbid,_tjsv1:!0},onSuccessCallback:e.onSuccessCallback})},recomTrack:function(e){var t={suggestMethod:e.suggestMethod,recomms:e.recomms,to:e.recomms,_tjsv1:!0},r=e.eventParams||{};c.extend(t,c.plainCopy(r)),s.call({eventName:"recomTrack",method:"get",params:t,onSuccessCallback:e.onSuccessCallback})},viewSubscriptionForm:function(e){s.call({eventName:"viewsubscriptionform",method:"get",params:{isFirstView:e.isFirstView,requestType:e.requestType,_tjsv1:!0},onSuccessCallback:e.onSuccessCallback})},markupViewed:function(e){s.call({eventName:"markupViewed",method:"get",params:{blockId:e.blockId,segmentId:e.segmentId,_tjsv1:!0},onSuccessCallback:e.onSuccessCallback})},mailRequest:function(e,t,r,o,n,i){a(e,i,[],[],function(){},n);e={email:e,session:t,requestType:r,productIds:o,isAgreedToReceiveMarketingMail:n,_tjsv1:!0};c.extend(e,c.plainCopy(i,"rrsd_")),s.call({eventName:"mailrequest",method:"get",params:e})},priceDrop:function(e,t){for(var r=[].concat(t),o={email:e,_tjsv1:!0},n=0;n<r.length;n++)o["items["+n+"].ItemId"]=r[n].id,o["items["+n+"].Price"]=r[n].price;s.subscribe({eventName:"pricedrop",method:"get",params:o})},impressionContentViewed:function(e){s.call({eventName:"impressionContentViewed",method:"get",params:{impressionContentId:e.impressionContentId,_tjsv1:!0},onSuccessCallback:e.onSuccessCallback})},impressionContentClicked:function(e){s.call({eventName:"impressionContentClicked",method:"get",params:{impressionContentId:e.impressionContentId,_tjsv1:!0},onSuccessCallback:e.onSuccessCallback})},emailClick:function(e,t){t._tjsv1=!0,s.call({eventName:"emailclick",method:"get",params:t,id:e})},backInStock:function(e,t){s.subscribe({eventName:"backinstock",method:"get",params:{email:e,itemId:t,_tjsv1:!0}})},welcomeSequence:function(e){a(e,null,[],[],function(){},!1),s.subscribe({eventName:"welcomesequence",method:"get",params:{email:e,_tjsv1:!0}})},webPushSubscription:function(e){s.call({eventName:"webpushsubscription",method:"post",headers:[{name:"Content-type",value:"application/json"}],params:{subscriptionId:e.subscriptionId,_tjsv1:!0},data:e.subscription,onSuccessCallback:e.onSuccessCallback})}}}),retailrocket.setModule("trackingV2",["trackingClient","utils"],function(n,o){function r(e){var t={};(t="object"!=typeof e.emailData||Array.isArray(e.emailData)?t:o.plainCopy(e.emailData||{},"rrsd_")).email=e.email,t.basket=e.basket,t.viewed=e.viewed,t.isAgreedToReceiveMarketingMail=!1!==e.isAgreedToReceiveMarketingMail,n.call({eventName:"setEmail",method:"get",params:t,onSuccessCallback:e.onSuccessCallback})}return{pageView:function(e){n.call({eventName:"pageView",method:"get",onSuccessCallback:e.onSuccessCallback})},groupView:function(e){var t=[];e.productIds&&(t=e.productIds.map(Number)),n.call({eventName:"groupView",method:"post",headers:[{name:"Content-type",value:"application/json"}],params:{email:e.email,recomItemId:e.recomItemId,stockId:e.stockId,isProductIdString:e.isProductIdString},data:{productIds:t},onSuccessCallback:e.onSuccessCallback})},markupRendered:function(e){n.call({eventName:"markuprendered",partnerId:e.partnerId,method:"get",params:{blockId:e.blockId,segmentId:e.segmentId,pvid:e.pvid,session:e.session,isMarkupViewedSupported:e.isMarkupViewedSupported},onSuccessCallback:e.onSuccessCallback})},view:function(e){n.call({eventName:"view",method:"get",id:e.itemId,params:{recomItemId:e.recomItemId,stockId:e.stockId,isProductIdString:e.isProductIdString},onSuccessCallback:e.onSuccessCallback})},setEmail:r,setCustomer:function(e){n.call({eventName:"setCustomer",method:"post",headers:[{name:"Content-type",value:"application/json"}],params:{},data:{customerId:e.customerId,email:e.email,phone:e.phone,customData:e.customData,softLinks:e.softLinks,defaultStockId:e.defaultStockId,isAgreedToReceiveMarketingMail:!1!==e.isAgreedToReceiveMarketingMail},onSuccessCallback:e.onSuccessCallback})},setProfile:function(e){n.call({eventName:"setProfile",method:"post",headers:[{name:"Content-type",value:"application/json"}],params:{},data:{email:e.email,phone:e.phone,customData:e.customData,softLinks:e.softLinks,defaultStockId:e.defaultStockId,isAgreedToReceiveMarketingMail:!1!==e.isAgreedToReceiveMarketingMail},onSuccessCallback:e.onSuccessCallback})},addToBasket:function(e){n.call({eventName:"addToBasket",method:"get",id:e.itemId,params:{stockId:e.stockId,isProductIdString:e.isProductIdString},onSuccessCallback:e.onSuccessCallback})},removeFromBasket:function(e){n.call({eventName:"removeFromBasket",method:"get",id:e.itemId,params:{isProductIdString:e.isProductIdString},onSuccessCallback:e.onSuccessCallback})},categoryView:function(e){var t="string"==typeof e.categoryId?Number(e.categoryId):e.categoryId;n.call({eventName:"categoryView",method:"get",id:t,params:{categoryPath:e.categoryPath},onSuccessCallback:e.onSuccessCallback})},recomAddToBasket:function(e){n.call({eventName:"recomAddToBasket",method:"get",id:e.itemId,params:{suggester:e.suggester,suggestMethod:e.suggestMethod,isProductIdString:e.isProductIdString},onSuccessCallback:e.onSuccessCallback})},compositeOrder:function(e){n.call({eventName:"order",method:"post",headers:[{name:"Content-type",value:"application/json"}],params:{contactExternalId:e.contactExternalId},data:{items:e.items,email:e.email,transaction:e.transaction.toString(),stockId:e.stockId,isProductIdString:e.isProductIdString},onSuccessCallback:e.onSuccessCallback})},search:function(e){n.call({eventName:"search",method:"get",params:{email:e.email,searchPhrase:e.searchPhrase},onSuccessCallback:e.onSuccessCallback})},recomMouseDown:function(e){n.call({eventName:"recomMouseDown",method:"get",id:e.itemId,params:{suggester:e.suggester,suggestMethod:e.suggestMethod,rrmbid:e.rrmbid,isProductIdString:e.isProductIdString},onSuccessCallback:e.onSuccessCallback})},recomTrack:function(e){var t={suggestMethod:e.suggestMethod,recomms:e.recomms,to:e.recomms},r=e.eventParams||{};o.extend(t,o.plainCopy(r)),n.call({eventName:"recomTrack",method:"get",params:t,onSuccessCallback:e.onSuccessCallback})},viewSubscriptionForm:function(e){n.call({eventName:"viewsubscriptionform",method:"get",params:{isFirstView:e.isFirstView,requestType:e.requestType},onSuccessCallback:e.onSuccessCallback})},markupViewed:function(e){n.call({eventName:"markupViewed",method:"get",params:{blockId:e.blockId,segmentId:e.segmentId},onSuccessCallback:e.onSuccessCallback})},mailRequest:function(e){r({email:e.email,emailData:e.customData,basket:[],viewed:[],onSuccessCallback:function(){},isAgreedToReceiveMarketingMail:e.isAgreedToReceiveMarketingMail});var t={email:e.email,session:e.session,requestType:e.requestType,productIds:e.productIds,isAgreedToReceiveMarketingMail:e.isAgreedToReceiveMarketingMail};o.extend(t,o.plainCopy(e.customData,"rrsd_")),n.call({eventName:"mailrequest",method:"get",params:t})},priceDrop:function(e){for(var t=[].concat(e.productOrProductList),r={email:e.email},o=0;o<t.length;o++)r["items["+o+"].ItemId"]=t[o].id,r["items["+o+"].Price"]=t[o].price;n.subscribe({eventName:"pricedrop",method:"get",params:r})},impressionContentViewed:function(e){n.call({eventName:"impressionContentViewed",method:"get",params:{impressionContentId:e.impressionContentId},onSuccessCallback:e.onSuccessCallback})},impressionContentClicked:function(e){n.call({eventName:"impressionContentClicked",method:"get",params:{impressionContentId:e.impressionContentId},onSuccessCallback:e.onSuccessCallback})},emailClick:function(e){n.call({eventName:"emailclick",method:"get",params:e.params,id:e.mailTrackingId})},backInStock:function(e){n.subscribe({eventName:"backinstock",method:"get",params:{email:e.email,itemId:e.itemId,isProductIdString:e.isProductIdString}})},welcomeSequence:function(e){r({email:e.email,emailData:null,basket:[],viewed:[],onSuccessCallback:function(){},isAgreedToReceiveMarketingMail:!1}),n.subscribe({eventName:"welcomesequence",method:"get",params:{email:e.email}})}}}),retailrocket.setModule("eventsApiHandlers",["trackingCookies","api","utils","rrApi","rrLibrary","trackingV2","utils.cookies"],function(n,e,i,a,s,c,t){var o,u,d;return!i.isRobot()&&t.areCookiesEnabled()&&(o="rr_setemail",d=function(e,r){u=e.trim(),setTimeout(function(){var e=n.getLastAddedBasketCookie(),t=n.getLastViewedCookie();n.cleanOnRootLastAddedBasketCookie(),n.cleanOnRootLastViewedCookie(),c.setEmail({email:u,emailData:r,basket:e,viewed:t,onSuccessCallback:a.setEmailCompleted})},100)},a._initialize.subscribe(function(e){var t,r;e&&(null!=(e=s.getQueryParametr(o))&&d(e,s.getSubscriberDataFromQueryString()),a.view.subscribe(function(e,t){n.setOnRootViewItemIdCookie(e);t=t||{};c.view({itemId:e,recomItemId:n.getRecomItemIdCookie(),stockId:t.stockId,isProductIdString:t.isProductIdString,onSuccessCallback:a.viewCompleted})}),a.groupView.subscribe(function(e,t){t=t||{};c.groupView({email:u,productIds:e,recomItemId:n.getRecomItemIdCookie(),stockId:t.stockId,isProductIdString:t.isProductIdString})}),a.addToBasket.subscribe(function(e,t){n.setOnRootAddToBasketItemIdCookie(e);t="object"==typeof t?t:{stockId:t};c.addToBasket({itemId:e,stockId:t.stockId,isProductIdString:t.isProductIdString,onSuccessCallback:a.addToBasketCompleted})}),a.addToBasketCompleted.subscribe(function(){n.cleanOnRootAddToBasketItemIdCookie()}),a.removeFromBasket.subscribe(function(e,t){c.removeFromBasket({itemId:e,isProductIdString:(t||{}).isProductIdString,onSuccessCallback:a.removeFromBasketCompleted})}),a.categoryView.subscribe(function(e){var t=e,r=null;parseInt(e,10)!=e&&(t=null,r=e),c.categoryView({categoryId:t,categoryPath:r,onSuccessCallback:a.categoryViewCompleted})}),a.recomAddToCart.subscribe(function(e,t){var t=t||{},r=t.methodName||s.parseStringableProperty(t,"methodName","")||t.suggestMethod||s.parseStringableProperty(t,"suggestMethod",""),o=t.suggester||"widget";n.setOnRootRecomAddToCartItemIdCookie(e),n.setOnRootRecomAddToCartMethodNameCookie(r),n.setOnRootRecomAddToCartSuggesterCookie(o),c.recomAddToBasket({itemId:e,suggester:o,suggestMethod:r,isProductIdString:t.isProductIdString,onSuccessCallback:a.recomAddToCartCompleted})}),a.recomAddToCartCompleted.subscribe(function(){n.cleanOnRootRecomAddToCartItemIdCookie(),n.cleanOnRootRecomAddToCartMethodNameCookie(),n.cleanOnRootRecomAddToCartSuggesterCookie()}),a.recomMouseDown.subscribe(function(e,t){var t=t||{},r=s.parseStringableProperty(t,"methodName","")||s.parseStringableProperty(t,"suggestMethod",""),o=t.suggester||"widget";n.setOnRootRecomItemIdCookie(e),n.setOnRootRecomMethodNameCookie(r),n.setOnRootRecomSuggesterCookie(o),c.recomMouseDown({itemId:e,suggester:o,suggestMethod:r,rrmbid:i.getParentsAttributeValueByEvent("data-retailrocket-markup-block"),isProductIdString:t.isProductIdString,onSuccessCallback:a.recomMouseDownCompleted})}),a.recomMouseDownCompleted.subscribe(function(){n.cleanOnRootRecomItemIdCookie(),n.cleanOnRootRecomMethodNameCookie(),n.cleanOnRootRecomSuggesterCookie()}),a.recomTrack.subscribe(function(e,t,r,o){c.recomTrack({suggestMethod:e,to:t,recomms:r.join(","),onSuccessCallback:a.recomTrackCompleted,eventParams:o})}),a.order.subscribe(function(e){var t=function(e){var t,r,o=function(e){for(var t={},r=0;r<e.length;++r){var o=e[r],n=(t[o.id.toString()]||{qnt:0}).qnt;t[o.id.toString()]={id:o.id,qnt:n+(parseFloat(o.qnt)||1),price:parseFloat(o.price)||0}}return t}(e),n=[],i=0;for(t in o)!{}.hasOwnProperty.call(o,t)||(r=o[t],n[i]={productId:r.id,quantity:r.qnt,price:r.price},i++);return n}(e.items);c.compositeOrder({items:t,transaction:e.transaction,email:u,stockId:e.stockId,isProductIdString:e.isProductIdString,onSuccessCallback:a.orderCompleted})}),a.setEmail.subscribe(d),a.setCustomer.subscribe(function(e){var t="object"==typeof e.defaultStockId?e.defaultStockId.stockId:e.defaultStockId;c.setCustomer({customerId:e.customerId,email:e.email,phone:e.phone,customData:e.customData,softLinks:e.softLinks,defaultStockId:t,isAgreedToReceiveMarketingMail:!1!==e.isAgreedToReceiveMarketingMail,onSuccessCallback:a.setCustomerCompleted})}),a.setProfile.subscribe(function(e){var t="object"==typeof e.defaultStockId?e.defaultStockId.stockId:e.defaultStockId;c.setProfile({email:e.email,phone:e.phone,customData:e.customData,softLinks:e.softLinks,defaultStockId:t,isAgreedToReceiveMarketingMail:!1!==e.isAgreedToReceiveMarketingMail,onSuccessCallback:a.setCustomerCompleted})}),a.subscribeOnItemBackInStock.subscribe(function(e,t,r){c.backInStock({email:e,itemId:t,isProductIdString:(r||{}).isProductIdString})}),a.welcomeSequence.subscribe(function(e){c.welcomeSequence({email:e})}),a.search.subscribe(function(e){c.search({email:u,searchPhrase:e,onSuccessCallback:function(){}})}),a.mailRequest.subscribe(function(e,t,r,o,n,i){c.mailRequest({email:e,session:t,requestType:r,productIds:o,isAgreedToReceiveMarketingMail:n,customData:i})}),a.mailRequestFormView.subscribe(function(e){e=e||{};c.viewSubscriptionForm({isFirstView:null==n.getSubFormLastViewCookie(),requestType:e.requestType,onSuccessCallback:function(){}}),n.setSubFormLastViewCookie()}),a.subscribeOnPriceDrop.subscribe(function(e,t){c.priceDrop({email:e,productOrProductList:t})}),a.impressionContentViewed.subscribe(function(e){c.impressionContentViewed({impressionContentId:e.impressionContentId,onSuccessCallback:e.onSuccessCallback})}),a.impressionContentClicked.subscribe(function(e){c.impressionContentClicked({impressionContentId:e.impressionContentId,onSuccessCallback:e.onSuccessCallback})}),c.pageView({onSuccessCallback:function(){a.pageViewCompleted()}}),e=n.getRecomAddToCartItemIdCookie(),t=n.getRecomAddToCartMethodNameCookie(),r=n.getRecomAddToCartSuggesterCookie(),null!=e&&a.recomAddToCart(e,{suggestMethod:t,suggester:r}),null!=(e=n.getAddToBasketItemIdCookie())&&a.addToBasket(e,{}),t=n.getRecomItemIdCookie(),r=n.getRecomMethodNameCookie(),e=n.getRecomSuggesterCookie(),null!=t)&&null!=e&&a.recomMouseDown(t,{suggestMethod:r,suggester:e})})),{}}),retailrocket.setModule("localLog",["rrApi","rrLibrary"],function(e,n){return e.view.subscribe(function(e){n.registerLocalEvent("view",{id:e})}),e.groupView.subscribe(function(e){n.registerLocalEvent("groupView",{ids:e})}),e.addToBasket.subscribe(function(e){n.registerLocalEvent("addToBasket",{id:e})}),e.removeFromBasket.subscribe(function(e){n.registerLocalEvent("removeFromBasket",{id:e})}),e.recomAddToCart.subscribe(function(e,t){var t=t||{},r=t.suggester||"widget",t=t.suggestMethod||t.methodName||n.parseStringableProperty(t,"methodName","");n.registerLocalEvent("recomAddToCart",{id:e,sgr:r,met:t})}),e.order.subscribe(function(e){for(var t,r=0;r<e.items.length;++r){t=e.items[r],o=e.transaction;var o={id:t.id,qnt:t.qnt,transaction:o,price:t.price};n.registerLocalEvent("order",o)}}),e.search.subscribe(function(e){n.registerLocalEvent("search",e)}),e.mailRequest.subscribe(function(){n.registerLocalEvent("mailrequest",{})}),e.mailRequestFormView.subscribe(function(e){n.registerLocalEvent("mailrequestFormView",e)}),{}}),retailrocket.setModule("lastTenItems",["trackingCookies","utils","rrApi","utils.cookies"],function(r,e,o,t){return!e.isRobot()&&t.areCookiesEnabled()&&o._initialize.subscribe(function(e){function t(e){var t=[];9<(t=r.getLastAddedBasketCookie()?r.getLastAddedBasketCookie().split(","):t).length&&t.shift(),parseInt(e,10)&&t.push(e.toString()),r.setOnRootLastAddedBasketCookie(t.join(","))}e&&(o.view.subscribe(function(e){var t=[];9<(t=r.getLastViewedCookie()?r.getLastViewedCookie().split(","):t).length&&t.shift(),parseInt(e,10)&&t.indexOf(e.toString())<0&&t.push(e),r.setOnRootLastViewedCookie(t.join(","))}),o.addToBasket.subscribe(t),o.recomAddToCart.subscribe(t),o.order.subscribe(function(){r.cleanOnRootLastAddedBasketCookie(),r.cleanOnRootLastViewedCookie()}))}),{}}),retailrocket.setModule("emailAttribution",["api","utils","rrApi","rrLibrary","trackingV2","utils.cookies"],function(e,r,t,o,n,i){return!r.isRobot()&&i.areCookiesEnabled()&&t._initialize.subscribe(function(){var e,t=o.getQueryParametr("rr_mailid")||o.getQueryParametr("MailTrackingId")||o.getQueryParametr("mailtrackingid");t&&((e=null!=o.getQueryParametr("rr_setemail")?{}:r.plainCopy(o.getSubscriberDataFromQueryString()||{},"rrsd_")).rr_mailid=t,e.utm_source=o.getQueryParametr("utm_source"),e.rr_urlType=o.getQueryParametr("rr_urlType"),e.linkid=o.getQueryParametr("rr_linkid"),e.linkpos=o.getQueryParametr("rr_linkpos"),e.rr_psmma=o.getQueryParametr("rr_psmma"),n.emailClick({mailTrackingId:t,params:e}))}),{}}),retailrocket.setModule("localEvents",["utils"],function(r){var e="retailRocketEvents";function o(){try{return JSON.parse(localStorage.getItem(e))||[]}catch(e){return[]}}function n(t,r){var e=o();return t&&(e=e.filter(function(e){return 0<=t.indexOf(e.ev)})),e=r?e.filter(function(e){return e.ts>r}):e}return{getViewedProductIds:function(e){var e=n(["view","groupView"],e),t=[];return e.forEach(function(e){t.push("view"===e.ev?e.dt.id:e.dt.ids[0])}),r.uniq(t)},getOrderedProductIds:function(e){return e=n(["order"],e).map(function(e){return e.dt.id}),r.uniq(e)},getBasketProductIds:function(e){var o,e=n(["addToBasket","recomAddToCart","removeFromBasket"],e);return r.getAllKeys((o={},e.forEach(function(e){var t=e.dt.id,r=parseInt(o[t],10);isNaN(r)&&(r=0),"addToBasket"===e.ev||"recomAddToCart"===e.ev?o[t]=r+1:--r<1?delete o[t]:o[t]=r}),o))},getLastEventTimestamp:function(){var e=o();return e.length<1?0:e[e.length-1].ts},getLastSearchPhrase:function(e){return 0<(e=n(["search"],e)).length?e[e.length-1].dt:null},getLastMailRequestTimestamp:function(){var e=n(["mailrequest"],0);return e.length<1?0:e[e.length-1].ts},useNs:!0}}),retailrocket.setModule("exitIntendWidget",["document","utils","api","trackingCookies"],function($document,utils,api,trackingCookies){var exitIntendElem=null,stillHaveToHide=!1,showEvent=utils.createEventProperty();function showWidget(widget){stillHaveToHide=!1,isWidgetOpen(widget)||"false"===widget.getAttribute("active")||trackingCookies.getForceClosedFlagCookie()||(widget.className+=" active",showEvent.publish({}),function emitOnShow(){eval(widget.getAttribute("data-on-show"))}.apply(widget))}function hideWidget(e){stillHaveToHide=!0,setTimeout(function(){stillHaveToHide&&(e.className=e.className.replace(/\bactive\b/g,"").trim())},50)}function isWidgetOpen(e){return 0<=e.className.indexOf("active")}function close(force){force&&trackingCookies.setForceClosedFlagCookie(!0),hideWidget(exitIntendElem),!function emitOnHide(force){eval(exitIntendElem.getAttribute("data-on-hide"))}.apply(exitIntendElem,[force])}function initialize(){exitIntendElem=utils.getElementsByClassName("retailrocket-notify-widget")[0]||utils.getElementsByClassName("retailrocket-exit-intend")[0];var e=utils.getElementsByClassName("retailrocket-popup")[0];exitIntendElem&&!exitIntendElem.getAttribute("initialized")&&(exitIntendElem.setAttribute("initialized","true"),utils.addEventListener($document.documentElement,"mouseleave",function(e){20<e.clientY||showWidget(exitIntendElem)}),utils.addEventListener(exitIntendElem,"click",function(e){e.stopPropagation(),window.event&&window.event.cancelBubble&&(window.event.cancelBubble=!0)}),utils.addEventListener($document.documentElement,"click",function(){close(!1)}),utils.addEventListener($document,"keydown",function(e){27===e.keyCode&&close(!1)}),utils.addEventListener(exitIntendElem,"mouseleave",function(){e||close(!1)}),utils.addEventListener(exitIntendElem,"mouseover",function(){showWidget(exitIntendElem)}),e)&&utils.addEventListener(exitIntendElem,"click",function(e){e.target===e.currentTarget&&close(!1)})}function isContainsElement(e){return!!exitIntendElem&&exitIntendElem.contains(e)}return initialize(),api.pushTrackingCall(function(e){e.pageView.subscribe(initialize)}),{initialize:initialize,showEvent:showEvent,isContainsElement:isContainsElement,close:close,useNs:!0}}),retailrocket.setModule("timeOutWidget",["document","utils","api","trackingCookies"],function($document,utils,api,trackingCookies){var showClassName="retailrocket-timeout-widget-show",widget=null,onShow,onHide,deactivate=function(){trackingCookies.setDeactivatedFlagCookie(!0)},show=function(force){null!=widget&&(!trackingCookies.getDeactivatedFlagCookie()&&"false"!==widget.getAttribute("active")||force)&&(deactivate(),widget.className=widget.className.replace(new RegExp("\\b"+showClassName+"\\b","g"),"")+" "+showClassName,function emitOnShow(){eval(onShow)}.apply(widget))},hide=function(){null!=widget&&(widget.className=widget.className.replace(new RegExp("\\b"+showClassName+"\\b","g"),""),function emitOnHide(){eval(onHide)}.apply(widget))};function initialize(e){(widget=utils.getElementsByClassName(e||"retailrocket-timeout-widget")[0])&&!widget.getAttribute("retailrocket-timeout-initialized")&&(widget.setAttribute("retailrocket-timeout-initialized","true"),e=parseInt(widget.getAttribute("data-retailrocket-timeout-sec"),10),onShow=widget.getAttribute("data-retailrocket-timeout-on-show"),onHide=widget.getAttribute("data-retailrocket-timeout-on-hide"),setTimeout(show,1e3*e))}return initialize(),api.pushTrackingCall(function(e){e.pageView.subscribe(function(){initialize()})}),{initialize:initialize,show:show,hide:hide,deactivate:deactivate,useNs:!0}}),retailrocket.setModule("widget",["ns","recommendation","items","utils","localEvents","api","exitIntendWidget","trackingCookies","cdnurls"],function(ns,recommendationApi,itemsApi,utils,localEvents,api,exitIntendWidget,trackingCookies,cdnurls){api.pushTrackingCall(function(e){function t(){trackingCookies.setOnRootLastEventTimeCookie((new Date).getTime())}e.mailRequest.subscribe(function(){trackingCookies.setOnRootMailRequestLastCallTimeCookie((new Date).getTime()),t()}),e.viewCompleted.subscribe(t),e.addToBasketCompleted.subscribe(t),e.recomAddToBasketCompleted.subscribe(t),e.orderCompleted.subscribe(t)});var defaultHtmlTemplate='<header class="retailrocket-widgettitle"><%=headerText%><% if (typeof subHeaderText !== "undefined") { %>    <small><%=subHeaderText %></small><% } %></header><ul class="retailrocket-items">    <% for (var i = 0 ; i < numberOfItems; ++i) with(items[i]) { %>        <li class="retailrocket-item" style="width:<%=itemImageWidth%>px;">            <a class="retailrocket-item-info" href="<%=Url%>" onmousedown=\'retailrocket.widget.click(<%=ItemId%>,"<%=suggesterId%>","<%=algorithm%>") \'>                <div class="retailrocket-item-image">                    <img onerror="retailrocket.widget.hideProduct(this)" src="'+cdnurls.cdnimg+'/api/1.0/partner/<%=partnerId%>/item/<%=ItemId%>/picture/?format=png&width=<%=itemImageWidth%>&height=<%=itemImageHeight%>&scale=both" style="width:<%=itemImageWidth%>px;height:<%=itemImageHeight%>px"></div>                <div class="retailrocket-item-brand">                    <%=Vendor %>                </div>                <div class="retailrocket-item-title">                    <%=Name %>                </div>                <div class="retailrocket-item-description">                    <%=Description %>                </div>            </a>            <% if (OldPrice) { %>                <div class="retailrocket-item-old-price"> <span class="retailrocket-item-old-price-value"><%= OldPrice %></span> <span class="retailrocket-item-price-currency"></span> </div>            <% } %>            <div class="retailrocket-item-price"> <span class="retailrocket-item-price-value"><%= Price %></span> <span class="retailrocket-item-price-currency"></span> </div>            <nav class="retailrocket-actions">                <a class="retailrocket-actions-more" href="<%=Url%>" onmousedown=\'retailrocket.widget.click(<%=ItemId%>,"<%=suggesterId%>","<%=algorithm%>")\'></a>                <a class="retailrocket-actions-buy" href="<%=Url%>" onclick=\'return retailrocket._widgetAddToBasket("<%=ItemId%>", "<%=onAddToBasket%>")\'></a>            </nav>        </li>   <% } %></ul>',tmpl=function(){var o={};return function e(t,r){t=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):o[t]=o[t]||e(document.getElementById(t).innerHTML);return r?t(r):t}}();function templateRender(e,t,r,o){o=utils.plainCopy(o);t=t||[],e.innerHTML="",o.recommendations=o.items=t,o.numberOfItems=(o.numberOfItems||0)>=t.length?t.length:o.numberOfItems,e.setAttribute("data-number-of-rendered-items",o.numberOfItems),e.setAttribute("data-rendered-items-ids",t.slice(0,o.numberOfItems).map(function(e){return e.ItemId}).join(",")),o.numberOfItems&&(e.innerHTML=tmpl(r,o))}function mailReqeustOrderRecommendation(e,t,r,o,n){o.isPostransactionMailTemplateReady?(e=null===(e=e.getAttribute("data-is-product-id-string"))?null:"true"===e.toLowerCase(),recommendationApi.forProducts(t,r,"related",{version:1,isProductIdString:e},function(e){n(e,"related",o.headerTextOrdered)})):n([],"")}function mailRequestBasketRecommendation(e,t,r,o,n){r.isBasketMailTemplateReady?itemsApi.get(e,t,o,function(e){n(e,"basket",r.headerTextBasket)}):n([],"")}function mailRequestViewRecommendation(e,t,r,o,n){function i(e){for(var t=[],r=0;r<e.length;++r){var o=e[r],n=function(e,t){if(t)for(var r=0;r<e.length;++r){var o=e[r];if(o.GroupId===t)return o}return null}(t,o.GroupId);n?n.IsAvailable||(t[e.indexOf(n)]=n):t.push(o)}return t}r.isViewedMailTemplateReady?itemsApi.get(e,t,o,function(e){var e=i(e),t=e.filter(function(e){return e.IsAvailable});!(0<t.length)&&r.isViewedNaMailTemplateReady?n(e,"viewedna",r.headerTextViewedNa):n(t,"viewed",r.headerTextViewed)}):n([],"")}function toUtsTicks(e){return 1e4*(e.getTime()-60*e.getTimezoneOffset())+621355968e9}function getRecomsByServerSideHistory(e,t,r,o,n,i){var a=toUtsTicks(new Date(trackingCookies.getMailRequestLastCallTimeCookie()||0)),r=r.filter(function(e){return e.Weight>a}),s=r.filter(function(e){return"Order"===e.Algorithm}).map(function(e){return e.ItemId});0<s.length?mailReqeustOrderRecommendation(e,t,s,o,i):0<(e=r.filter(function(e){return"AddToBasket"===e.Algorithm||"RecomAddToBasket"===e.Algorithm}).map(function(e){return e.ItemId})).length?mailRequestBasketRecommendation(t,e,o,n,i):0<(s=r.filter(function(e){return"View"===e.Algorithm}).map(function(e){return e.ItemId})).length&&o.isViewedMailTemplateReady?mailRequestViewRecommendation(t,s,o,n,i):i([],"")}function getRecomsByLocalEvents(e,t,r,o,n){var i=localEvents.getLastMailRequestTimestamp(),a=localEvents.getOrderedProductIds(i);0<a.length?mailReqeustOrderRecommendation(e,t,a,r,n):0<(e=localEvents.getBasketProductIds(i)).length?mailRequestBasketRecommendation(t,e,r,o.stockId,n):0<(a=localEvents.getViewedProductIds(i)).length?mailRequestViewRecommendation(t,a,r,o.stockId,n):null!=(e=localEvents.getLastSearchPhrase(i))?recommendationApi.forSearch(t,e,o,function(e){n(e,"search",r.headerTextSearched)}):n([],"")}function sendWidgetView(e){var t=e.getAttribute("data-rendered-list-type");t&&api.pushTrackingCall(function(e){e.mailRequestFormView({requestType:t})})}function buildPreRenderDelegate(context,preRenderStr){return preRenderStr?function(data,renderFn){!function(){eval(preRenderStr)}.apply(context)}:function(e,t){t(e)}}function buildPostRenderDelegate(context,postRenderStr){return function(){!function(){eval(postRenderStr)}.apply(context)}}function algorithmTypeByAlgorithm(e){switch(e){case"alternative":case"related":case"accessories":return"product";case"popular":case"latest":case"saleByLatest":case"saleByPopular":return"category";case"search":return"search";case"personal":return"personal";case"mailrequest":case"interacted-items":return"mailrequest";case"mailrequest-server-side-history":return"mailrequest-server-side-history";case"preview":return"preview";default:return null}}function toCamelStyle(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}function getParamsFromAttribe(e,t){for(var r=e.attributes,o={},n=0;n<r.length;n++){var i=r[n];0===i.nodeName.indexOf(t)&&(o[toCamelStyle(i.nodeName.replace(t+"-",""))]=i.nodeValue)}return o}function getAlgorithmParams(e){var t=getParamsFromAttribe(e,"data-algorithm-param");return t.version=t.version||e.getAttribute("data-algorithm-ver"),"true"===e.getAttribute("data-exclude-basket-items")&&(t.excludedItemIds=localEvents.getBasketProductIds(!1)),t}function getParentMarkupId(e){for(var t=e,r="data-retailrocket-markup-block";t;){if(t.getAttribute&&t.getAttribute(r))return t.getAttribute(r);t=t.parentNode}return null}function getTemplateParams(e){var t=getParentMarkupId(e),r=getParamsFromAttribe(e,"data-template-param");return r.onAddToBasket=e.getAttribute("data-item-add-to-basket-action"),r.suggesterId=r.suggesterId||e.getAttribute("data-suggester-id")||t||"widget",r.numberOfItems=r.numberOfItems||e.getAttribute("data-number-of-items"),r.headerText=r.headerText||e.getAttribute("data-header-text"),r.itemImageWidth=r.itemImageWidth||e.getAttribute("data-image-width")||170,r.itemImageHeight=r.itemImageHeight||e.getAttribute("data-image-height")||170,r.headerTextViewed=r.headerTextViewed||e.getAttribute("data-header-text-viewed")||e.getAttribute("data-header-text")||r.headerText,r.headerTextViewedNa=r.headerTextViewedNa||e.getAttribute("data-header-text-viewedna")||e.getAttribute("data-header-text")||r.headerText,r.headerTextBasket=r.headerTextBasket||e.getAttribute("data-header-text-basket")||e.getAttribute("data-header-text")||r.headerText,r.headerTextOrdered=r.headerTextOrdered||e.getAttribute("data-header-text-ordered")||e.getAttribute("data-header-text")||r.headerText,r.headerTextSearched=r.headerTextSearched||e.getAttribute("data-header-text-searched")||e.getAttribute("data-header-text")||r.headerText,r.isViewedNaMailTemplateReady="true"===r.isViewedNaMailTemplateReady||"true"===e.getAttribute("data-viewedna-mail-template-ready"),r.isViewedMailTemplateReady=!e.getAttribute("data-viewed-mail-template-ready")||"true"===e.getAttribute("data-viewed-mail-template-ready"),r.isBasketMailTemplateReady=!e.getAttribute("data-basket-mail-template-ready")||"true"===e.getAttribute("data-basket-mail-template-ready"),r.isPostransactionMailTemplateReady=!e.getAttribute("data-posttransaction-mail-template-ready")||"true"===e.getAttribute("data-posttransaction-mail-template-ready"),r}function renderWidget(widget){var partnerId=api.getPartnerId();if(partnerId&&"undefined"!==partnerId){var lastRenderedEventTs=-1;if(!widget.getAttribute("data-widget-applied")){var algorithmType=widget.getAttribute("data-algorithm-type"),algorithm=widget.getAttribute("data-algorithm");if(algorithmType||algorithm){var templateContainerId=widget.getAttribute("data-template-container-id"),template=templateContainerId?document.getElementById(templateContainerId).innerText||document.getElementById(templateContainerId).textContent||document.getElementById(templateContainerId).innerHTML:defaultHtmlTemplate,onPreRender=(exitIntendWidget.isContainsElement(widget)&&exitIntendWidget.showEvent.subscribe(function(){sendWidgetView(widget)}),"interacted-items"!==algorithm||widget.getAttribute("data-on-update")||widget.setAttribute("data-on-update",'Number(this.getAttribute("data-number-of-rendered-items")) ? this.parentElement.style.display = "block": this.parentElement.style.display = "none"'),buildPreRenderDelegate(widget,widget.getAttribute("data-on-pre-render"))),onPostRender=buildPostRenderDelegate(widget,widget.getAttribute("data-on-update")||widget.getAttribute("data-on-post-render")),templateParams=getTemplateParams(widget)||{},algorithmParams=(templateParams.partnerId=partnerId,templateParams.algorithm=algorithm,getAlgorithmParams(widget)||{}),algorithmType=algorithmType||algorithmTypeByAlgorithm(algorithm);switch(algorithmType){case"product":var productIds=widget.getAttribute("data-algorithm-argument")||widget.getAttribute("data-item-id"),isProductIdStringAttribute,isProductIdString;productIds&&(isProductIdStringAttribute=widget.getAttribute("data-is-product-id-string"),isProductIdString=null===isProductIdStringAttribute?null:"true"===isProductIdStringAttribute.toLowerCase(),algorithmParams.isProductIdString=isProductIdString,recommendationApi.forProducts(partnerId,productIds.split(","),algorithm,algorithmParams,function(e){onPreRender(e,function(e){templateRender(widget,e,template,templateParams),onPostRender()})}));break;case"category":var categoryPathsAttr=widget.getAttribute("data-algorithm-category-paths"),categoryArgs=null;categoryPathsAttr&&(categoryArgs=eval(categoryPathsAttr)),recommendationApi.forCategories(partnerId,categoryArgs||(widget.getAttribute("data-algorithm-argument")||widget.getAttribute("data-category-id")).split(","),algorithm,algorithmParams,function(e){onPreRender(e,function(e){templateRender(widget,e,template,templateParams),onPostRender()})});break;case"search":recommendationApi.forSearch(partnerId,widget.getAttribute("data-algorithm-argument")||widget.getAttribute("data-search-phrase"),algorithmParams,function(e){onPreRender(e,function(e){templateRender(widget,e,template,templateParams),onPostRender()})});break;case"personal":if(!api.getSessionId())return;"compositeForCategory"===algorithm&&"categoryPaths"in algorithmParams&&(algorithmParams.categoryPaths=eval(algorithmParams.categoryPaths)),recommendationApi.forPerson(partnerId,api.getSessionId(),null,algorithm,algorithmParams,function(e){onPreRender(e,function(e){templateRender(widget,e,template,templateParams),onPostRender()})});break;case"mailrequest":var tParam1=utils.plainCopy(templateParams);setInterval(function(){var e=localEvents.getLastEventTimestamp();lastRenderedEventTs!==e&&(getRecomsByLocalEvents(widget,partnerId,tParam1,algorithmParams,function(e,t,r){tParam1.headerText=r,widget.setAttribute("data-rendered-list-type",t),onPreRender(e,function(e){templateRender(widget,e,template,tParam1),onPostRender()})}),lastRenderedEventTs=e)},1e3);break;case"mailrequest-server-side-history":var tParam2=utils.plainCopy(templateParams);setInterval(function(){var e=parseInt(trackingCookies.getLastEventTimeCookie()||0,10);lastRenderedEventTs<e&&(recommendationApi.forPerson(partnerId,api.getSessionId(),null,"history",algorithmParams,function(e){getRecomsByServerSideHistory(widget,partnerId,e,tParam2,algorithmParams.stockId,function(e,t,r){tParam2.headerText=r,widget.setAttribute("data-rendered-list-type",t),onPreRender(e,function(e){templateRender(widget,e,template,tParam2),onPostRender()})})}),lastRenderedEventTs=(new Date).getTime())},1e3);break;case"visitor-category-interest":if(!api.getSessionId())return;recommendationApi.forVisitorCategoryInterest(partnerId,api.getSessionId(),algorithm,algorithmParams,function(e){onPreRender(e,function(e){templateRender(widget,e,template,templateParams),onPostRender()})});break;case"preview":recommendationApi.forPreview(partnerId,function(e){onPreRender(e,function(e){templateRender(widget,e,template,templateParams),onPostRender()})})}widget.setAttribute("data-widget-applied",!0)}}}}ns._widgetAddToBasket=function(itemId,callbackName){return eval(callbackName+"('"+itemId+"')")};var cssHasBeenAdded=!1;function renderAll(e){api.getSessionId()||api.pushTrackingCall(function(){api.getSessionId()&&renderAll(e)});var t=utils.getElementsByClassName(e||"retailrocket-widget");0<t.length&&!cssHasBeenAdded&&"5b4da99297a526e5d8224106"!==api.getPartnerId()&&(cssHasBeenAdded=!0,utils.registerCss("https://rrstatic.retailrocket.ru/widget/retailrocket.widget.css"));for(var r=0;r<t.length;++r)renderWidget(t[r])}function click(t,r,o){api.pushTrackingCall(function(e){e.recomMouseDown(t,{suggester:r,methodName:o})})}function hideProduct(e){e=utils.getContainerByClass(e,"retailrocket-item");e&&(e.style.display="none")}function formatNumber(e,t,r,o){var o=isNaN(o=Math.abs(o))?2:o,t=null==t?".":t,r=null==r?",":r,n=e<0?"-":"",i=parseInt(e=Math.abs(+e||0).toFixed(o),10)+"",a=3<(a=i.length)?a%3:0;return n+(a?i.substr(0,a)+r:"")+i.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+r)+(o?t+Math.abs(e-i).toFixed(o).slice(2):"")}return api.getPartnerId()&&api.getSessionId()&&"527a338aec92e6106859030b"!==api.getPartnerId()&&renderAll(),api.pushTrackingCall(function(e){e.pageView.subscribe(function(){renderAll()})}),{hideProduct:hideProduct,formatNumber:formatNumber,render:renderAll,click:click,useNs:!0}}),retailrocket.setModule("deactivateIfAgreedToReceiveMarketingMail",["visitor","utils","api","trackingCookies"],function(r,e,o,n){function i(){return e.getElementsByClassName("deactivate-if-visitor-agreed-to-receive-marketing-mail")}function a(e){for(var t=i(),r=0;r<t.length;++r)t[r].setAttribute("active",e)}function t(){var e=o.getSessionId(),t=i();e&&0!==t.length&&("true"===n.getIsVisitorAgreedToReceiveMarketingMailCookie()?a(!1):r.get(o.getPartnerId(),e,function(e){var t="true"===(e.HasEmail||"").toString(),e="true"===(e.IsAgreedToReceiveMarketingMail||"").toString();n.setIsVisitorAgreedToReceiveMarketingMailCookie(e&&t),a(!t||!e)}))}return a(!1),o.getPartnerId()&&o.getSessionId()&&t(),o.pushTrackingCall(function(e){e.pageView.subscribe(t)}),{initialize:t,useNs:!0}}),retailrocket.setModule("mailRequestForm",["utils","document","api","exitIntendWidget"],function(utils,$document,api,exitIntendWidget){var productListElmIdAttributeName="data-product-to-send-widget-id",emailInputElmIdAttributeName="data-email-input-id",triggerEmailAgreeCheckboxIdAttributeName="data-subscribe-on-trigger-email-checkbox-id",sendBtnElmIdAttributeName="data-send-btn-id",dataOnSubscribeJsAttributeName="data-on-subscribe";function getCustomEmailData(e){for(var t=e.getElementsByClassName("data-custom-email-attribute"),r={},o=0;o<t.length;o++){var n=t[o];r[n.name]=n.value}return r}function getFormModel(e){var t={email:null,isAgreeToGetTriggerEmail:!1,listType:null,itemsId:[],onSubscribeJs:""},r=$document.getElementById(e.getAttribute(emailInputElmIdAttributeName)),r=(t.email=(r.value||"").trim(),$document.getElementById(e.getAttribute(triggerEmailAgreeCheckboxIdAttributeName))),r=(r&&(t.isAgreeToGetTriggerEmail=r.checked),$document.getElementById(e.getAttribute(productListElmIdAttributeName)));return r&&r.getAttribute("data-rendered-items-ids")&&(t.itemsId=r.getAttribute("data-rendered-items-ids").split(","),t.listType=r.getAttribute("data-rendered-list-type")),t.customData=getCustomEmailData(e),t.onSubscribeJs=e.getAttribute(dataOnSubscribeJsAttributeName),t}function sendMailRequest(mailRequestFormElm){var model=getFormModel(mailRequestFormElm);utils.isValidEmail(model.email)&&(api.pushTrackingCall(function(e){e.mailRequest(model.email,api.getSessionId(),model.listType,model.itemsId,model.isAgreeToGetTriggerEmail,model.customData)}),function emitOnSunbscribe(){eval(model.onSubscribeJs)}.apply(mailRequestFormElm),exitIntendWidget.isContainsElement(mailRequestFormElm))&&exitIntendWidget.close(model.isAgreeToGetTriggerEmail)}function initialize(){for(var e=utils.getElementsByClassName("retailrocket-mailrequest-form"),t=0;t<e.length;++t){var r=e[t];if(!r||r.getAttribute("initialized"))return;r.setAttribute("initialized","true");var o=$document.getElementById(r.getAttribute(emailInputElmIdAttributeName)),n=$document.getElementById(r.getAttribute(sendBtnElmIdAttributeName));utils.addEventListener(n,"click",function(e){return function(){sendMailRequest(e)}}(r)),utils.addEventListener(o,"keydown",function(t){return function(e){13===e.keyCode&&sendMailRequest(t)}}(r))}}return initialize(),api.pushTrackingCall(function(e){e.pageView.subscribe(initialize)}),{initialize:initialize,useNs:!0}}),retailrocket.setModule("timing",["cors","api","utils","utils.cookies"],function(s,e,c,t){var u,d,l;return t.areCookiesEnabled()&&e.getPartnerVisitorId()%10==0&&(u="https://tracking.retailrocket.ru/1.0/timing/",d="?partnerId="+e.getPartnerId()+"&session="+e.getSessionId(),l={},window.performance)&&c.getPerformanceEntries()&&e.pushTrackingCall(function(e){e.pageView.subscribe(function(){setTimeout(m,1e3)})}),{};function m(){for(var e,t,r=[],o=c.getPerformanceEntries(),n=0;n<o.length;++n){var i=o[n],a=i.name?c.getUrlWithoutQuery(i.name.toLowerCase()):null,i=Math.round(i.duration);a&&(-1<a.indexOf(".retailrocket.ru/")||-1<a.indexOf(".retailrocket.ru/"))&&a.indexOf(u)<0&&0<i&&!(a in l)&&r.push({url:a,ms:i})}0<r.length?(e=c.prototypeSafeJsonStringify(r),t=function(){for(var e=0;e<r.length;++e)l[r[e].url]=!0;setTimeout(m,1e3)},s.make(u+d,"POST",[{name:"Content-type",value:"application/json"}],e,!1,t,function(){})):setTimeout(m,1e3)}}),retailrocket.setModule("elementViewedObserver",["window"],function(e){return{observe:function(r){new e.IntersectionObserver(function(e,t){(e=e[0]).isIntersecting&&(r.callback(),e=e.target,t.unobserve(e))},{threshold:0}).observe(r.htmlElement)},isObserverSupported:function(){return typeof e.IntersectionObserver==typeof e.Function}}}),retailrocket.setModule("markup",["utils","api","dev","cors","document","trackingV2","cdnurls","elementViewedObserver","htmlEncode"],function(m,p,n,i,g,f,a,k,b){var s="data-retailrocket-markup-block";function h(e,t,r){t={name:r.name,attributes:function(e){for(var t={},r=0;r<e.attributes.length;r++){var o=e.attributes[r];t[o.name]=o.value}return t}(t),message:r.message,stack:r.stack};i.make("https://tracking.retailrocket.ru/2.0/partner/"+e.PartnerId+"/markupblocks/"+e.Id+"/trackerror/?blockChangingDate="+e.LastChangedAt,"POST",[{name:"Content-type",value:"application/json"}],m.prototypeSafeJsonStringify(t),!1,function(){},function(){})}var c={};function u(o,n){if(n&&n.Markup){for(var e,t=n.Markup,r=o.attributes,i=0,a=r.length;i<a;i++)e=r[i],t=t.replace(new RegExp("{{"+e.nodeName+"}}","gi"),b.encode(e.nodeValue).replace(new RegExp('"',"g"),"&quot;").replace(new RegExp("'","g"),"&#39;"));o.innerHTML=t,[].forEach.call(o.querySelectorAll("script"),function(e){if(e)if(e.src)t=e.src,(r=g.createElement("script")).type="text/javascript",r.src=t,r.async=!0,g.getElementsByTagName("script")[0].parentElement.appendChild(r);else if(!e.type||"text/javascript"===e.type)try{eval.apply(window,[e.text])}catch(e){throw h(n,o,e),e}var t,r});var s,c,u,d,l=k.isObserverSupported();s=n,c=l,p.pushTrackingCall(function(){f.markupRendered({partnerId:s.PartnerId,blockId:s.Id,segmentId:s.SegmentId,pvid:p.getPartnerVisitorId(),session:p.getSessionId(),isMarkupViewedSupported:c})}),!0===l&&(l=o,u=n.Id,d=n.SegmentId,u=m.bind(f.markupViewed,{},{blockId:u,segmentId:d}),k.observe({htmlElement:l,callback:u}))}}function e(t){var e,r,o;t.getAttribute("initialized")||(t.setAttribute("initialized","true"),e=n.developmentMode(),r=m.queryStringToObj(m.getQueryString()),o={blockId:t.getAttribute(s),pvid:p.getPartnerVisitorId(),partnerId:p.getPartnerId(),isDebug:e,segmentId:r.rr_segmentId},e&&(o.rnd=Date.now()),c[o.blockId]||(c[o.blockId]={data:null,callbacks:[]},i.make(a.cdn+"/api/markupblocks/?"+m.objToQueryString(o),"get",{},{},!1,function(e){var t=JSON.parse(e);c[o.blockId].data=t,c[o.blockId].callbacks.forEach(function(e){e(t)})})),null===c[o.blockId].data?c[o.blockId].callbacks.push(function(e){u(t,e)}):u(t,c[o.blockId].data))}function t(){m.$forall("div["+s+"]",e)}return t(),m.repeatUntilDOMLoaded(t,t,100),{render:t,renderBlock:u,useNs:!0}}),retailrocket.setModule("partnerSettingsClient",["cors"],function(o){return{getPartnerSettings:function(e,t,r){return o.make("https://cdn.retailrocket.ru/api/1.0/PushPartnerSettings/"+e+"?format=json","get",[],null,!1,function(e){e=JSON.parse(e)||{},e={publicKey:e.PublicKey,emptyServiceWorkerUrl:e.EmptyServiceWorkerUrl,webPushServiceWorkerUrl:e.WebPushServiceWorkerUrl};(t||function(){})(e)},r)},useNs:!0}}),retailrocket.setModule("webPushSubscription",["window","partnerSettingsClient","utils.base64StringToUint8Array","utils.getUint8Array","webPushCookies"],function(o,n,a,s,c){var r=300,u=o.Promise;function d(e){return null==e?u.reject("no partner settings"):null===e.publicKey||void 0===e.publicKey?u.reject("no public key found"):e.emptyServiceWorkerUrl===e.webPushServiceWorkerUrl?u.reject("service workers urls must be different"):e}function i(e){return o.navigator.serviceWorker.register(e.webPushServiceWorkerUrl)}function l(t){return i(t).then(function(e){return c.getWebPushSwUpdated()?{partnerSettings:t,registration:e}:o.navigator.serviceWorker.register(t.emptyServiceWorkerUrl).then(function(){return i(t)}).then(function(e){return c.setOnRootWebPushSwUpdated(r),{partnerSettings:t,registration:e}})})}function m(t,r){return o.Notification.requestPermission().then(function(e){return"denied"===e?u.reject("Push Notification is denied"):t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r})})}return{execute:function(t,i){return null!=u&&(e="serviceWorker"in o.navigator,r="PushManager"in o,(e?r?u.resolve():u.reject("push is not supported"):u.reject("service worker not supported")).then(function(){return e=t,new u(function(t,r){n.getPartnerSettings(e,function(e){t(e)},function(e){r(e)})});var e}).then(d).then(function(e){return l(e).then(function(e){var o=e.registration,n=e.partnerSettings;return o.pushManager.getSubscription().then(function(e){var t=null!==e,r=a.invoke(n.publicKey);return!0==t?function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=s.invoke(e),o=s.invoke(t),n=0;n!==e.byteLength;n++)if(r[n]!==o[n])return!1;return!0}(e.options.applicationServerKey,a.invoke(n.publicKey))?c.getWebPushSubscriptionSaved()?u.resolve():i(e):e.unsubscribe().then(function(e){return!0===e?u.resolve():u.reject("Could not unsubscribe")}).then(function(){return m(o,r).then(i)}):m(o,r).then(i)})})}).catch(function(e){return e}));var e,r}}}),retailrocket.setModule("webPushSubscriptionsClient",["cors","utils"],function(r,o){function n(e){var t="https://tracking.retailrocket.ru/1.0/event/"+e.eventName+"/"+e.partnerId+(e.id?"/"+e.id:"");r.make(t+"?"+e.queryString,e.method,e.headers,o.prototypeSafeJsonStringify(e.data),!1,e.onSuccessCallback||function(){})}return{postBySession:function(e){var t,r;t={subscriptionId:e.subscriptionId,session:e.session},(r={})._no_cache_=(new Date).getTime(),r.origin="js",o.extend(r,t),n({eventName:"webpushsubscription",method:"post",headers:[{name:"Content-type",value:"application/json"}],queryString:o.objToQueryString(r),data:e.subscription,partnerId:e.partnerId,onSuccessCallback:e.onSuccessCallback})},postByLink:function(e){var t,r;t={subscriptionId:e.subscriptionId,linkName:e.link.name,linkValue:e.link.value},(r={})._no_cache_=(new Date).getTime(),r.origin="js",r["link.Name"]=t.linkName,r["link.Value"]=t.linkValue,r.subscriptionId=t.subscriptionId,n({eventName:"webpushsubscription",method:"post",headers:[{name:"Content-type",value:"application/json"}],queryString:o.objToQueryString(r),data:e.subscription,partnerId:e.partnerId,onSuccessCallback:e.onSuccessCallback})}}}),retailrocket.setModule("internalWebpush",["rrApi","api","webPushSubscription","webPushCookies","htmlEncode","webPushSubscriptionsClient"],function(e,r,t,o,n,i){function a(e){var t=n.encode(e.toJSON().endpoint);i.postBySession({subscriptionId:t,subscription:e,session:r.getSessionId(),partnerId:r.getPartnerId(),onSuccessCallback:function(){o.setOnRootWebPushSubscriptionSaved(86400)}})}return e._initialize.subscribe(function(){return t.execute(r.getPartnerId(),a)}),{}}),retailrocket.setModule("emailResubscription",["api","cors","json"],function(r,o,n){return{startResubscription:function(e){e=e||{},o.make("https://tracking.retailrocket.ru/2.0/partner/"+r.getPartnerId()+"/emailResubscription/visitors/"+r.getSessionId()+"/resubscription","post",[],null,!1,e.onSuccessCallback||function(){})},getVisitorState:function(e){var t=e||{};o.make("https://api.retailrocket.ru/api/2.0/partner/"+r.getPartnerId()+"/emailResubscription/visitors/"+r.getSessionId(),"get",[],null,!1,function(e){t.onSuccessCallback&&t.onSuccessCallback({data:n.parse({jsonString:e})})})},useNs:!0}}),retailrocket.setModule("impression",["cors","utils"],function(e,t){function r(e){return"https://visitors-sp.retailrocket.ru/v1/partners/"+e}function o(r){e.make(r.url,"GET",[{name:"Content-type",value:"application/json"}],{},!1,function(e){if(0===e.length)return r.callbackContents.empty(),!1;var t=JSON.parse(e);switch(t.contentType){case"string":r.callbackContents.string(t.content);break;case"productIds":r.callbackContents.productIds(t.content);break;case"banners":r.callbackContents.banners(t.content);break;case"sharedBanners":r.callbackContents.sharedBanners(t.content)}return!0})}function n(e){var t=[];return void 0!==e.string&&t.push("string"),void 0!==e.banners&&t.push("banners"),void 0!==e.sharedBanners&&t.push("sharedBanners"),void 0!==e.productIds&&t.push("productIds"),t.join(",")}return{forAnyPlacements:function(e){o({url:r(e.partnerId)+"/anyPlacements/"+e.placementId+"/impressions?"+t.objToQueryString({session:e.session,acceptContent:n(e.callbackContents),apiKey:e.apiKey})+t.objToQueryStringWithPrefix(e.custom,"custom."),callbackContents:e.callbackContents})},forProductPlacement:function(e){o({url:r(e.partnerId)+"/productPlacements/"+e.placementId+"/impressions?"+t.objToQueryString({session:e.session,productId:e.productId,stockId:e.stockId,acceptContent:n(e.callbackContents),apiKey:e.apiKey})+t.objToQueryStringWithPrefix(e.custom,"custom."),callbackContents:e.callbackContents})},forProductGroupPlacement:function(e){o({url:r(e.partnerId)+"/productGroupPlacements/"+e.placementId+"/impressions?"+t.objToQueryString({session:e.session,productIds:e.productIds,stockId:e.stockId,acceptContent:n(e.callbackContents),apiKey:e.apiKey})+t.objToQueryStringWithPrefix(e.custom,"custom."),callbackContents:e.callbackContents})},forCategoryPlacement:function(e){o({url:r(e.partnerId)+"/categoryPlacements/"+e.placementId+"/impressions?"+t.objToQueryString({session:e.session,categoryId:e.categoryId,categoryPath:e.categoryPath,acceptContent:n(e.callbackContents),apiKey:e.apiKey})+t.objToQueryStringWithPrefix(e.custom,"custom."),callbackContents:e.callbackContents})},forSearchPlacement:function(e){o({url:r(e.partnerId)+"/searchPlacements/"+e.placementId+"/impressions?"+t.objToQueryString({session:e.session,searchQuery:e.searchQuery,acceptContent:n(e.callbackContents),apiKey:e.apiKey})+t.objToQueryStringWithPrefix(e.custom,"custom."),callbackContents:e.callbackContents})},useNs:!0}}),retailrocket.setModule("initPartnerSessionT",["api","trackingCookies","utils","rrApi","cors","utils.cookies"],function(e,r,t,o,n,i){var a;return i.areCookiesEnabled()&&!t.isRobot()&&((a=r.getSessionIdCookie())&&o._initialize({sessionId:a}),i=t.objToQueryString({session:a,_nocache:(new Date).getTime()+""+Math.random()}),n.make("https://tracking.retailrocket.ru/1.0/event/initialize/"+e.getPartnerId()+"?"+i,"get",[],{},!0,function(e){var e=JSON.parse(e),t=e.sessionId||e.RrSessionId;r.setOnRootSessionIdCookie(t),a||o._initialize(e)})),{}},!0),retailrocket.setModule("pageViewOnLoad",["document","window","rrApi"],function(r,o,e){function t(){try{s.doScroll("left")}catch(e){return void setTimeout(t,50)}l("poll")}var n=function(){rrApiOnReady.push(e.pageView)},i=!1,a=!0,s=r.documentElement,c=r.addEventListener?"addEventListener":"attachEvent",u=r.addEventListener?"removeEventListener":"detachEvent",d=r.addEventListener?"":"on",l=function(e){var t=e.type||"";"readystatechange"===t&&"complete"!==r.readyState||(("load"===t?o:r)[u](d+t,l,!1),i)||(i=!0,setTimeout(function(){n(o,t||e)}))};if("complete"===r.readyState)n(o,"lazy");else{if(r.createEventObject&&s.doScroll){try{a=!o.frameElement}catch(e){}a&&t()}r[c](d+"DOMContentLoaded",l,!1),r[c](d+"readystatechange",l,!1),o[c](d+"load",l,!1)}return{}})}catch(exception){var errorModel={name:(exception.name||"").substring(0,100),message:(exception.message||"").substring(0,500),stack:(exception.stack||"").substring(0,4e3),partnerId:window.rrPartnerId},request;XMLHttpRequest&&(request=new XMLHttpRequest,request.open("POST","https://tracking.retailrocket.ru/javascripterrors",!0),request.setRequestHeader("Content-type","application/json"),request.send(JSON.stringify(errorModel)))}